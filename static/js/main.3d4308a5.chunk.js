(this["webpackJsonpAccounting-App"]=this["webpackJsonpAccounting-App"]||[]).push([[0],{106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},16:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},259:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){},267:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){},270:function(e,t,n){},271:function(e,t,n){},272:function(e,t,n){},273:function(e,t,n){},274:function(e,t,n){},275:function(e,t,n){},276:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(97),i=n.n(s),r=(n(106),n(2)),l=(n(107),n(8)),o=n(9),d=n(3),u=(n(108),n(0));var j=function(e){var t=e.click,n=Object(c.useState)(!0),a=Object(r.a)(n,2),s=a[0],i=a[1],o=Object(c.useState)(!1),j=Object(r.a)(o,2),b=j[0],m=j[1],O=Object(c.useState)(!1),h=Object(r.a)(O,2),x=h[0],p=h[1],v=Object(c.useState)(!1),f=Object(r.a)(v,2),N=f[0],g=f[1],y=Object(c.useRef)(null);function S(e){if(window.outerWidth<1050){var t=y.current;t&&!t.contains(e.target)&&i(!1)}}Object(c.useEffect)((function(){return window.outerWidth<1050&&i(!1),window.outerWidth>1050&&i(!0)}),s),Object(c.useEffect)((function(){return document.addEventListener("mousedown",S),function(){document.removeEventListener("mousedown",S)}}),[]);var C=Object(c.useState)({width:window.innerWidth<1050?"0rem":window.innerWidth<=900?"20rem":"40rem"}),D=Object(r.a)(C,2),k=D[0],w=D[1],A={transition:"width 1s ease",width:k.width};function T(e){if(window.outerWidth<807){var t=y.current;t&&!t.contains(e.target)&&w({width:"0rem"})}}return Object(c.useEffect)((function(){return document.addEventListener("mousedown",T),function(){document.removeEventListener("mousedown",T)}}),[]),Object(u.jsxs)("div",{className:"NavBarElement",style:Object(d.a)({},A),children:[Object(u.jsx)("div",{className:"hamburger",children:Object(u.jsx)("i",{className:"fas fa-bars fa-lg",onClick:function(){"0rem"===k.width?w({width:window.innerWidth<=900?"50%":"40rem"}):w({width:"0rem"})}})}),Object(u.jsxs)("div",{className:"NavBar",ref:y,children:[Object(u.jsx)("header",{className:"header"}),Object(u.jsxs)("nav",{className:"nav",children:[Object(u.jsx)("div",{className:"buttonCont",children:Object(u.jsx)("button",{className:"addNew",onClick:t,children:"Add New"})}),Object(u.jsxs)("ul",{className:"nav-list",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(l.b,{to:"/",children:"Dashboard"})}),Object(u.jsxs)("li",{className:"nav-item income",children:[Object(u.jsx)("span",{onClick:function(){m(!b)},children:"Income:"}),b?Object(u.jsx)("i",{class:"fas fa-chevron-down",onClick:function(){m(!1)}}):Object(u.jsx)("i",{class:"fas fa-chevron-right",onClick:function(){m(!0)}}),Object(u.jsxs)("ul",{className:b?"options":"navOptions",children:[Object(u.jsx)("li",{className:"option",children:Object(u.jsx)(l.b,{to:"/sales",children:"Sales Dashboard"})}),Object(u.jsx)("li",{className:"option",children:Object(u.jsx)(l.b,{to:"/invoices",children:"Sales Invoices"})}),Object(u.jsx)("li",{className:"option",children:Object(u.jsx)(l.b,{to:"/receipts",children:"Sales Receipts"})}),Object(u.jsx)("li",{className:"option",children:Object(u.jsx)(l.b,{to:"/credit-notes",children:"Sales Returns"})}),Object(u.jsx)("li",{className:"option",children:Object(u.jsx)(l.b,{to:"/quotes",children:"Quotes"})})]})]}),Object(u.jsxs)("li",{className:"nav-item",children:[Object(u.jsx)("span",{onClick:function(){p(!x)},children:"Expenditure:"}),x?Object(u.jsx)("i",{class:"fas fa-chevron-down",onClick:function(){p(!1)}}):Object(u.jsx)("i",{class:"fas fa-chevron-right",onClick:function(){p(!0)}}),Object(u.jsxs)("ul",{className:x?"options":"navOptions",children:[Object(u.jsx)("li",{className:"option",children:Object(u.jsx)(l.b,{to:"/purchases",children:"Purchases Dashboard"})}),Object(u.jsx)("li",{className:"option",children:Object(u.jsx)(l.b,{to:"/purchase-invoices",children:"Purchase Invoices"})}),Object(u.jsx)("li",{className:"option",children:Object(u.jsx)(l.b,{to:"/purchase-receipts",children:"Purchase Receipts"})}),Object(u.jsx)("li",{className:"option",children:Object(u.jsx)(l.b,{to:"/purchase-orders",children:"Purchase Orders"})}),Object(u.jsx)("li",{className:"option",children:Object(u.jsx)(l.b,{to:"/purchase-returns",children:"Purchase Returns"})}),Object(u.jsx)("li",{className:"option",children:Object(u.jsx)(l.b,{to:"/expenses",children:"Other Expenses"})})]})]}),Object(u.jsxs)("li",{className:"nav-item",children:[Object(u.jsx)("span",{onClick:function(){g(!N)},children:"Third Party:"}),N?Object(u.jsx)("i",{class:"fas fa-chevron-down",onClick:function(){g(!1)}}):Object(u.jsx)("i",{class:"fas fa-chevron-right",onClick:function(){g(!0)}}),Object(u.jsxs)("ul",{className:N?"options":"navOptions",children:[Object(u.jsx)("li",{className:"option",children:Object(u.jsx)(l.b,{to:"/suppliers",children:"Suppliers"})}),Object(u.jsx)("li",{className:"option",children:Object(u.jsx)(l.b,{to:"/customers",children:"Customers"})})]})]}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(l.b,{to:"/inventories",children:"Inventory"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(l.b,{to:"/treasury",children:"Treasury"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(l.b,{to:"/capital-and-fixed-assets",children:"Fixed Assets & Capital"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(l.b,{to:"/reports",children:"Reports"})})]})]})]})]})},b=n(4),m=n.n(b),O=n(7),h=(n(45),n(5)),x=n.n(h),p=(Object({NODE_ENV:"production",PUBLIC_URL:"/Henson-Kudi/accounting-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT,x.a.create({baseURL:"http://localhost:5000"})),v=n(18);var f=function(e){var t=e.labels,n=e.data1,c=e.data2,a=e.data3,s=(e.data4,e.tooltip1),i=e.tooltip2,r=e.tooltip3;return e.tooltip4,Object(u.jsx)("div",{className:"Barchart",children:Object(u.jsx)(v.a,{width:200,height:"70%",data:{labels:t,datasets:[{label:s,data:n,backgroundColor:"#B336D6"},{label:i,data:c,backgroundColor:"#37D636"},{label:r,data:a,backgroundColor:"#598A07"}]},options:{maintainAspectRatio:!0}})})},N=n(6),g=(n(16),[{productName:"",description:"",qty:"",up:"",amount:function(e,t){return(Number(e)*Number(t)).toFixed(2)}},{productName:"",description:"",qty:"",up:"",amount:function(e,t){return(Number(e)*Number(t)).toFixed(2)}},{productName:"",description:"",qty:"",up:"",amount:function(e,t){return(Number(e)*Number(t)).toFixed(2)}},{productName:"",description:"",qty:"",up:"",amount:function(e,t){return(Number(e)*Number(t)).toFixed(2)}},{productName:"",description:"",qty:"",up:"",amount:function(e,t){return(Number(e)*Number(t)).toFixed(2)}},{productName:"",description:"",qty:"",up:"",amount:function(e,t){return(Number(e)*Number(t)).toFixed(2)}},{productName:"",description:"",qty:"",up:"",amount:function(e,t){return(Number(e)*Number(t)).toFixed(2)}},{productName:"",description:"",qty:"",up:"",amount:function(e,t){return(Number(e)*Number(t)).toFixed(2)}},{productName:"",description:"",qty:"",up:"",amount:function(e,t){return(Number(e)*Number(t)).toFixed(2)}},{productName:"",description:"",qty:"",up:"",amount:function(e,t){return(Number(e)*Number(t)).toFixed(2)}}]),y=[{expName:"",receiver:"",category:"",meansOfPayment:"",amount:""},{expName:"",receiver:"",category:"",meansOfPayment:"",amount:""},{expName:"",receiver:"",category:"",meansOfPayment:"",amount:""},{expName:"",receiver:"",category:"",meansOfPayment:"",amount:""},{expName:"",receiver:"",category:"",meansOfPayment:"",amount:""},{expName:"",receiver:"",category:"",meansOfPayment:"",amount:""},{expName:"",receiver:"",category:"",meansOfPayment:"",amount:""},{expName:"",receiver:"",category:"",meansOfPayment:"",amount:""},{expName:"",receiver:"",category:"",meansOfPayment:"",amount:""},{expName:"",receiver:"",category:"",meansOfPayment:"",amount:""}],S=[{assetName:"",cost:"",residualValue:"",depRate:""},{assetName:"",cost:"",residualValue:"",depRate:""},{assetName:"",cost:"",residualValue:"",depRate:""},{assetName:"",cost:"",residualValue:"",depRate:""},{assetName:"",cost:"",residualValue:"",depRate:""}];n(238);var C=function(e){var t=e.alert,n=e.message;return Object(u.jsx)("div",{className:t?"Alert displayAlert":"Alert",children:Object(u.jsx)("p",{className:"content",children:n})})};n(93);var D=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(""),j=Object(r.a)(o,2),b=j[0],m=j[1],O=Object(c.useState)({name:"",email:"",country:"",city:"",street:"",tel:"",mobile:"",fax:""}),h=Object(r.a)(O,2),x=h[0],v=h[1],f=function(e){var t=e.target,n=t.name,c=t.value;v((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},g=function(e){e.preventDefault(),""===x.name||""===x.email||""===x.tel?(m("Please add an amount to pay"),l(!0),setTimeout((function(){l(!1)}),3e3)):p.post("/customers",x).then((function(e){console.log(e.data),t(),n()}))};return Object(u.jsxs)("div",{className:"newCustomerForm",children:[Object(u.jsx)("div",{className:"close",onClick:t,children:Object(u.jsx)("i",{className:"fas fa-times fa-lg"})}),Object(u.jsx)("h3",{children:"Add New Customer"}),Object(u.jsxs)("form",{action:"",className:"form",children:[Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"name",children:"Customer Name*"}),Object(u.jsx)("input",{type:"text",name:"name",value:x.name,onChange:f,id:"name"})]}),Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"email",children:"Email Address*"}),Object(u.jsx)("input",{type:"email",name:"email",value:x.email,onChange:f,id:"email"})]}),Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"country",children:"Country"}),Object(u.jsx)("input",{type:"text",name:"country",value:x.country,onChange:f,id:"country"})]}),Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"city",children:"Town/City"}),Object(u.jsx)("input",{type:"text",name:"city",value:x.city,onChange:f,id:"city"})]}),Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"street",children:"Street Address"}),Object(u.jsx)("input",{type:"text",name:"street",value:x.street,onChange:f,id:"street"})]}),Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"tel",children:"Telephone*"}),Object(u.jsx)("input",{type:"number",name:"tel",value:x.tel,onChange:f,id:"tel"})]}),Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"mobile",children:"Mobile"}),Object(u.jsx)("input",{type:"number",name:"mobile",value:x.mobile,onChange:f,id:"mobile"})]}),Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"fax",children:"Fax"}),Object(u.jsx)("input",{type:"text",name:"fax",value:x.fax,onChange:f,id:"fax"})]}),Object(u.jsx)("div",{}),Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("button",{type:"button",onClick:t,className:"btn",children:"Cancel"}),Object(u.jsx)("button",{type:"button",onClick:function(e){g(e)},className:"btn",children:"Save"})]})]}),Object(u.jsx)(C,{alert:i,message:b})]})},k=n(101);n(239);var w=function(){return Object(u.jsx)("div",{className:"loaderContainer",children:Object(u.jsx)("div",{class:"loader"})})};var A=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(!1),j=Object(r.a)(o,2),b=j[0],h=j[1],v=Object(c.useState)(!1),f=Object(r.a)(v,2),y=f[0],S=f[1],A=Object(c.useState)(!1),T=Object(r.a)(A,2),P=T[0],I=T[1],F=Object(c.useState)(!0),B=Object(r.a)(F,2),E=B[0],R=B[1],L=Object(c.useState)([]),q=Object(r.a)(L,2),V=q[0],M=q[1],Y=Object(c.useState)([]),H=Object(r.a)(Y,2),_=H[0],Q=H[1],G=Object(c.useState)([]),U=Object(r.a)(G,2),W=U[0],J=U[1],z=Object(c.useState)(!1),K=Object(r.a)(z,2),X=K[0],Z=K[1],$=Object(c.useState)(""),ee=Object(r.a)($,2),te=ee[0],ne=ee[1],ce=Object(c.useState)({rebate:"",tradeDiscount:"",cashDiscount:"",valueAddedTax:""}),ae=Object(r.a)(ce,2),se=ae[0],ie=ae[1],re=Object(c.useState)(g),le=Object(r.a)(re,2),oe=le[0],de=le[1],ue=Object(c.useState)(""),je=Object(r.a)(ue,2),be=je[0],me=je[1],Oe=new Date,he=Oe.getDate(),xe=Oe.getMonth(),pe=Oe.getFullYear(),ve=new Date("".concat(xe+1,"/").concat(he,"/").concat(pe)).toDateString(),fe=Object(c.useState)("15"),Ne=Object(r.a)(fe,2),ge=Ne[0],ye=Ne[1];Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var t,n,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=x.a.CancelToken.source(),c=p.get("/products"),a=p.get("/customers"),e.next=6,x.a.all([c,a],{cancelToken:n.token}).then((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1];Q(n.data),M(c.data.customers),J(c.data.invoices),R(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 6:return e.abrupt("return",(function(){t=!0,n.cancel("Cancelling request")}));case 7:case"end":return e.stop()}}),e)}))),[]);var Se=Object(c.useState)({name:"",email:"",billingAddress:{country:"",city:"",street:""},contact:{telephone:"",mobile:"",fax:""}}),Ce=Object(r.a)(Se,2),De=Ce[0],ke=Ce[1],we=Object(c.useState)(7.5),Ae=Object(r.a)(we,2),Te=Ae[0],Pe=Ae[1],Ie=Te>36?"100%":"".concat(Te,"rem"),Fe=function(e,t){return function(n){var c=oe.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));de(c)}},Be=Object(c.useState)([{name:"",amount:""},{name:"",amount:""},{name:"",amount:""},{name:"",amount:""}]),Ee=Object(r.a)(Be,2),Re=Ee[0],Le=Ee[1],qe=function(e,t){return function(n){var c=Re.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));Le(c)}},Ve=Object(c.useRef)(null),Me=function(e){var t=e.target,n=t.name,c=t.value;ie((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},Ye=Object(c.useState)({date:ve,invoiceNumber:"00".concat((null===W||void 0===W?void 0:W.length)+1),customerName:"",dueDate:function(e){var t=new Date("".concat(xe+1,"/").concat(he,"/").concat(pe));return new Date(t.setDate(t.getDate()+Number(e))).toDateString()}}),He=Object(r.a)(Ye,2),_e=He[0],Qe=He[1],Ge=oe.map((function(e){return e.amount(e.qty,e.up)})).reduce((function(e,t){return Number(e)+Number(t)}),0),Ue=(Ge*(Number(se.rebate)/100)).toFixed(2),We=Ge-Ue,Je=(We*(Number(se.tradeDiscount)/100)).toFixed(2),ze=We-Je,Ke=(ze*(Number(se.cashDiscount)/100)).toFixed(2),Xe=ze-Ke,Ze=(Xe*(Number(se.valueAddedTax)/100)).toFixed(2),$e=Re.map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}));function et(e){var t=Ve.current;t&&!t.contains(e.target)&&l(!1)}Object(c.useEffect)((function(){V.filter((function(e){return e.name===be})).map((function(e){return ke(Object(d.a)({},e))}))}),[be]),Object(c.useEffect)((function(){return document.addEventListener("mousedown",et),function(){document.removeEventListener("mousedown",et)}}),[]);var tt=oe.filter((function(e){return""!==e.productName&&""!==e.qty&&""!==e.up})).map((function(e){return{productName:e.productName,description:e.description,qty:e.qty,up:e.up,amount:e.qty*e.up}})),nt=Re.filter((function(e){return""!==e.name&&""!==e.amount})),ct={invoiceInput:{date:_e.date,invoiceNumber:_e.invoiceNumber,customerName:_e.customerName,dueDate:_e.dueDate(ge)},selectInvoiceTerm:ge,customerDetails:De,data:tt,additionsAndSubtractions:se,discountsAndVat:{rebateValue:Ue,tradeDiscountValue:Je,cashDiscountValue:Ke,valueAddedTax:Ze},otherAdditions:nt,grossAmount:Ge,netPayable:Xe+Number(Ze)+$e,totalPaid:0,balanceDue:Xe+Number(Ze)+$e,dueDate:_e.dueDate(ge)},at=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""!==De.name&&tt.length>0?(setTimeout((function(){R(!0)}),500),p.post("/invoices",ct).then((function(){return p.get("/invoices/".concat(_e.invoiceNumber),{responseType:"blob"})})).then((function(e){var c=new Blob([e.data],{type:"application/pdf"});Object(k.saveAs)(c,"invoiceNumber".concat(_e.invoiceNumber)),p.post("/sendInvoice/".concat(_e.invoiceNumber),{customerDetails:De}).then((function(){t(),n(),R(!1)}))}))):(ne("Please select a customer and add at least one product"),Z(!0),setTimeout((function(){Z(!1)}),3e3));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"Quotation",children:[Object(u.jsx)("div",{className:"close",children:Object(u.jsx)("i",{className:"fas fa-times fa-lg",onClick:t})}),Object(u.jsx)("h3",{children:"New Invoice"}),Object(u.jsxs)("div",{className:"formContainer",children:[Object(u.jsxs)("form",{action:"",method:"post",children:[Object(u.jsxs)("div",{className:"quotationTop",children:[Object(u.jsxs)("div",{className:"date",children:[Object(u.jsx)("label",{htmlFor:"date",children:"Date:"}),Object(u.jsx)("input",{type:"text",name:"date",value:_e.date,id:"date",contentEditable:!1,readOnly:!0})]}),Object(u.jsxs)("div",{className:"select",children:[Object(u.jsx)("label",{htmlFor:"invoiceDuration",children:"Terms"}),Object(u.jsxs)("select",{name:"invoiceDuration",id:"invoiceDuration",onChange:function(e){ye(Number(e.target.value))},value:ge,children:[Object(u.jsx)("option",{value:"",hidden:!0,children:"Select(default: 15)"}),Object(u.jsx)("option",{value:15,children:"15 days"}),Object(u.jsx)("option",{value:30,children:"30 days"}),Object(u.jsx)("option",{value:45,children:"45 days"}),Object(u.jsx)("option",{value:60,children:"60 days"}),Object(u.jsx)("option",{value:75,children:"75 days"}),Object(u.jsx)("option",{value:90,children:"90 days"})]})]}),Object(u.jsxs)("div",{className:"dueDate",children:[Object(u.jsx)("label",{htmlFor:"dueDate",children:"Due Date:"}),Object(u.jsx)("input",{type:"text",id:"dueDate",name:"dueDate",value:_e.dueDate(ge),readOnly:!0})]}),Object(u.jsxs)("div",{className:"invoiceNumber",children:[Object(u.jsx)("label",{htmlFor:"InvoiceNumber",children:"Invoice Number:"}),Object(u.jsx)("input",{type:"text",name:"invoiceNumber",id:"invoiceNumber",value:_e.invoiceNumber,readOnly:!0})]})]}),Object(u.jsxs)("div",{className:"customerDetails",children:[Object(u.jsxs)("div",{ref:Ve,className:"customerName",children:[Object(u.jsx)("label",{htmlFor:"customerName",children:"Receiver: "}),Object(u.jsx)("input",{type:"text",value:be,onChange:function(e){me(e.target.value)},onClick:function(){l(!i)},name:"customerName",className:"autoListItemInput",id:"customerName",placeholder:"Select Customer"}),i&&Object(u.jsxs)("div",{className:"autoCompleteContainer",children:[Object(u.jsx)("button",{type:"button",onClick:function(){I(!0)},children:"Add New Customer"}),V.filter((function(e){var t;return!be||(!!(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===be||void 0===be?void 0:be.toLowerCase()))||void 0)})).map((function(e,t){return Object(u.jsx)("div",{className:"autoListItem",onClick:function(){me(e.name),l(!1)},tabIndex:"0",children:Object(u.jsx)("p",{children:e.name})},t)}))]})]}),Object(u.jsx)("div",{className:"customerEmail",children:Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Email: "}),null===De||void 0===De?void 0:De.email]})}),Object(u.jsxs)("div",{className:"deliveryAdress",children:[Object(u.jsx)("h4",{children:"Delivery Address & Contact"}),Object(u.jsxs)("div",{className:"addressInfo",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Country: "}),null===De||void 0===De?void 0:De.country]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"City: "}),null===De||void 0===De?void 0:De.city]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Street: "}),null===De||void 0===De?void 0:De.street]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Tel: "}),null===De||void 0===De?void 0:De.telephone]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Mobile: "}),null===De||void 0===De?void 0:De.mobile]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Fax: "}),null===De||void 0===De?void 0:De.fax]})]})]})]}),Object(u.jsxs)("div",{className:"additionalInfo",children:[Object(u.jsx)("div",{className:"textArea",children:Object(u.jsx)("textarea",{name:"additionalInfo",id:"additionalInfo",cols:"60",rows:"6",value:_e.additonalInfo,onChange:function(e){var t=e.target,n=t.name,c=t.value;Qe((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},placeholder:"Add additional information to receiver",className:"textArea"})}),Object(u.jsx)("div",{className:"amount",children:Object(u.jsxs)("h3",{children:["Net Payable: ",(Xe+Number(Ze)+$e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})})]}),Object(u.jsxs)("div",{className:"itemsContaainer",children:[Object(u.jsx)("ul",{children:Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsx)("span",{className:"listTitle",children:"Product Name"}),Object(u.jsx)("span",{className:"listTitle",children:"Description"}),Object(u.jsx)("span",{className:"listTitle",children:"Quantity"}),Object(u.jsx)("span",{className:"listTitle",children:"Unit Price"}),Object(u.jsx)("span",{className:"listTitle",children:"Amount"})]})}),Object(u.jsx)("ul",{style:{height:"".concat(Ie),overflow:"hidden"},className:"items",children:oe.map((function(e,t){return Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsxs)("select",{name:"productName",value:e.productName,onChange:Fe("productName",t),children:[Object(u.jsx)("option",{value:""}),_.map((function(e){return Object(u.jsx)("option",{value:e.productName,children:e.productName})}))]}),Object(u.jsx)("input",{type:"text",name:"description",value:e.description,onChange:Fe("description",t)}),Object(u.jsx)("input",{type:"number",name:"qty",value:e.qty,onChange:Fe("qty",t)}),Object(u.jsx)("input",{type:"number",name:"up",value:e.up,onChange:Fe("up",t)}),Object(u.jsx)("input",{type:"number",name:"amount",value:e.amount(e.qty,e.up),readOnly:!0})]},t)}))})]}),Object(u.jsxs)("div",{className:"summation",children:[Object(u.jsx)("button",{onClick:function(){Pe((function(e){return e+7.3})),"100%"===Ie&&X("Cannot add more rows.")},type:"button",className:"addRows btn",children:"Add Rows"}),Object(u.jsxs)("h3",{className:"amount",children:["Gross Amount: ",Ge.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})]}),Object(u.jsxs)("div",{className:"deductionsAndAdditions",children:[Object(u.jsxs)("div",{className:"hideAndShow",children:[Object(u.jsx)("h5",{children:"Deductions"}),Object(u.jsx)("button",{onClick:function(){S(!y)},type:"button",children:y?"Hide":"Show"})]}),Object(u.jsxs)("div",{className:"deductions",children:[y&&Object(u.jsxs)("ul",{className:"deductions",children:[Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{className:"elements",children:"Elements"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Rate"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Amount"})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Rebate"}),Object(u.jsx)("input",{type:"number",name:"rebate",id:"rebate",onChange:function(e){Me(e)},value:se.rebate}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Ue.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Commercial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:We.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Trade Discount"}),Object(u.jsx)("input",{type:"number",name:"tradeDiscount",id:"tradeDiscount",onChange:function(e){Me(e)},value:se.tradeDiscount}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Je.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Commercial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:ze.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Cash Discount"}),Object(u.jsx)("input",{type:"number",name:"cashDiscount",id:"cashDiscount",onChange:function(e){Me(e)},value:se.cashDiscount}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Ke.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Financial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:Xe.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]})]}),Object(u.jsx)("ul",{className:"deductions",children:Object(u.jsxs)("li",{className:"deductItem additionItem",children:[Object(u.jsx)("span",{children:"Tax (VAT) Rate"}),Object(u.jsx)("input",{type:"number",name:"valueAddedTax",id:"valueAddedTax",onChange:function(e){Me(e)},value:se.valueAddedTax}),Object(u.jsx)("span",{children:Ze.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})})]}),Object(u.jsxs)("div",{className:"additions",children:[Object(u.jsxs)("div",{className:"hideAndShow",children:[Object(u.jsx)("h5",{children:"Additions"}),Object(u.jsx)("button",{onClick:function(){h(!b)},type:"button",children:b?"Hide":"Show"})]}),b&&Object(u.jsxs)("ul",{className:"otherAdditions",children:[Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("li",{className:"additionItem",children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Element"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Amount"})})]})}),Object(u.jsx)("div",{className:"otherAdditions"}),Object(u.jsx)("div",{className:"otherAdditions",children:Re.map((function(e,t){return Object(u.jsxs)("li",{className:"additionItem",children:[Object(u.jsx)("input",{type:"text",value:e.name,onChange:qe("name",t),name:"name"}),Object(u.jsx)("input",{type:"number",value:e.amount,onChange:qe("amount",t),name:"amount"})]},t)}))}),Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("div",{className:"additionItem",children:[Object(u.jsx)("h5",{children:"Total Additions"}),Object(u.jsx)("h5",{children:$e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})})]})]}),Object(u.jsxs)("div",{className:"netPay",children:[Object(u.jsx)("h3",{children:"Net Payable"}),Object(u.jsx)("h3",{children:(Xe+Number(Ze)+$e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]}),Object(u.jsxs)("div",{className:"saveOptions",children:[Object(u.jsx)("button",{onClick:t,type:"button",className:"addRows btn",children:"Cancel"}),Object(u.jsx)("button",{onClick:at,type:"button",className:"addRows btn",children:"Save"}),Object(u.jsx)("button",{onClick:at,type:"button",className:"addRows btn",children:"Save and Send"})]})]}),P&&Object(u.jsx)(D,{onClick:function(){I(!1)}})]}),E&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:X,message:te})]})};var T=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(""),j=Object(r.a)(o,2),b=j[0],h=j[1],v=Object(c.useState)(!1),f=Object(r.a)(v,2),y=f[0],S=f[1],k=Object(c.useState)(!1),A=Object(r.a)(k,2),T=A[0],P=A[1],I=Object(c.useState)(!1),F=Object(r.a)(I,2),B=F[0],E=F[1],R=Object(c.useState)(!1),L=Object(r.a)(R,2),q=L[0],V=L[1],M=Object(c.useState)(!0),Y=Object(r.a)(M,2),H=Y[0],_=Y[1],Q=Object(c.useState)([]),G=Object(r.a)(Q,2),U=G[0],W=G[1],J=Object(c.useState)([]),z=Object(r.a)(J,2),K=z[0],X=z[1],Z=Object(c.useState)([]),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ne=Object(c.useState)({rebate:"",tradeDiscount:"",cashDiscount:"",valueAddedTax:""}),ce=Object(r.a)(ne,2),ae=ce[0],se=ce[1],ie=Object(c.useState)(g),re=Object(r.a)(ie,2),le=re[0],oe=re[1],de=Object(c.useState)(""),ue=Object(r.a)(de,2),je=ue[0],be=ue[1],me=new Date,Oe=me.getDate(),he=me.getMonth(),xe=me.getFullYear(),pe=new Date("".concat(he+1,"/").concat(Oe,"/").concat(xe)).toDateString(),ve=Object(c.useState)({name:"",email:"",billingAddress:{country:"",city:"",street:""},contact:{telephone:"",mobile:"",fax:""}}),fe=Object(r.a)(ve,2),Ne=fe[0],ge=fe[1],ye=Object(c.useState)(7.5),Se=Object(r.a)(ye,2),Ce=Se[0],De=Se[1],ke=Ce>36?"100%":"".concat(Ce,"rem");Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var t,n,c,a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=x.a.CancelToken.source(),c=p.get("/products"),a=p.get("/customers"),s=p.get("/receipts"),e.next=7,x.a.all([c,a,s],{cancelToken:n.token}).then((function(e){var t=Object(r.a)(e,3),n=t[0],c=t[1],a=t[2];X(n.data),W(c.data.customers),te(a.data),_(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 7:return e.abrupt("return",(function(){t=!0,n.cancel("Cancelling request")}));case 8:case"end":return e.stop()}}),e)}))),[]);var we=function(e,t){return function(n){var c=le.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));oe(c)}},Ae=Object(c.useState)([{name:"",amount:""},{name:"",amount:""},{name:"",amount:""},{name:"",amount:""}]),Te=Object(r.a)(Ae,2),Pe=Te[0],Ie=Te[1],Fe=function(e,t){return function(n){var c=Pe.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));Ie(c)}},Be=Object(c.useRef)(null),Ee=function(e){var t=e.target,n=t.name,c=t.value;se((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},Re=Object(c.useState)({date:pe,receiptNumber:"00".concat(ee.length+1),customerName:"",meansOfPayment:"cash"}),Le=Object(r.a)(Re,2),qe=Le[0],Ve=Le[1],Me=le.map((function(e){return e.amount(e.qty,e.up)})).reduce((function(e,t){return Number(e)+Number(t)}),0),Ye=(Me*(Number(ae.rebate)/100)).toFixed(2),He=Me-Ye,_e=(He*(Number(ae.tradeDiscount)/100)).toFixed(2),Qe=He-_e,Ge=(Qe*(Number(ae.cashDiscount)/100)).toFixed(2),Ue=Qe-Ge,We=(Ue*(Number(ae.valueAddedTax)/100)).toFixed(2),Je=Pe.map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}));function ze(e){var t=Be.current;t&&!t.contains(e.target)&&S(!1)}Object(c.useEffect)((function(){U.filter((function(e){return e.name===je})).map((function(e){return ge(Object(d.a)({},e))}))}),[je]),Object(c.useEffect)((function(){return document.addEventListener("mousedown",ze),function(){document.removeEventListener("mousedown",ze)}}),[]);var Ke=function(e){var t=e.target,n=t.name,c=t.value;Ve((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},Xe=le.filter((function(e){return""!==e.productName&&""!==e.qty&&""!==e.up})).map((function(e){return{productName:e.productName,description:e.description,qty:e.qty,up:e.up,amount:e.qty*e.up}})),Ze=Pe.filter((function(e){return""!==e.name&&""!==e.amount})),$e={source:"cash sales",receiptInput:qe,customerDetails:Ne,data:Xe,additionsAndSubtractions:ae,discountsAndVat:{rebateValue:Ye,tradeDiscountValue:_e,cashDiscountValue:Ge,valueAddedTax:We},otherAdditions:Ze,meansOfPayment:qe.meansOfPayment,grossAmount:Me,netPayable:Ue+Number(We)+Je},et=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""!==Ne.name&&Xe.length>0?(setTimeout((function(){_(!0)}),500),p.post("/receipts",$e).then((function(){t(),n(),_(!1)}))):(h("Please select a customer and add at least one product"),l(!0),setTimeout((function(){l(!1)}),3e3));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"Quotation",children:[Object(u.jsx)("div",{className:"close",onClick:t,children:Object(u.jsx)("i",{className:"fas fa-times fa-lg"})}),Object(u.jsx)("h3",{children:"New Receipt"}),Object(u.jsx)("div",{className:"formContainer",children:Object(u.jsxs)("form",{action:"",method:"post",children:[Object(u.jsxs)("div",{className:"quotationTop",children:[Object(u.jsxs)("div",{className:"date",children:[Object(u.jsx)("label",{htmlFor:"date",children:"Date:"}),Object(u.jsx)("input",{type:"text",name:"date",value:qe.date,id:"date",contentEditable:!1,readOnly:!0})]}),Object(u.jsxs)("div",{className:"meansOfPayment",children:[Object(u.jsx)("label",{htmlFor:"meansOfPayment",children:"Means of Payment"}),Object(u.jsxs)("select",{name:"meansOfPayment",id:"meansOfPayment",value:qe.meansOfPayment,onChange:Ke,style:{borderRadius:"5px",marginLeft:"0.3rem"},children:[Object(u.jsx)("option",{value:"cash",children:"Default (Cash)"}),Object(u.jsx)("option",{value:"bank",children:"Bank"}),Object(u.jsx)("option",{value:"mobileMoney",children:"Mobile Money"})]})]}),Object(u.jsxs)("div",{className:"receiptNumber",children:[Object(u.jsx)("label",{htmlFor:"receiptNumber",children:"Receipt Number:"}),Object(u.jsx)("input",{type:"text",name:"receiptNumber",id:"receiptNumber",value:qe.receiptNumber,readOnly:!0})]})]}),Object(u.jsxs)("div",{className:"customerDetails",children:[Object(u.jsxs)("div",{ref:Be,className:"customerName",children:[Object(u.jsx)("label",{htmlFor:"customerName",children:"Receiver: "}),Object(u.jsx)("input",{type:"text",value:je,onChange:function(e){be(e.target.value)},onClick:function(){S(!y)},name:"customerName",className:"autoListItemInput",id:"customerName",placeholder:"Select Customer"}),y&&Object(u.jsxs)("div",{className:"autoCompleteContainer",children:[Object(u.jsx)("button",{type:"button",onClick:function(){V(!0)},children:"Add New Customer"}),U.filter((function(e){var t;return!je||(!!(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===je||void 0===je?void 0:je.toLowerCase()))||void 0)})).map((function(e,t){return Object(u.jsx)("div",{className:"autoListItem",onClick:function(){be(e.name),S(!1)},tabIndex:"0",children:Object(u.jsx)("p",{children:e.name})},t)}))]})]}),Object(u.jsx)("div",{className:"customerEmail",children:Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Email: "}),null===Ne||void 0===Ne?void 0:Ne.email]})}),Object(u.jsxs)("div",{className:"deliveryAdress",children:[Object(u.jsx)("h4",{children:"Delivery Address & Contact"}),Object(u.jsxs)("div",{className:"addressInfo",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Country: "}),null===Ne||void 0===Ne?void 0:Ne.country]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"City: "}),null===Ne||void 0===Ne?void 0:Ne.city]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Street: "}),null===Ne||void 0===Ne?void 0:Ne.street]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Tel: "}),null===Ne||void 0===Ne?void 0:Ne.telephone]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Mobile: "}),null===Ne||void 0===Ne?void 0:Ne.mobile]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Fax: "}),null===Ne||void 0===Ne?void 0:Ne.fax]})]})]})]}),Object(u.jsxs)("div",{className:"additionalInfo",children:[Object(u.jsx)("div",{className:"textArea",children:Object(u.jsx)("textarea",{name:"additionalInfo",id:"additionalInfo",cols:"60",rows:"6",value:qe.additonalInfo,onChange:Ke,placeholder:"Add additional information to receiver",className:"textArea"})}),Object(u.jsx)("div",{className:"amount",children:Object(u.jsxs)("h3",{children:["Net Payable: ",(Ue+Number(We)+Je).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})})]}),Object(u.jsxs)("div",{className:"itemsContainer",children:[Object(u.jsx)("ul",{children:Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsx)("span",{className:"listTitle",children:"Product Name"}),Object(u.jsx)("span",{className:"listTitle",children:"Description"}),Object(u.jsx)("span",{className:"listTitle",children:"Quantity"}),Object(u.jsx)("span",{className:"listTitle",children:"Unit Price"}),Object(u.jsx)("span",{className:"listTitle",children:"Amount"})]})}),Object(u.jsx)("ul",{style:{height:"".concat(ke),overflow:"hidden"},className:"items",children:le.map((function(e,t){return Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsxs)("select",{name:"productName",id:"productName",value:e.productName,onChange:we("productName",t),children:[Object(u.jsx)("option",{children:" "}),K.map((function(e){return Object(u.jsx)("option",{value:e.productName,children:e.productName})}))]}),Object(u.jsx)("input",{type:"text",name:"description",value:e.description,onChange:we("description",t)}),Object(u.jsx)("input",{type:"number",name:"qty",value:e.qty,onChange:we("qty",t)}),Object(u.jsx)("input",{type:"number",name:"up",value:e.up,onChange:we("up",t)}),Object(u.jsx)("input",{type:"number",name:"amount",value:e.amount(e.qty,e.up),readOnly:!0})]},t)}))})]}),Object(u.jsxs)("div",{className:"summation",children:[Object(u.jsx)("button",{onClick:function(){De((function(e){return e+7.3})),"100%"===ke&&(h("Cannot Add more rows"),l(!0),setTimeout((function(){l(!1)}),3e3))},type:"button",className:"addRows btn",children:"Add Rows"}),Object(u.jsxs)("h3",{className:"amount",children:["Gross Amount: ",Me.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})]}),Object(u.jsxs)("div",{className:"deductionsAndAdditions",children:[Object(u.jsxs)("div",{className:"hideAndShow",children:[Object(u.jsx)("h5",{children:"Deductions"}),Object(u.jsx)("button",{onClick:function(){E(!B)},type:"button",children:B?"Hide":"Show"})]}),Object(u.jsx)("div",{className:"deductions",children:B&&Object(u.jsxs)("ul",{className:"deductions",children:[Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{className:"elements",children:"Elements"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Rate"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Amount"})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Rebate"}),Object(u.jsx)("input",{type:"number",name:"rebate",id:"rebate",onChange:function(e){Ee(e)},value:ae.rebate}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Ye.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Commercial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:He.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Trade Discount"}),Object(u.jsx)("input",{type:"number",name:"tradeDiscount",id:"tradeDiscount",onChange:function(e){Ee(e)},value:ae.tradeDiscount}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:_e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Commercial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:Qe.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Cash Discount"}),Object(u.jsx)("input",{type:"number",name:"cashDiscount",id:"cashDiscount",onChange:function(e){Ee(e)},value:ae.cashDiscount}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Ge.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Financial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:Ue.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]})]})}),Object(u.jsx)("ul",{className:"deductions",children:Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("li",{className:"deductItem additionItem",children:[Object(u.jsx)("span",{children:"Tax (VAT) Rate"}),Object(u.jsx)("input",{type:"number",name:"valueAddedTax",id:"valueAddedTax",onChange:function(e){Ee(e)},value:ae.valueAddedTax}),Object(u.jsx)("span",{children:We.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})})}),Object(u.jsxs)("div",{className:"additions",children:[Object(u.jsxs)("div",{className:"hideAndShow",children:[Object(u.jsx)("h5",{children:"Additions"}),Object(u.jsx)("button",{onClick:function(){P(!T)},type:"button",children:T?"Hide":"Show"})]}),T&&Object(u.jsxs)("ul",{className:"otherAdditions",children:[Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("li",{className:"additionItem",children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Element"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Amount"})})]})}),Object(u.jsx)("div",{className:"otherAdditions",children:Pe.map((function(e,t){return Object(u.jsxs)("li",{className:"additionItem",children:[Object(u.jsx)("input",{type:"text",value:e.name,onChange:Fe("name",t),name:"name"}),Object(u.jsx)("input",{type:"number",value:e.amount,onChange:Fe("amount",t),name:"amount"})]},t)}))}),Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("div",{className:"additionItem",children:[Object(u.jsx)("h5",{children:"Total Additions"}),Object(u.jsx)("h5",{children:Je.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})})]})]}),Object(u.jsxs)("div",{className:"netPay",children:[Object(u.jsx)("h3",{children:"Net Payable"}),Object(u.jsx)("h3",{children:(Ue+Number(We)+Je).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]}),Object(u.jsxs)("div",{className:"saveOptions",children:[Object(u.jsx)("button",{onClick:t,type:"button",className:"addRows btn",children:"Cancel"}),Object(u.jsx)("button",{onClick:function(){et(),console.log("Save Button Clicked")},type:"button",className:"addRows btn",children:"Save"}),Object(u.jsx)("button",{onClick:function(){et(),console.log("Save and send Button Clicked")},type:"button",className:"addRows btn",children:"Save and Send"})]})]})}),q&&Object(u.jsx)(D,{onClick:function(){V(!1)}}),H&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:i,message:b})]})};var P=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(""),j=Object(r.a)(o,2),b=j[0],h=j[1],v=Object(c.useState)(!1),f=Object(r.a)(v,2),g=f[0],y=f[1],S=Object(c.useState)(!1),k=Object(r.a)(S,2),A=k[0],T=k[1],P=Object(c.useState)(!0),I=Object(r.a)(P,2),F=I[0],B=I[1],E=Object(c.useState)(""),R=Object(r.a)(E,2),L=R[0],q=R[1],V=Object(c.useState)([]),M=Object(r.a)(V,2),Y=M[0],H=M[1],_=Object(c.useState)([]),Q=Object(r.a)(_,2),G=Q[0],U=Q[1],W=new Date,J=W.getDate(),z=W.getMonth(),K=W.getFullYear(),X=new Date("".concat(z,"/").concat(J,"/").concat(K)).toDateString(),Z=Object(c.useState)({name:"",email:"",billingAddress:{country:"",city:"",street:""},contact:{telephone:"",mobile:"",fax:""}}),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ne=Object(c.useRef)(null),ce=Object(c.useState)({date:X}),ae=Object(r.a)(ce,2),se=ae[0],ie=ae[1],re=Object(c.useState)([]),le=Object(r.a)(re,2),oe=le[0],de=le[1];function ue(e){var t=ne.current;t&&!t.contains(e.target)&&y(!1)}Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var t,n,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=x.a.CancelToken.source(),c=p.get("/customers"),a=p.get("/invoices"),e.next=6,x.a.all([c,a],{cancelToken:n.token}).then((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1];H(n.data.customers),U(c.data),B(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 6:return e.abrupt("return",(function(){t=!0,n.cancel("Cancelling request")}));case 7:case"end":return e.stop()}}),e)}))),[]),Object(c.useEffect)((function(){Y.filter((function(e){return e.name===L})).map((function(e){return te(Object(d.a)({},e))}))}),[L]),Object(c.useEffect)((function(){return document.addEventListener("mousedown",ue),function(){document.removeEventListener("mousedown",ue)}}),[]),Object(c.useEffect)((function(){var e,t=null===(e=G.invoices)||void 0===e?void 0:e.filter((function(e){return e.customerDetails.name===L})).map((function(e){return Object(d.a)(Object(d.a)({},e),{},{date:X,amountToPay:"",meansOfPayment:"cash"})}));""!==L&&de(t)}),[L]);var je=function(e,t){return function(n){var c=oe.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));de(c)}},be=oe.map((function(e){return e.amountToPay})).reduce((function(e,t){return Number(e)+Number(t)}),0),me={source:"receive payment",template:oe,totalToPay:be},Oe=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===be?(h("Please add at least one item to pay"),l(!0),setTimeout((function(){l(!1)}),3e3)):(setTimeout((function(){B(!0)}),500),p.post("/receivePayment",me).then((function(){t(),n(),B(!1)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"Quotation",children:[Object(u.jsx)("div",{className:"close",onClick:t,children:Object(u.jsx)("i",{className:"fas fa-times fa-lg"})}),Object(u.jsx)("h3",{children:"Receive Payment"}),Object(u.jsx)("div",{className:"formContainer",children:Object(u.jsxs)("form",{action:"",method:"post",children:[Object(u.jsxs)("div",{className:"quotationTop",style:{width:"70%",margin:"0 auto"},children:[Object(u.jsxs)("div",{className:"date",children:[Object(u.jsx)("label",{htmlFor:"date",children:"Date:"}),Object(u.jsx)("input",{type:"text",name:"date",value:se.date,id:"date",contentEditable:!1,readOnly:!0})]}),Object(u.jsxs)("div",{className:"meansOfPayment",children:[Object(u.jsx)("label",{htmlFor:"meansOfPayment",children:"Means of Payment"}),Object(u.jsxs)("select",{name:"meansOfPayment",id:"meansOfPayment",value:se.meansOfPayment,onChange:function(e){var t=e.target,n=t.name,c=t.value;ie((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},style:{borderRadius:"5px",marginLeft:"0.3rem"},children:[Object(u.jsx)("option",{value:"Cash",children:"Default (Cash)"}),Object(u.jsx)("option",{value:"bank",children:"Bank"}),Object(u.jsx)("option",{value:"mobileMoney",children:"Mobile Money"})]})]})]}),Object(u.jsxs)("div",{className:"customerDetails",style:{width:"70%",margin:"0 auto"},children:[Object(u.jsxs)("div",{ref:ne,className:"customerName",children:[Object(u.jsx)("label",{htmlFor:"customerName",children:"Receiver: "}),Object(u.jsx)("input",{type:"text",value:L,onChange:function(e){q(e.target.value)},onClick:function(){y(!g)},name:"customerName",className:"autoListItemInput",id:"customerName",placeholder:"Select Customer"}),g&&Object(u.jsxs)("div",{className:"autoCompleteContainer",children:[Object(u.jsx)("button",{type:"button",onClick:function(){T(!0)},className:"selectCustomer",children:"Add New Customer"}),Y.filter((function(e){var t;return!L||(!!(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===L||void 0===L?void 0:L.toLowerCase()))||void 0)})).map((function(e,t){return Object(u.jsx)("div",{className:"autoListItem",onClick:function(){q(e.name),y(!1)},tabIndex:"0",children:Object(u.jsx)("p",{className:"selectCustomer",children:e.name})},t)}))]})]}),Object(u.jsx)("div",{className:"customerEmail",children:Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Email: "}),null===ee||void 0===ee?void 0:ee.email]})})]}),Object(u.jsx)("div",{className:"amount",children:Object(u.jsxs)("h3",{className:"totalToPay",children:["Total: ",be.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),"  "]})}),Object(u.jsx)("div",{className:"allDebtorsContainer",children:Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:""===L?null:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Invoice Number"}),Object(u.jsx)("th",{children:"Net Amount"}),Object(u.jsx)("th",{children:"Total Paid"}),Object(u.jsx)("th",{children:"Balance Owing"}),Object(u.jsx)("th",{children:"Amount To Pay"}),Object(u.jsx)("th",{children:"Means Of Payment"})]})}),Object(u.jsx)("tbody",{children:null===oe||void 0===oe?void 0:oe.filter((function(e){return e.netPayable-e.totalPaid>0})).map((function(e,t){e.amountToPay;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.invoiceInput.invoiceNumber}),Object(u.jsx)("td",{children:Number(e.netPayable).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:Number(e.totalPaid||0).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:Number(e.balanceDue||0).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{type:"number",name:"amountToPay",id:"amountToPay",value:e.amountToPay,onChange:je("amountToPay",t)})}),Object(u.jsx)("td",{children:Object(u.jsxs)("select",{name:"meansOfPayment",value:e.meansOfPayment,onChange:je("meansOfPayment",t),style:{borderRadius:"5px",marginLeft:"0.3rem"},children:[Object(u.jsx)("option",{value:"Cash",children:"Default (Cash)"}),Object(u.jsx)("option",{value:"bank",children:"Bank"}),Object(u.jsx)("option",{value:"mobileMoney",children:"Mobile Money"})]})})]},e._id)}))})]})}),Object(u.jsx)("div",{className:"totalToPay",children:Object(u.jsxs)("h3",{className:"totalToPay",children:["Total: ",be.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")," "]})}),Object(u.jsxs)("div",{className:"saveOptions",children:[Object(u.jsx)("button",{onClick:t,type:"button",className:"addRows btn",children:"Cancel"}),Object(u.jsx)("button",{onClick:function(){Oe(),console.log("Save Button Clicked")},type:"button",className:"addRows btn",children:"Save"}),Object(u.jsx)("button",{onClick:function(){Oe(),console.log("Save and send Button Clicked")},type:"button",className:"addRows btn",children:"Save and Send"})]})]})}),A&&Object(u.jsx)(D,{onClick:function(){T(!1)}}),F&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:i,message:b})]})};var I=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(!0),j=Object(r.a)(o,2),b=j[0],h=j[1],v=Object(c.useState)(!1),f=Object(r.a)(v,2),y=f[0],S=f[1],k=Object(c.useState)(!1),A=Object(r.a)(k,2),T=A[0],P=A[1],I=Object(c.useState)(""),F=Object(r.a)(I,2),B=F[0],E=F[1],R=Object(c.useState)(g),L=Object(r.a)(R,2),q=L[0],V=L[1],M=Object(c.useState)([]),Y=Object(r.a)(M,2),H=Y[0],_=Y[1],Q=Object(c.useState)([]),G=Object(r.a)(Q,2),U=G[0],W=G[1],J=Object(c.useState)([]),z=Object(r.a)(J,2),K=z[0],X=z[1],Z=Object(c.useState)(""),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ne=new Date,ce=ne.getDate(),ae=ne.getMonth(),se=ne.getFullYear(),ie=Object(c.useState)({name:"",email:"",billingAddress:{country:"",city:"",street:""},contact:{telephone:"",mobile:"",fax:""}}),re=Object(r.a)(ie,2),le=re[0],oe=re[1],de=Object(c.useState)(7.5),ue=Object(r.a)(de,2),je=ue[0],be=ue[1],me=je>36?"100%":"".concat(je,"rem"),Oe=function(){var e=Object(O.a)(m.a.mark((function e(t,n){var c,a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=p.get("/products"),a=p.get("/customers"),s=p.get("/quotations"),e.next=5,x.a.all([c,a,s],{cancelToken:t.token}).then((function(e){var t=Object(r.a)(e,3),n=t[0],c=t[1],a=t[2];W(n.data),_(c.data.customers),X(a.data),h(!1)})).catch((function(e){n||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return Oe(t,e),function(){e=!0,t.cancel("Cancelling request")}}),[]);var he=function(e,t){return function(n){var c=q.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));V(c)}},xe=Object(c.useRef)(null),pe=Object(c.useState)({date:"".concat(ce,"/").concat(ae+1,"/").concat(se),quoteNumber:"00".concat(K.length+1),customerName:""}),ve=Object(r.a)(pe,2),fe=ve[0],Ne=ve[1],ge=q.map((function(e){return e.amount(e.qty,e.up)})).reduce((function(e,t){return Number(e)+Number(t)}),0);function ye(e){var t=xe.current;t&&!t.contains(e.target)&&l(!1)}Object(c.useEffect)((function(){H.filter((function(e){return e.name===ee})).map((function(e){return oe(Object(d.a)({},e))}))}),[ee]),Object(c.useEffect)((function(){return document.addEventListener("mousedown",ye),function(){document.removeEventListener("mousedown",ye)}}),[]);var Se=function(e){var t=e.target,n=t.name,c=t.value;Ne((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},Ce=q.filter((function(e){return""!==e.productName&&""!==e.qty&&""!==e.up})).map((function(e){return{productName:e.productName,description:e.description,qty:e.qty,up:e.up,amount:e.qty*e.up}})),De={quoteInput:fe,customerDetails:le,data:Ce,grossAmount:ge},ke=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""!==le.name&&Ce.length>0?(setTimeout((function(){h(!0)}),500),p.post("/quotation",De).then((function(){t(),n(),h(!1)}))):(E("Please select a customer and add at least one product"),P(!0),setTimeout((function(){P(!1)}),3e3));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"Quotation",children:[Object(u.jsx)("div",{className:"close",onClick:t,children:Object(u.jsx)("i",{className:"fas fa-times fa-lg"})}),Object(u.jsx)("h3",{children:"New Quotation"}),Object(u.jsx)("div",{className:"formContainer",children:Object(u.jsxs)("form",{action:"",method:"post",children:[Object(u.jsxs)("div",{className:"quotationTop",children:[Object(u.jsxs)("div",{className:"date",children:[Object(u.jsx)("label",{htmlFor:"date",children:"Date:"}),Object(u.jsx)("input",{type:"text",name:"date",value:fe.date,id:"date",contentEditable:!1,readOnly:!0})]}),Object(u.jsxs)("div",{className:"expDate",children:[Object(u.jsx)("label",{htmlFor:"expDate",children:"Expiration Date:"}),Object(u.jsx)("input",{type:"date",id:"expDate",name:"expDate",value:fe.expDate,onChange:Se})]}),Object(u.jsxs)("div",{className:"quoteNumber",children:[Object(u.jsx)("label",{htmlFor:"quoteNumber",children:"Quote Number:"}),Object(u.jsx)("input",{type:"text",name:"quoteNumber",id:"quoteNumber",value:fe.quoteNumber,readOnly:!0})]})]}),Object(u.jsxs)("div",{className:"customerDetails",children:[Object(u.jsxs)("div",{ref:xe,className:"customerName",children:[Object(u.jsx)("label",{htmlFor:"customerName",children:"Receiver: "}),Object(u.jsx)("input",{type:"text",value:ee,onChange:function(e){te(e.target.value)},onClick:function(){l(!i)},name:"customerName",className:"autoListItemInput",id:"customerName",placeholder:"Select Customer"}),i&&Object(u.jsxs)("div",{className:"autoCompleteContainer",children:[Object(u.jsx)("button",{type:"button",onClick:function(){S(!0)},className:"selectCustomer",children:"Add New Customer"}),H.filter((function(e){var t;return!ee||(!!(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===ee||void 0===ee?void 0:ee.toLowerCase()))||void 0)})).map((function(e,t){return Object(u.jsx)("div",{className:"autoListItem",onClick:function(){te(e.name),l(!1)},tabIndex:"0",children:Object(u.jsx)("p",{className:"selectCustomer",children:e.name})},t)}))]})]}),Object(u.jsx)("div",{className:"customerEmail",children:Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Email: "}),null===le||void 0===le?void 0:le.email]})}),Object(u.jsxs)("div",{className:"deliveryAdress",children:[Object(u.jsx)("h4",{children:"Delivery Address & Contact"}),Object(u.jsxs)("div",{className:"addressInfo",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Country: "}),null===le||void 0===le?void 0:le.country]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"City: "}),null===le||void 0===le?void 0:le.city]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Street: "}),null===le||void 0===le?void 0:le.street]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Tel: "}),null===le||void 0===le?void 0:le.telephone]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Mobile: "}),null===le||void 0===le?void 0:le.mobile]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Fax: "}),null===le||void 0===le?void 0:le.fax]})]})]})]}),Object(u.jsxs)("div",{className:"additionalInfo",children:[Object(u.jsx)("div",{className:"textArea",children:Object(u.jsx)("textarea",{name:"additionalInfo",id:"additionalInfo",cols:"60",rows:"6",value:fe.additonalInfo,onChange:Se,placeholder:"Add additional information to receiver",className:"textArea"})}),Object(u.jsx)("div",{className:"amount",children:Object(u.jsxs)("h3",{children:["Total: ",ge.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})})]}),Object(u.jsxs)("div",{className:"itemsContainer",children:[Object(u.jsx)("ul",{children:Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsx)("span",{className:"listTitle",children:"Product Name"}),Object(u.jsx)("span",{className:"listTitle",children:"Description"}),Object(u.jsx)("span",{className:"listTitle",children:"Quantity"}),Object(u.jsx)("span",{className:"listTitle",children:"Unit Price"}),Object(u.jsx)("span",{className:"listTitle",children:"Amount"})]})}),Object(u.jsx)("ul",{style:{height:"".concat(me),overflow:"hidden"},className:"items",children:q.map((function(e,t){var n;return Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsxs)("select",(n={name:"productName",id:"productName",value:e.productName,onChange:he("productName")},Object(N.a)(n,"onChange",he("productName",t)),Object(N.a)(n,"children",[Object(u.jsx)("option",{children:" "}),U.map((function(e){return Object(u.jsx)("option",{value:e.productName,children:e.productName})}))]),n)),Object(u.jsx)("input",{type:"text",name:"description",value:e.description,onChange:he("description",t)}),Object(u.jsx)("input",{type:"number",name:"qty",value:e.qty,onChange:he("qty",t)}),Object(u.jsx)("input",{type:"number",name:"up",value:e.up,onChange:he("up",t)}),Object(u.jsx)("input",{type:"number",name:"amount",value:e.amount(e.qty,e.up),readOnly:!0})]},t)}))})]}),Object(u.jsxs)("div",{className:"summation",children:[Object(u.jsx)("button",{onClick:function(){be((function(e){return e+7.3})),"100%"===me&&(E("Cannot Add more rows"),P(!0),setTimeout((function(){P(!1)}),3e3))},type:"button",className:"addRows btn",children:"Add Rows"}),Object(u.jsx)("button",{onClick:t,type:"button",className:"addRows btn",children:"Cancel"}),Object(u.jsx)("button",{onClick:function(){ke(),console.log("Save Button Clicked")},type:"button",className:"addRows btn",children:"Save"}),Object(u.jsx)("button",{onClick:function(){ke(),console.log("Save and send Button Clicked")},type:"button",className:"addRows btn",children:"Save and Send"}),Object(u.jsxs)("h3",{className:"amount",children:["Grand Total: ",ge.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})]})]})}),y&&Object(u.jsx)(D,{onClick:function(){S(!1)}}),b&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:T,message:B})]})};var F=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(!1),j=Object(r.a)(o,2),b=j[0],h=j[1],v=Object(c.useState)(!1),f=Object(r.a)(v,2),y=f[0],S=f[1],k=Object(c.useState)(!1),A=Object(r.a)(k,2),T=A[0],P=A[1],I=Object(c.useState)(!1),F=Object(r.a)(I,2),B=F[0],E=F[1],R=Object(c.useState)(!0),L=Object(r.a)(R,2),q=L[0],V=L[1],M=Object(c.useState)(""),Y=Object(r.a)(M,2),H=Y[0],_=Y[1],Q=Object(c.useState)([]),G=Object(r.a)(Q,2),U=G[0],W=G[1],J=Object(c.useState)([]),z=Object(r.a)(J,2),K=z[0],X=z[1],Z=Object(c.useState)([]),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ne=Object(c.useState)({rebate:"",tradeDiscount:"",cashDiscount:"",valueAddedTax:""}),ce=Object(r.a)(ne,2),ae=ce[0],se=ce[1],ie=Object(c.useState)(g),re=Object(r.a)(ie,2),le=re[0],oe=re[1],de=Object(c.useState)(""),ue=Object(r.a)(de,2),je=ue[0],be=ue[1],me=new Date,Oe=me.getDate(),he=me.getMonth(),xe=me.getFullYear(),pe=Object(c.useState)({name:"",email:"",billingAddress:{country:"",city:"",street:""},contact:{telephone:"",mobile:"",fax:""}}),ve=Object(r.a)(pe,2),fe=ve[0],Ne=ve[1],ge=Object(c.useState)(7.5),ye=Object(r.a)(ge,2),Se=ye[0],Ce=ye[1],De=Se>36?"100%":"".concat(Se,"rem");Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var t,n,c,a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=x.a.CancelToken.source(),c=p.get("/products"),a=p.get("/customers"),s=p.get("/creditNotes"),e.next=7,x.a.all([c,a,s],{cancelToken:n.token}).then((function(e){var t=Object(r.a)(e,3),n=t[0],c=t[1],a=t[2];W(n.data),X(c.data.customers),te(a.data),V(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 7:return e.abrupt("return",(function(){t=!0,n.cancel("Cancelling request")}));case 8:case"end":return e.stop()}}),e)}))),[]);var ke=function(e,t){return function(n){var c=le.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));oe(c)}},we=Object(c.useState)([{name:"",amount:""},{name:"",amount:""},{name:"",amount:""},{name:"",amount:""}]),Ae=Object(r.a)(we,2),Te=Ae[0],Pe=Ae[1],Ie=function(e,t){return function(n){var c=Te.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));Pe(c)}},Fe=Object(c.useRef)(null),Be=function(e){var t=e.target,n=t.name,c=t.value;se((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},Ee=Object(c.useState)({date:"".concat(Oe,"/").concat(he+1,"/").concat(xe),noteNumber:"00".concat(ee.length+1),customerName:""}),Re=Object(r.a)(Ee,2),Le=Re[0],qe=Re[1],Ve=le.map((function(e){return e.amount(e.qty,e.up)})).reduce((function(e,t){return Number(e)+Number(t)}),0),Me=(Ve*(Number(ae.rebate)/100)).toFixed(2),Ye=Ve-Me,He=(Ye*(Number(ae.tradeDiscount)/100)).toFixed(2),_e=Ye-He,Qe=(_e*(Number(ae.cashDiscount)/100)).toFixed(2),Ge=_e-Qe,Ue=(Ge*(Number(ae.valueAddedTax)/100)).toFixed(2),We=Te.map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}));function Je(e){var t=Fe.current;t&&!t.contains(e.target)&&l(!1)}Object(c.useEffect)((function(){K.filter((function(e){return e.name===je})).map((function(e){return Ne(Object(d.a)({},e))}))}),[je]),Object(c.useEffect)((function(){return document.addEventListener("mousedown",Je),function(){document.removeEventListener("mousedown",Je)}}),[]);var ze=le.filter((function(e){return""!==e.productName&&""!==e.qty&&""!==e.up})).map((function(e){return{productName:e.productName,description:e.description,qty:e.qty,up:e.up,amount:e.qty*e.up}})),Ke=Te.filter((function(e){return""!==e.name&&""!==e.amount})),Xe={noteInput:Le,customerDetails:fe,data:ze,additionsAndSubtractions:ae,discountsAndVat:{rebateValue:Me,tradeDiscountValue:He,cashDiscountValue:Qe,valueAddedTax:Ue},otherAdditions:Ke,grossAmount:Ve,netPayable:(Ge+Number(Ue)+We).toFixed(2)},Ze=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""!==fe.name&&ze.length>0?(setTimeout((function(){V(!0)}),500),p.post("/creditNote",Xe).then((function(e){console.log(e.data),t(),n(),V(!1)}))):(_("Please select a customer and add at least one product"),E(!0),setTimeout((function(){E(!1)}),3e3));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"Quotation",children:[Object(u.jsx)("div",{className:"close",onClick:t,children:Object(u.jsx)("i",{className:"fas fa-times fa-lg"})}),Object(u.jsx)("h3",{children:"New Credit Note"}),Object(u.jsx)("div",{className:"formContainer",children:Object(u.jsxs)("form",{action:"",method:"post",children:[Object(u.jsxs)("div",{className:"quotationTop",children:[Object(u.jsxs)("div",{className:"date",children:[Object(u.jsx)("label",{htmlFor:"date",children:"Date:"}),Object(u.jsx)("input",{type:"text",name:"date",value:Le.date,id:"date",contentEditable:!1,readOnly:!0})]}),Object(u.jsxs)("div",{className:"noteNumber",children:[Object(u.jsx)("label",{htmlFor:"quoteNumber",children:"Note Number:"}),Object(u.jsx)("input",{type:"text",name:"noteNumber",id:"quoteNumber",value:Le.noteNumber,readOnly:!0})]})]}),Object(u.jsxs)("div",{className:"customerDetails",children:[Object(u.jsxs)("div",{ref:Fe,className:"customerName",children:[Object(u.jsx)("label",{htmlFor:"customerName",children:"Receiver: "}),Object(u.jsx)("input",{type:"text",value:je,onChange:function(e){be(e.target.value)},onClick:function(){l(!i)},name:"customerName",className:"autoListItemInput",id:"customerName",placeholder:"Select Customer"}),i&&Object(u.jsxs)("div",{className:"autoCompleteContainer",children:[Object(u.jsx)("button",{type:"button",onClick:function(){P(!0)},children:"Add New Customer"}),K.filter((function(e){var t;return!je||(!!(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===je||void 0===je?void 0:je.toLowerCase()))||void 0)})).map((function(e,t){return Object(u.jsx)("div",{className:"autoListItem",onClick:function(){be(e.name),l(!1)},tabIndex:"0",children:Object(u.jsx)("p",{children:e.name})},t)}))]})]}),Object(u.jsx)("div",{className:"customerEmail",children:Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Email: "}),null===fe||void 0===fe?void 0:fe.email]})}),Object(u.jsxs)("div",{className:"deliveryAdress",children:[Object(u.jsx)("h4",{children:"Delivery Address & Contact"}),Object(u.jsxs)("div",{className:"addressInfo",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Country: "}),null===fe||void 0===fe?void 0:fe.country]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"City: "}),null===fe||void 0===fe?void 0:fe.city]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Street: "}),null===fe||void 0===fe?void 0:fe.street]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Tel: "}),null===fe||void 0===fe?void 0:fe.telephone]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Mobile: "}),null===fe||void 0===fe?void 0:fe.mobile]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Fax: "}),null===fe||void 0===fe?void 0:fe.fax]})]})]})]}),Object(u.jsxs)("div",{className:"additionalInfo",children:[Object(u.jsx)("div",{className:"textArea",children:Object(u.jsx)("textarea",{name:"additionalInfo",id:"additionalInfo",cols:"60",rows:"6",value:Le.additonalInfo,onChange:function(e){var t=e.target,n=t.name,c=t.value;qe((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},placeholder:"Add additional information to receiver",className:"textArea"})}),Object(u.jsx)("div",{className:"amount",children:Object(u.jsxs)("h3",{children:["Net to your credit: ",(Ge+Number(Ue)+We).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})})]}),Object(u.jsxs)("div",{className:"itemsContainer",children:[Object(u.jsx)("ul",{children:Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsx)("span",{className:"listTitle",children:"Product Name"}),Object(u.jsx)("span",{className:"listTitle",children:"Description"}),Object(u.jsx)("span",{className:"listTitle",children:"Quantity"}),Object(u.jsx)("span",{className:"listTitle",children:"Unit Price"}),Object(u.jsx)("span",{className:"listTitle",children:"Amount"})]})}),Object(u.jsx)("ul",{style:{height:"".concat(De),overflow:"hidden"},className:"items",children:le.map((function(e,t){var n;return Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsxs)("select",(n={name:"productName",id:"productName",value:e.productName,onChange:ke("productName")},Object(N.a)(n,"onChange",ke("productName",t)),Object(N.a)(n,"children",[Object(u.jsx)("option",{children:" "}),U.map((function(e){return Object(u.jsx)("option",{value:e.productName,children:e.productName})}))]),n)),Object(u.jsx)("input",{type:"text",name:"description",value:e.description,onChange:ke("description",t)}),Object(u.jsx)("input",{type:"number",name:"qty",value:e.qty,onChange:ke("qty",t)}),Object(u.jsx)("input",{type:"number",name:"up",value:e.up,onChange:ke("up",t)}),Object(u.jsx)("input",{type:"number",name:"amount",value:e.amount(e.qty,e.up),readOnly:!0})]},t)}))})]}),Object(u.jsxs)("div",{className:"summation",children:[Object(u.jsx)("button",{onClick:function(){Ce((function(e){return e+7.3})),"100%"===De&&(_("Cannot Add more rows"),E(!0),setTimeout((function(){E(!1)}),3e3))},type:"button",className:"addRows btn",children:"Add Rows"}),Object(u.jsxs)("h3",{className:"amount",children:["Gross Amount: ",Ve.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})]}),Object(u.jsxs)("div",{className:"deductionsAndAdditions",children:[Object(u.jsxs)("div",{className:"hideAndShow",children:[Object(u.jsx)("h5",{children:"Deductions"}),Object(u.jsx)("button",{onClick:function(){S(!y)},type:"button",children:y?"Hide":"Show"})]}),Object(u.jsx)("div",{className:"deductions",children:y&&Object(u.jsxs)("ul",{className:"deductions",children:[Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{className:"elements",children:"Elements"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Rate"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Amount"})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Rebate"}),Object(u.jsx)("input",{type:"number",name:"rebate",id:"rebate",onChange:function(e){Be(e)},value:ae.rebate}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Me.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Commercial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:Ye.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Trade Discount"}),Object(u.jsx)("input",{type:"number",name:"tradeDiscount",id:"tradeDiscount",onChange:function(e){Be(e)},value:ae.tradeDiscount}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:He.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Commercial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:_e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Cash Discount"}),Object(u.jsx)("input",{type:"number",name:"cashDiscount",id:"cashDiscount",onChange:function(e){Be(e)},value:ae.cashDiscount}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Qe.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Financial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:Ge.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]})]})}),Object(u.jsx)("ul",{className:"deductions",children:Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("li",{className:"deductItem additionItem",children:[Object(u.jsx)("span",{children:"Tax (VAT) Rate"}),Object(u.jsx)("input",{type:"number",name:"valueAddedTax",id:"valueAddedTax",onChange:function(e){Be(e)},value:ae.valueAddedTax}),Object(u.jsx)("span",{children:Ue.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})})}),Object(u.jsxs)("div",{className:"additions",children:[Object(u.jsxs)("div",{className:"hideAndShow",children:[Object(u.jsx)("h5",{children:"Additions"}),Object(u.jsx)("button",{onClick:function(){h(!b)},type:"button",children:b?"Hide":"Show"})]}),b&&Object(u.jsxs)("ul",{className:"otherAdditions",children:[Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("li",{className:"additionItem",children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Element"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Amount"})})]})}),Object(u.jsx)("div",{className:"otherAdditions",children:Te.map((function(e,t){return Object(u.jsxs)("li",{className:"additionItem",children:[Object(u.jsx)("input",{type:"text",value:e.name,onChange:Ie("name",t),name:"name"}),Object(u.jsx)("input",{type:"number",value:e.amount,onChange:Ie("amount",t),name:"amount"})]},t)}))}),Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("div",{className:"additionItem",children:[Object(u.jsx)("h5",{children:"Total Additions"}),Object(u.jsx)("h5",{children:We.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})})]})]}),Object(u.jsxs)("div",{className:"netPay",children:[Object(u.jsx)("h3",{children:"Net To Your Credit"}),Object(u.jsx)("h3",{children:(Ge+Number(Ue)+We).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]}),Object(u.jsxs)("div",{className:"saveOptions",children:[Object(u.jsx)("button",{onClick:t,type:"button",className:"addRows btn",children:"Cancel"}),Object(u.jsx)("button",{onClick:function(){Ze(),console.log("Save Button Clicked")},type:"button",className:"addRows btn",children:"Save"}),Object(u.jsx)("button",{onClick:function(){Ze(),console.log("Save and send Button Clicked")},type:"button",className:"addRows btn",children:"Save and Send"})]})]})}),T&&Object(u.jsx)(D,{onClick:function(){P(!1)}}),q&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:B,message:H})]})};var B=function(){var e,t,n,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],j=Object(c.useState)(""),b=Object(r.a)(j,2),h=b[0],v=b[1],N=Object(c.useState)(!1),g=Object(r.a)(N,2),y=g[0],S=g[1],D=Object(c.useState)(!1),k=Object(r.a)(D,2),B=k[0],E=k[1],R=Object(c.useState)(!1),L=Object(r.a)(R,2),q=L[0],V=L[1],M=Object(c.useState)(!1),Y=Object(r.a)(M,2),H=Y[0],_=Y[1],Q=Object(c.useState)(!1),G=Object(r.a)(Q,2),U=G[0],W=G[1],J=Object(c.useState)(!0),z=Object(r.a)(J,2),K=z[0],X=z[1],Z=Object(o.f)(),$=Object(c.useState)([]),ee=Object(r.a)($,2),te=ee[0],ne=ee[1],ce=Object(c.useState)([]),ae=Object(r.a)(ce,2),se=ae[0],ie=ae[1],re=Object(c.useState)([]),le=Object(r.a)(re,2),oe=le[0],de=le[1],ue=Object(c.useState)([]),je=Object(r.a)(ue,2),be=je[0],me=je[1],Oe=Object(c.useState)([]),he=Object(r.a)(Oe,2),xe=he[0],pe=he[1];Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=x.a.CancelToken.source(),e.next=4,p.get("/sales",{cancelToken:n.token}).then((function(e){console.log(e.data);e.data.sales;ne(e.data.sales),ie(e.data.graph),de(e.data.creditSales),me(e.data.cashSales),pe(e.data.salesReturns),X(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 4:return e.abrupt("return",(function(){t=!0,n.cancel("Cancelling request")}));case 5:case"end":return e.stop()}}),e)}))),[]);var ve=null===se||void 0===se?void 0:se.map((function(e){return e.value})),fe=null===se||void 0===se?void 0:se.map((function(e){return e.month})),Ne=xe.map((function(e){return e.netPayable})).reduce((function(e,t){return e+t}),0),ge=null===te||void 0===te?void 0:te.filter((function(e){return"credit"===e.saleType})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0),ye=[];null===te||void 0===te||te.filter((function(e){"cash"===e.saleType&&ye.push(e),"bank"===e.saleType&&ye.push(e),"mobileMoney"===e.saleType&&ye.push(e)}));var Se=null===ye||void 0===ye?void 0:ye.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0),Ce=Object(c.useRef)(null),De=Object(c.useState)({transform:"translateY(-5rem)",visibility:"hidden"}),ke=Object(r.a)(De,2),we=ke[0],Ae=ke[1],Te={width:"100%",position:"absolute",color:"gray",fontWeight:"550",padding:"1rem",backgroundColor:"#ffffff",borderRadius:"1rem",transform:we.transform,visibility:we.visibility,transition:"transform 0.5s ease"};function Pe(e){var t=Ce.current;t&&!t.contains(e.target)&&Ae({transform:"translateY(-5rem)",visibility:"hidden"})}return Object(c.useEffect)((function(){return document.addEventListener("mousedown",Pe),function(){document.removeEventListener("mousedown",Pe)}}),[]),Object(u.jsxs)("div",{className:"Sales Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsx)("h1",{children:"Sales Dashboard"}),Object(u.jsxs)("div",{className:"moreOptions invoicesHeading",ref:Ce,children:[Object(u.jsxs)("button",{className:"invoiceButton",onClick:function(){"hidden"===we.visibility?Ae({transform:"translateY(0)",visibility:"visible"}):Ae({transform:"translateY(-5rem)",visibility:"hidden"})},children:["New Transaction",Object(u.jsx)("i",{className:"fas fa-sort-down"})]}),Object(u.jsxs)("div",{className:"moreOptionsCont",style:Object(d.a)({},Te),children:[Object(u.jsx)("p",{className:"option",onClick:function(){S(!0)},children:"New Invoice"}),Object(u.jsx)("p",{className:"option",onClick:function(){E(!0)},children:"New Receipt"}),Object(u.jsx)("p",{className:"option",onClick:function(){W(!0)},children:"Sales Returns"}),Object(u.jsx)("p",{className:"option",onClick:function(){V(!0)},children:"Receive Payment"}),Object(u.jsx)("p",{className:"option",onClick:function(){_(!0)},children:"Quotation"})]})]})]}),Object(u.jsxs)("div",{className:"salesMiddle",children:[Object(u.jsxs)("div",{className:"salesTotals",children:[Object(u.jsxs)("div",{className:"cashSales","data-text":"go to receipts",onClick:function(){Z.push("/receipts")},children:[Object(u.jsx)("h5",{children:"Total Sales Receipts"}),Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:(null===(e=Number(Se))||void 0===e?void 0:e.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("div",{className:"creditSales","data-text":"go to invoices",onClick:function(){Z.push("/invoices")},children:[Object(u.jsx)("h5",{children:"Total Credit Sales"}),Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:(null===(t=Number(ge))||void 0===t?void 0:t.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("div",{className:"salesReturns","data-text":"go to credit notes",onClick:function(){Z.push("/credit-notes")},children:[Object(u.jsx)("h5",{children:"Total Sales Returns"}),Object(u.jsx)("p",{style:{color:"red"},children:Object(u.jsx)("b",{children:(null===(n=Number(Ne))||void 0===n?void 0:n.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]})]}),Object(u.jsx)(f,{labels:fe,data3:ve,tooltip3:"Total Sales Per Month",data1:null===oe||void 0===oe?void 0:oe.map((function(e){return e.value})),tooltip1:"Credit Sales",data2:null===be||void 0===be?void 0:be.map((function(e){return e.value})),tooltip2:"Sales Receipts"})]}),y&&Object(u.jsx)(A,{onClick:function(){S(!1)},refetch:function(){l(!0),v("Invoice Added Successfully"),setTimeout((function(){l(!1),v("")}),2e3)}}),B&&Object(u.jsx)(T,{onClick:function(){E(!1)},refetch:function(){l(!0),v("Receipt Added Successfully"),setTimeout((function(){l(!1),v("")}),2e3)}}),q&&Object(u.jsx)(P,{onClick:function(){V(!1)},refetch:function(){l(!0),v("Payment Added Successfully"),setTimeout((function(){l(!1),v("")}),2e3)}}),H&&Object(u.jsx)(I,{onClick:function(){_(!1)},refetch:function(){l(!0),v("Quotation Added Successfully"),setTimeout((function(){l(!1),v("")}),2e3)}}),U&&Object(u.jsx)(F,{onClick:function(){W(!1)},refetch:function(){l(!0),v("Credit Note Added Successfully"),setTimeout((function(){l(!1),v("")}),2e3)}}),K&&Object(u.jsx)(w,{}),i&&Object(u.jsx)(C,{alert:i,message:h})]})};var E=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(r.a)(s,2),l=i[0],d=i[1],j=Object(c.useState)(!1),b=Object(r.a)(j,2),h=b[0],v=b[1],f=Object(c.useState)(!0),N=Object(r.a)(f,2),g=N[0],y=N[1],S=Object(o.f)(),k=Object(c.useState)([]),A=Object(r.a)(k,2),T=(A[0],A[1]),P=Object(c.useState)([]),I=Object(r.a)(P,2),F=I[0],B=I[1];Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=x.a.CancelToken.source(),E(n,t),e.abrupt("return",(function(){t=!0,n.cancel("Cancelling request")}));case 4:case"end":return e.stop()}}),e)}))),[]);var E=function(){var e=Object(O.a)(m.a.mark((function e(t,n){var c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=p.get("/sales"),a=p.get("/customers"),e.next=4,x.a.all([c,a],{cancelToken:t.token}).then((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1];n.data.sales;T(n.data.sales),B(c.data.customers),y(!1)})).catch((function(e){n||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=Object(c.useRef)(null);function L(e){var t=R.current;t&&!t.contains(e.target)&&v(!1)}return Object(c.useEffect)((function(){return document.addEventListener("mousedown",L),function(){document.removeEventListener("mousedown",L)}}),[]),Object(u.jsxs)("div",{className:"Sales",children:[Object(u.jsxs)("div",{className:"Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsx)("h1",{children:"Customers"}),Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){v(!0)},children:"New Customer"})]}),Object(u.jsxs)("div",{className:"allDebtorsContainer",children:[0===F.length?Object(u.jsxs)("div",{style:{marginTop:"1rem"},children:[Object(u.jsx)("h3",{children:"No Data to display. Please Add Customers"}),Object(u.jsx)("button",{className:"btn",onClick:function(){v(!0)},children:"Add Customer"})]}):Object(u.jsx)("h3",{style:{textAlign:"left"},children:"All Customers"}),Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:0===F.length?"":Object(u.jsxs)("tr",{className:"invoiceListHead",children:[Object(u.jsx)("th",{children:"Customer Name"}),Object(u.jsx)("th",{children:"Email Address"}),Object(u.jsx)("th",{children:"City "}),Object(u.jsx)("th",{children:"Telephone"})]})}),Object(u.jsx)("tbody",{className:"tableBody",children:null===F||void 0===F?void 0:F.map((function(e){var t;return Object(u.jsxs)("tr",{className:"invoiceListbody invoiceDetail",onClick:function(){S.push("/customers/".concat(e.name))},children:[Object(u.jsx)("td",{children:e.name}),Object(u.jsx)("td",{children:e.email}),Object(u.jsx)("td",{children:e.city}),Object(u.jsx)("td",{children:null===(t=e.telephone)||void 0===t?void 0:t.replace(/\B(?=(\d{3})+(?!\d))/g,"-")})]})}))})]})]})]}),g&&Object(u.jsx)(w,{}),h&&Object(u.jsx)("div",{ref:R,children:Object(u.jsx)(D,{onClick:function(){v(!1)},refetch:function(){d("Customer Added Successfully"),a(!0),setTimeout((function(){a(!1),d("")}))}})}),Object(u.jsx)(C,{alert:n,alertMessage:l})]})};n(94);var R=function(){var e=Object(c.useState)(!0),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),i=Object(r.a)(s,2),l=i[0],j=i[1],b=Object(c.useState)(!1),h=Object(r.a)(b,2),v=h[0],N=h[1],g=Object(c.useState)(!1),y=Object(r.a)(g,2),S=y[0],C=y[1],k=Object(c.useState)(!1),B=Object(r.a)(k,2),E=B[0],R=B[1],L=Object(c.useState)(!1),q=Object(r.a)(L,2),V=q[0],M=q[1],Y=Object(c.useState)(!1),H=Object(r.a)(Y,2),_=H[0],Q=H[1],G=Object(c.useState)(!1),U=Object(r.a)(G,2),W=U[0],J=U[1],z=Object(c.useState)(!1),K=Object(r.a)(z,2),X=K[0],Z=K[1],$=Object(c.useState)(!1),ee=Object(r.a)($,2),te=ee[0],ne=ee[1],ce=Object(c.useState)(!1),ae=Object(r.a)(ce,2),se=ae[0],ie=ae[1],re=Object(c.useState)(!0),le=Object(r.a)(re,2),oe=le[0],de=le[1],ue=Object(c.useState)(!1),je=Object(r.a)(ue,2),be=(je[0],je[1]),me=Object(c.useState)(""),Oe=Object(r.a)(me,2),he=(Oe[0],Oe[1]),xe=Object(c.useState)([]),pe=Object(r.a)(xe,2),ve=pe[0],fe=pe[1],Ne=Object(c.useState)([]),ge=Object(r.a)(Ne,2),ye=ge[0],Se=ge[1],Ce=Object(c.useState)([]),De=Object(r.a)(Ce,2),ke=De[0],we=De[1],Ae=Object(c.useState)([]),Te=Object(r.a)(Ae,2),Pe=Te[0],Ie=Te[1],Fe=Object(c.useState)([]),Be=Object(r.a)(Fe,2),Ee=Be[0],Re=Be[1],Le=Object(c.useState)([]),qe=Object(r.a)(Le,2),Ve=qe[0],Me=qe[1],Ye=Object(c.useState)([]),He=Object(r.a)(Ye,2),_e=He[0],Qe=He[1],Ge=Object(c.useState)([]),Ue=Object(r.a)(Ge,2),We=Ue[0],Je=Ue[1],ze=Object(c.useState)([]),Ke=Object(r.a)(ze,2),Xe=Ke[0],Ze=Ke[1],$e=Object(c.useState)([]),et=Object(r.a)($e,2),tt=et[0],nt=et[1],ct=Object(c.useState)("overview"),at=Object(r.a)(ct,2),st=at[0],it=at[1],rt=Object(c.useRef)(null),lt=Object(o.h)(),ot=Object(o.f)(),dt=null===tt||void 0===tt?void 0:tt.filter((function(e){return e.name===lt.customerName})),ut=[],jt=[],bt=[],mt=[],Ot=[],ht=[],xt=[],pt=[],vt=[],ft=[],Nt=[],gt=[];function yt(e){var t=rt.current;t&&!t.contains(e.target)&&j(!1)}null===Ee||void 0===Ee||Ee.filter((function(e){return"sales returns"!==e.saleType})).filter((function(e){switch(new Date(e.date).getMonth()){case 0:ut.push(e.amount);break;case 1:jt.push(e.amount);break;case 2:bt.push(e.amount);break;case 3:mt.push(e.amount);break;case 4:Ot.push(e.amount);break;case 5:ht.push(e.amount);break;case 6:xt.push(e.amount);break;case 7:pt.push(e.amount);break;case 8:vt.push(e.amount);break;case 9:ft.push(e.amount);break;case 10:Nt.push(e.amount);break;case 11:gt.push(e.amount);break;default:return null}})),ut=ut.reduce((function(e,t){return e+t}),0),jt=jt.reduce((function(e,t){return e+t}),0),bt=bt.reduce((function(e,t){return e+t}),0),mt=mt.reduce((function(e,t){return e+t}),0),Ot=Ot.reduce((function(e,t){return e+t}),0),ht=ht.reduce((function(e,t){return e+t}),0),xt=xt.reduce((function(e,t){return e+t}),0),pt=pt.reduce((function(e,t){return e+t}),0),vt=vt.reduce((function(e,t){return e+t}),0),ft=ft.reduce((function(e,t){return e+t}),0),Nt=Nt.reduce((function(e,t){return e+t}),0),gt=gt.reduce((function(e,t){return e+t}),0),Object(c.useEffect)((function(){return document.addEventListener("mousedown",yt),function(){document.removeEventListener("mousedown",yt)}}),[]),Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var t,n,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.get("/customers/".concat(lt.customerName)),n=p.get("/customers"),c=!1,s=x.a.CancelToken.source(),e.next=6,x.a.all([t,n],{cancelToken:s.token}).then((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1];fe(n.data.invoices),Se(n.data.receipts),we(n.data.quotations),Ie(n.data.creditNotes),Re(n.data.sales),Me(n.data.debtorList),Qe(n.data.invoices.map((function(e){return e.otherAdditions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0)}))),Je(n.data.receipts.map((function(e){return e.otherAdditions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0)}))),Ze(n.data.creditNotes.map((function(e){return e.otherAdditions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0)}))),nt(c.data.customers),a(!1)})).catch((function(e){c||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 6:return e.abrupt("return",(function(){c=!0,s.cancel("Cancelling request")}));case 7:case"end":return e.stop()}}),e)}))),[]);var St=[],Ct=[],Dt=[],kt=[],wt=[],At=[],Tt=[],Pt=[],It=[],Ft=[],Bt=[],Et=[],Rt=[],Lt=[],qt=[],Vt=[],Mt=[],Yt=[],Ht=[],_t=[],Qt=[],Gt=[],Ut=[],Wt=[];null===ve||void 0===ve||ve.filter((function(e){var t;switch(new Date(null===(t=e.invoiceInput)||void 0===t?void 0:t.date).getMonth()){case 0:St.push(e.netPayable);break;case 1:Dt.push(e.netPayable);break;case 2:wt.push(e.netPayable);break;case 3:Tt.push(e.netPayable);break;case 4:It.push(e.netPayable);break;case 5:Bt.push(e.netPayable);break;case 6:Rt.push(e.netPayable);break;case 7:qt.push(e.netPayable);break;case 8:Mt.push(e.netPayable);break;case 9:Ht.push(e.netPayable);break;case 10:Qt.push(e.netPayable);break;case 11:Ut.push(e.netPayable);break;default:return null}})),null===ye||void 0===ye||ye.filter((function(e){var t;switch(new Date(null===(t=e.receiptInput)||void 0===t?void 0:t.date).getMonth()){case 0:Ct.push(e.netPayable);break;case 1:kt.push(e.netPayable);break;case 2:At.push(e.netPayable);break;case 3:Pt.push(e.netPayable);break;case 4:Ft.push(e.netPayable);break;case 5:Et.push(e.netPayable);break;case 6:Lt.push(e.netPayable);break;case 7:Vt.push(e.netPayable);break;case 8:Yt.push(e.netPayable);break;case 9:_t.push(e.netPayable);break;case 10:Gt.push(e.netPayable);break;case 11:Wt.push(e.netPayable);break;default:return null}}));var Jt=Ct.reduce((function(e,t){return Number(e)+Number(t)}),0),zt=kt.reduce((function(e,t){return Number(e)+Number(t)}),0),Kt=At.reduce((function(e,t){return Number(e)+Number(t)}),0),Xt=Pt.reduce((function(e,t){return Number(e)+Number(t)}),0),Zt=Ft.reduce((function(e,t){return Number(e)+Number(t)}),0),$t=Et.reduce((function(e,t){return Number(e)+Number(t)}),0),en=Lt.reduce((function(e,t){return Number(e)+Number(t)}),0),tn=Vt.reduce((function(e,t){return Number(e)+Number(t)}),0),nn=Yt.reduce((function(e,t){return Number(e)+Number(t)}),0),cn=_t.reduce((function(e,t){return Number(e)+Number(t)}),0),an=Gt.reduce((function(e,t){return Number(e)+Number(t)}),0),sn=Wt.reduce((function(e,t){return Number(e)+Number(t)}),0),rn=St.reduce((function(e,t){return Number(e)+Number(t)}),0),ln=Dt.reduce((function(e,t){return Number(e)+Number(t)}),0),on=wt.reduce((function(e,t){return Number(e)+Number(t)}),0),dn=Tt.reduce((function(e,t){return Number(e)+Number(t)}),0),un=It.reduce((function(e,t){return Number(e)+Number(t)}),0),jn=Bt.reduce((function(e,t){return Number(e)+Number(t)}),0),bn=Rt.reduce((function(e,t){return Number(e)+Number(t)}),0),mn=qt.reduce((function(e,t){return Number(e)+Number(t)}),0),On=Mt.reduce((function(e,t){return Number(e)+Number(t)}),0),hn=Ht.reduce((function(e,t){return Number(e)+Number(t)}),0),xn=Qt.reduce((function(e,t){return Number(e)+Number(t)}),0),pn=Ut.reduce((function(e,t){return Number(e)+Number(t)}),0),vn=Object(c.useRef)(null),fn=Object(c.useState)({transform:"translateY(-5rem)",visibility:"hidden"}),Nn=Object(r.a)(fn,2),gn=Nn[0],yn=Nn[1],Sn={width:"100%",position:"absolute",color:"gray",fontWeight:"550",padding:"1rem",backgroundColor:"#ffffff",borderRadius:"1rem",transform:gn.transform,visibility:gn.visibility,transition:"transform 0.5s ease"};function Cn(e){var t=vn.current;t&&!t.contains(e.target)&&yn({transform:"translateY(-5rem)",visibility:"hidden"})}return Object(c.useEffect)((function(){return document.addEventListener("mousedown",Cn),function(){document.removeEventListener("mousedown",Cn)}}),[]),Object(u.jsxs)("div",{className:"CustomerDetails Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsxs)("h1",{children:["Customer: ",lt.customerName]}),Object(u.jsx)("div",{className:"moreOptions",children:Object(u.jsxs)("div",{className:"moreOptions invoicesHeading",ref:vn,children:[Object(u.jsxs)("button",{className:"invoiceButton",onClick:function(){"hidden"===gn.visibility?yn({transform:"translateY(0)",visibility:"visible"}):yn({transform:"translateY(-5rem)",visibility:"hidden"})},children:["New Transaction",Object(u.jsx)("i",{className:"fas fa-sort-down"})]}),Object(u.jsxs)("div",{className:"moreOptionsCont",style:Object(d.a)({},Sn),children:[Object(u.jsx)("p",{className:"option",onClick:function(){N(!0)},children:"Invoice"}),Object(u.jsx)("p",{className:"option",onClick:function(){C(!0)},children:"Receipt"}),Object(u.jsx)("p",{className:"option",onClick:function(){M(!0)},children:"Receive Payment"}),Object(u.jsx)("p",{className:"option",onClick:function(){Q(!0)},children:"Credit Note"}),Object(u.jsx)("p",{className:"option",onClick:function(){R(!0)},children:"Quotation"}),Object(u.jsx)("p",{className:"option",onClick:function(){j(!0)},children:"New Customer"})]})]})})]}),Object(u.jsx)("div",{className:"filterContainer",children:Object(u.jsxs)("div",{className:"filter",children:[Object(u.jsx)("button",{className:"overview"===st?"button":"btn",onClick:function(){it("overview"),J(!1),Z(!1),ne(!1),ie(!1),de(!0)},children:"Overview"}),Object(u.jsx)("button",{className:"View Invoices"===st?"button":"btn",onClick:function(){it("View Invoices"),Z(!1),ne(!1),ie(!1),de(!1),J(!0)},children:"All Invoices"}),Object(u.jsx)("button",{className:"View Receipts"===st?"button":"btn",onClick:function(){it("View Receipts"),ne(!1),ie(!1),de(!1),J(!1),Z(!0)},children:"Receipts"}),Object(u.jsx)("button",{className:"View Quotation"===st?"button":"btn",onClick:function(){it("View Quotation"),ie(!1),de(!1),J(!1),Z(!1),ne(!0)},children:"Quotations"}),Object(u.jsx)("button",{className:"View CreditNote"===st?"button":"btn",onClick:function(){it("View CreditNote"),de(!1),J(!1),Z(!1),ne(!1),ie(!0)},children:"Credit Notes"})]})}),oe&&Object(u.jsxs)("div",{className:"customerBodyELements",children:[null===dt||void 0===dt?void 0:dt.map((function(e){return Object(u.jsxs)("div",{className:"customerDetailsInfo",children:[Object(u.jsx)("i",{class:"fas fa-user-circle fa-5x"}),Object(u.jsxs)("div",{className:"customerName group",children:[Object(u.jsxs)("h2",{children:["Name: ",e.name]}),null===Ve||void 0===Ve?void 0:Ve.map((function(e){return Object(u.jsxs)("p",{className:"balanceDue",children:["Total Debt: ",e.balanceDue]})}))]}),Object(u.jsxs)("div",{className:"contactInfos group",children:[Object(u.jsx)("h3",{className:"customerDetail",children:Object(u.jsx)("u",{children:"Contact Info"})}),Object(u.jsxs)("p",{className:"customerDetail",children:[Object(u.jsx)("span",{children:"Email:"}),e.email]}),Object(u.jsxs)("p",{className:"customerDetail",children:[Object(u.jsx)("span",{children:"Tel:"}),e.telephone]}),Object(u.jsxs)("p",{className:"customerDetail",children:[Object(u.jsx)("span",{children:"Mobile:"}),e.mobile]}),Object(u.jsxs)("p",{className:"customerDetail",children:[Object(u.jsx)("span",{children:"P.O Box: "}),e.fax]})]}),Object(u.jsxs)("div",{className:"addressInfos group",children:[Object(u.jsx)("h3",{className:"customerDetail",children:Object(u.jsx)("u",{children:"Address Info"})}),Object(u.jsxs)("p",{className:"customerDetail",children:[Object(u.jsx)("span",{children:"Country:"})," ",e.country]}),Object(u.jsxs)("p",{className:"customerDetail",children:[Object(u.jsx)("span",{children:"City:"})," ",e.city]}),Object(u.jsxs)("p",{className:"customerDetail",children:[Object(u.jsx)("span",{children:"Street:"})," ",e.street]})]})]})})),Ee.length>0?Object(u.jsxs)("div",{className:"recentAndBarChart",children:[Object(u.jsxs)("div",{className:"recentTransactions",children:[Object(u.jsxs)("div",{className:"totalPurchases",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Total Credits"})}),Object(u.jsx)("p",{children:(null===ve||void 0===ve?void 0:ve.map((function(e){return e.netPayable})).reduce((function(e,t){return Number(e)+Number(t)}),0)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"totalPurchases",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Total Cash"})}),Object(u.jsx)("p",{children:(null===ye||void 0===ye?void 0:ye.map((function(e){return e.netPayable})).reduce((function(e,t){return Number(e)+Number(t)}),0)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"totalPurchases",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Total Received"})}),Object(u.jsx)("p",{children:(null===Ve||void 0===Ve?void 0:Ve.map((function(e){return e.totalPaid})).reduce((function(e,t){return Number(e)+Number(t)}),0)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"totalPurchases",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Balance Owed"})}),Object(u.jsx)("p",{children:(null===Ve||void 0===Ve?void 0:Ve.map((function(e){return e.balanceDue})).reduce((function(e,t){return Number(e)+Number(t)}),0)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]}),Object(u.jsx)("div",{className:"barChartChart",children:Object(u.jsx)(f,{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],data3:[ut,jt,bt,mt,Ot,ht,xt,pt,vt,ft,Nt,gt],tooltip3:"Total Sales",data1:[rn,ln,on,dn,un,jn,bn,mn,On,hn,xn,pn],tooltip1:"Credit Sales",data2:[Jt,zt,Kt,Xt,Zt,$t,en,tn,nn,cn,an,sn],tooltip2:"Cash Sales"})})]}):Object(u.jsx)("h2",{className:"noData",children:"No Data To Display. Please Record Transactions"})]}),Object(u.jsxs)("div",{className:"allDebtorsContainer",children:[W&&ve.length>0?Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"invoiceListHead",children:[Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Invoice Term"}),Object(u.jsx)("th",{children:"Due Date"}),Object(u.jsx)("th",{children:"Invoice Number"}),Object(u.jsx)("th",{children:"Gross Amount"}),Object(u.jsx)("th",{children:"Total Discounts"}),Object(u.jsx)("th",{children:"VAT"}),Object(u.jsx)("th",{children:"Other Additions"}),Object(u.jsx)("th",{children:"Net Payable"})]})}),Object(u.jsx)("tbody",{children:null===ve||void 0===ve?void 0:ve.map((function(e,t){var n;return Object(u.jsxs)("tr",{className:"invoiceListbody invoiceDetail",onClick:function(){ot.push("/invoices/".concat(e._id))},children:[Object(u.jsx)("td",{children:new Date(e.invoiceInput.date).toLocaleDateString()}),Object(u.jsxs)("td",{children:[e.selectInvoiceTerm," days"]}),Object(u.jsx)("td",{children:new Date(e.dueDate).toLocaleDateString()}),Object(u.jsx)("td",{children:e.invoiceInput.invoiceNumber}),Object(u.jsx)("td",{children:e.grossAmount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:(Number(e.discountsAndVat.rebateValue)+Number(e.discountsAndVat.tradeDiscountValue)+Number(e.discountsAndVat.cashDiscountValue)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:e.discountsAndVat.valueAddedTax.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:null===(n=_e[t])||void 0===n?void 0:n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:e.netPayable.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})}))})]}):W&&Object(u.jsx)("h2",{className:"noData",children:"No Invoices To Display. Please Record Transactions"}),X&&ye.length>0?Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"invoiceListHead",children:[Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Receipt Number"}),Object(u.jsx)("th",{children:"Gross Amount"}),Object(u.jsx)("th",{children:"Total Discounts"}),Object(u.jsx)("th",{children:"VAT"}),Object(u.jsx)("th",{children:"Other Additions"}),Object(u.jsx)("th",{children:"Net Payable"})]})}),Object(u.jsx)("tbody",{children:null===ye||void 0===ye?void 0:ye.map((function(e,t){var n;return Object(u.jsxs)("tr",{className:"receiptListbody invoiceDetail",onClick:function(){ot.push("/receipts/".concat(e._id))},children:[Object(u.jsx)("td",{children:e.receiptInput.date}),Object(u.jsx)("td",{children:e.receiptInput.receiptNumber}),Object(u.jsx)("td",{children:e.grossAmount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:(Number(e.discountsAndVat.rebateValue)+Number(e.discountsAndVat.tradeDiscountValue)+Number(e.discountsAndVat.cashDiscountValue)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:e.discountsAndVat.valueAddedTax.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:null===(n=We[t])||void 0===n?void 0:n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:e.netPayable.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})}))})]}):X&&Object(u.jsx)("h2",{className:"noData",children:"No Data To Display. Please Record Transactions"}),se&&Pe.length>0?Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"invoiceListHead",children:[Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Return Number"}),Object(u.jsx)("th",{children:"Gross Amount"}),Object(u.jsx)("th",{children:"Total Discounts"}),Object(u.jsx)("th",{children:"VAT"}),Object(u.jsx)("th",{children:"Other Additions"}),Object(u.jsx)("th",{children:"Net Payable"})]})}),Object(u.jsx)("tbody",{children:Pe.map((function(e,t){var n;return Object(u.jsxs)("tr",{className:"noteListbody invoiceDetail",onClick:function(){ot.push("/credit-notes/".concat(e._id))},children:[Object(u.jsx)("td",{children:e.noteInput.date}),Object(u.jsx)("td",{children:e.noteInput.returnNumber}),Object(u.jsx)("td",{children:e.grossAmount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:(Number(e.discountsAndVat.rebateValue)+Number(e.discountsAndVat.tradeDiscountValue)+Number(e.discountsAndVat.cashDiscountValue)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:e.discountsAndVat.valueAddedTax.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:null===(n=Xe[t])||void 0===n?void 0:n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:e.netPayable.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})}))})]}):se&&Object(u.jsx)("h2",{className:"noData",children:"No Data To Display. Please Record Transactions"}),te&&ke.length>0?Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"invoiceListHead",children:[Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Quote Number"}),Object(u.jsx)("th",{children:"Gross Amount"})]})}),Object(u.jsx)("tbody",{children:ke.map((function(e,t){return Object(u.jsxs)("tr",{className:"quoteListbody",onClick:function(){ot.push("/quotes/".concat(e._id))},children:[Object(u.jsx)("td",{children:e.quoteInput.date}),Object(u.jsx)("td",{children:e.quoteInput.quoteNumber}),Object(u.jsx)("td",{children:e.grossAmount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})}))})]}):te&&Object(u.jsx)("h2",{className:"noData",children:"No Data To Display. Please Record Transactions"})]}),v&&Object(u.jsx)(A,{onClick:function(){N(!1)},refetch:function(){he("Sales Invoice Added Successfully"),be(!0),setTimeout((function(){be(!1),he("")}))}}),S&&Object(u.jsx)(T,{onClick:function(){C(!1)},refetch:function(){he("Sales Receipt Added Successfully"),be(!0),setTimeout((function(){be(!1),he("")}))}}),V&&Object(u.jsx)(P,{onClick:function(){M(!1)},refetch:function(){he("Customer Payment Added Successfully"),be(!0),setTimeout((function(){be(!1),he("")}))}}),E&&Object(u.jsx)(I,{onClick:function(){R(!1)},refetch:function(){he("Quotation Added Successfully"),be(!0),setTimeout((function(){be(!1),he("")}))}}),_&&Object(u.jsx)(F,{onClick:function(){Q(!1)},refetch:function(){he("Sales Returns Added Successfully"),be(!0),setTimeout((function(){be(!1),he("")}))}}),n&&Object(u.jsx)(w,{}),l&&Object(u.jsx)("div",{ref:rt,children:Object(u.jsx)(D,{onClick:function(){j(!1)},refetch:function(){he("Customer Added Successfully"),be(!0),setTimeout((function(){be(!1),he("")}))}})})]})};var L=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(""),j=Object(r.a)(o,2),b=j[0],h=j[1],x=Object(c.useState)({name:"",email:"",tel:""}),v=Object(r.a)(x,2),f=v[0],g=v[1],y=function(e){var t=e.target,n=t.name,c=t.value;g((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},S=function(){var e=Object(O.a)(m.a.mark((function e(c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),""!=f.name&&""!==f.email&&""!==f.tel){e.next=7;break}h("Please add supplier's name, email and telephone number"),l(!0),setTimeout((function(){l(!1)}),3e3),e.next=9;break;case 7:return e.next=9,p.post("/suppliers",f).then((function(e){t(),n()})).catch((function(e){return console.log(e)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"newCustomerForm",children:[Object(u.jsx)("div",{className:"close",onClick:t,children:Object(u.jsx)("i",{className:"fas fa-times fa-lg"})}),Object(u.jsx)("h3",{children:"Add New Supplier"}),Object(u.jsxs)("form",{action:"",className:"form",children:[Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"name",children:"Supplier's Name"}),Object(u.jsx)("input",{type:"text",name:"name",value:f.name,onChange:y,id:"name"})]}),Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(u.jsx)("input",{type:"email",name:"email",value:f.email,onChange:y,id:"email"})]}),Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"country",children:"Country"}),Object(u.jsx)("input",{type:"text",name:"country",value:f.country,onChange:y,id:"country"})]}),Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"city",children:"Town/City"}),Object(u.jsx)("input",{type:"text",name:"city",value:f.city,onChange:y,id:"city"})]}),Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"street",children:"Street Address"}),Object(u.jsx)("input",{type:"text",name:"street",value:f.street,onChange:y,id:"street"})]}),Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"tel",children:"Telephone"}),Object(u.jsx)("input",{type:"number",name:"tel",value:f.tel,onChange:y,id:"tel"})]}),Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"mobile",children:"Mobile"}),Object(u.jsx)("input",{type:"number",name:"mobile",value:f.mobile,onChange:y,id:"mobile"})]}),Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"fax",children:"Fax"}),Object(u.jsx)("input",{type:"text",name:"fax",value:f.fax,onChange:y,id:"fax"})]}),Object(u.jsx)("div",{}),Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("button",{type:"button",onClick:t,className:"btn",children:"Cancel"}),Object(u.jsx)("button",{type:"button",onClick:function(e){S(e)},className:"btn",children:"Save"})]})]}),Object(u.jsx)(C,{message:b,alert:i})]})};var q=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(""),j=Object(r.a)(o,2),b=j[0],h=j[1],v=Object(c.useState)(!1),f=Object(r.a)(v,2),y=f[0],S=f[1],D=Object(c.useState)(!1),k=Object(r.a)(D,2),A=k[0],T=k[1],P=Object(c.useState)(!1),I=Object(r.a)(P,2),F=I[0],B=I[1],E=Object(c.useState)(!1),R=Object(r.a)(E,2),q=R[0],V=R[1],M=Object(c.useState)(!0),Y=Object(r.a)(M,2),H=Y[0],_=Y[1],Q=Object(c.useState)([]),G=Object(r.a)(Q,2),U=G[0],W=G[1],J=Object(c.useState)([]),z=Object(r.a)(J,2),K=z[0],X=z[1],Z=Object(c.useState)({rebate:"",tradeDiscount:"",cashDiscount:"",valueAddedTax:""}),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ne=Object(c.useState)(g),ce=Object(r.a)(ne,2),ae=ce[0],se=ce[1],ie=Object(c.useState)(""),re=Object(r.a)(ie,2),le=re[0],oe=re[1],de=new Date,ue=de.getDate(),je=de.getMonth(),be=de.getFullYear(),me=new Date("".concat(je+1,"/").concat(ue,"/").concat(be)).toDateString(),Oe=Object(c.useState)("15"),he=Object(r.a)(Oe,2),xe=he[0],pe=he[1];Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var t,n,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=x.a.CancelToken.source(),c=p.get("/products"),a=p.get("/suppliers"),e.next=6,x.a.all([c,a],{cancelToken:n.token}).then((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1];W(n.data),X(c.data.suppliers),_(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 6:return e.abrupt("return",(function(){t=!0,n.cancel("Cancelling request")}));case 7:case"end":return e.stop()}}),e)}))),[]);var ve=Object(c.useState)({name:"",email:"",billingAddress:{country:"",city:"",street:""},contact:{telephone:"",mobile:"",fax:""}}),fe=Object(r.a)(ve,2),Ne=fe[0],ge=fe[1],ye=Object(c.useState)(7.5),Se=Object(r.a)(ye,2),Ce=Se[0],De=Se[1],ke=Ce>36?"100%":"".concat(Ce,"rem"),we=function(e,t){return function(n){var c=ae.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));return se(c)}},Ae=Object(c.useState)([{name:"",amount:""},{name:"",amount:""},{name:"",amount:""},{name:"",amount:""}]),Te=Object(r.a)(Ae,2),Pe=Te[0],Ie=Te[1],Fe=function(e,t){return function(n){var c=Pe.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));Ie(c)}},Be=Object(c.useRef)(null),Ee=function(e){var t=e.target,n=t.name,c=t.value;te((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},Re=Object(c.useState)({date:me,customerName:"",dueDate:function(e){var t=new Date("".concat(je,"/").concat(ue,"/").concat(be));return new Date(t.setDate(t.getDate()+Number(e))).toDateString()}}),Le=Object(r.a)(Re,2),qe=Le[0],Ve=Le[1],Me=ae.map((function(e){return e.amount(e.qty,e.up)})).reduce((function(e,t){return Number(e)+Number(t)}),0),Ye=(Me*(Number(ee.rebate)/100)).toFixed(2),He=Me-Ye,_e=(He*(Number(ee.tradeDiscount)/100)).toFixed(2),Qe=He-_e,Ge=(Qe*(Number(ee.cashDiscount)/100)).toFixed(2),Ue=Qe-Ge,We=(Ue*(Number(ee.valueAddedTax)/100)).toFixed(2),Je=Pe.map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}));function ze(e){var t=Be.current;t&&!t.contains(e.target)&&S(!1)}Object(c.useEffect)((function(){K.filter((function(e){return e.name===le})).map((function(e){return ge(Object(d.a)({},e))}))}),[le]),Object(c.useEffect)((function(){return document.addEventListener("mousedown",ze),function(){document.removeEventListener("mousedown",ze)}}),[]);var Ke=function(e){var t=e.target,n=t.name,c=t.value;Ve((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},Xe=ae.filter((function(e){return""!==e.productName&&""!==e.qty&&""!==e.up})).map((function(e){return{productName:e.productName,description:e.description,qty:e.qty,up:e.up,amount:e.qty*e.up}})),Ze=Pe.filter((function(e){return""!==e.name&&""!==e.amount})),$e={invoiceInput:qe,selectInvoiceTerm:xe,supplierDetails:Ne,data:Xe,additionsAndSubtractions:ee,discountsAndVat:{rebateValue:Ye,tradeDiscountValue:_e,cashDiscountValue:Ge,valueAddedTax:We},otherAdditions:Ze,grossAmount:Me,netPayable:Ue+Number(We)+Je,dueDate:qe.dueDate(xe)},et=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""!==Ne.name&&Xe.length>0?(setTimeout((function(){_(!0)}),500),p.post("/purchaseInvoice",$e).then((function(){t(),n(),_(!1)}))):(h("Please add a supplier and at least one product"),l(!0),setTimeout((function(){l(!1)}),3e3));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"Quotation",children:[Object(u.jsx)("div",{className:"close",onClick:t,children:Object(u.jsx)("i",{className:"fas fa-times fa-lg"})}),Object(u.jsx)("h3",{children:"New Purchase Invoice"}),Object(u.jsxs)("div",{className:"formContainer",children:[Object(u.jsxs)("form",{action:"",method:"post",children:[Object(u.jsxs)("div",{className:"quotationTop",children:[Object(u.jsxs)("div",{className:"date",children:[Object(u.jsx)("label",{htmlFor:"date",children:"Date:"}),Object(u.jsx)("input",{type:"text",name:"date",value:qe.date,id:"date",contentEditable:!1,readOnly:!0})]}),Object(u.jsxs)("div",{className:"select",children:[Object(u.jsx)("label",{htmlFor:"invoiceDuration",children:"Terms"}),Object(u.jsxs)("select",{name:"invoiceDuration",id:"invoiceDuration",onChange:function(e){pe(Number(e.target.value))},value:xe,children:[Object(u.jsx)("option",{value:"",hidden:!0,children:"Select(default: 15)"}),Object(u.jsx)("option",{value:15,children:"15 days"}),Object(u.jsx)("option",{value:30,children:"30 days"}),Object(u.jsx)("option",{value:45,children:"45 days"}),Object(u.jsx)("option",{value:60,children:"60 days"}),Object(u.jsx)("option",{value:75,children:"75 days"}),Object(u.jsx)("option",{value:90,children:"90 days"})]})]}),Object(u.jsxs)("div",{className:"dueDate",children:[Object(u.jsx)("label",{htmlFor:"dueDate",children:"Due Date:"}),Object(u.jsx)("input",{type:"text",id:"dueDate",name:"dueDate",value:qe.dueDate(xe),readOnly:!0})]}),Object(u.jsxs)("div",{className:"invoiceNumber",children:[Object(u.jsx)("label",{htmlFor:"InvoiceNumber",children:"Invoice Number:"}),Object(u.jsx)("input",{type:"text",name:"invoiceNumber",id:"invoiceNumber",value:qe.invoiceNumber,onChange:Ke})]})]}),Object(u.jsxs)("div",{className:"customerDetails",children:[Object(u.jsxs)("div",{ref:Be,className:"customerName",children:[Object(u.jsx)("label",{htmlFor:"customerName",children:"From: "}),Object(u.jsx)("input",{type:"text",value:le,onChange:function(e){oe(e.target.value)},onClick:function(){S(!y)},name:"customerName",className:"autoListItemInput",id:"customerName",placeholder:"Select Supplier"}),y&&Object(u.jsxs)("div",{className:"autoCompleteContainer",children:[Object(u.jsx)("button",{type:"button",onClick:function(){V(!0)},children:"Add New Supplier"}),K.filter((function(e){return!le||(!!e.name.toLowerCase().includes(le.toLowerCase())||void 0)})).map((function(e,t){return Object(u.jsx)("div",{className:"autoListItem",onClick:function(){oe(e.name),S(!1)},tabIndex:"0",children:Object(u.jsx)("p",{children:e.name})},t)}))]})]}),Object(u.jsx)("div",{className:"customerEmail",children:Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Email: "}),null===Ne||void 0===Ne?void 0:Ne.email]})}),Object(u.jsxs)("div",{className:"deliveryAdress",children:[Object(u.jsx)("h4",{children:"Delivery Address & Contact"}),Object(u.jsxs)("div",{className:"addressInfo",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Country: "}),null===Ne||void 0===Ne?void 0:Ne.country]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"City: "}),null===Ne||void 0===Ne?void 0:Ne.city]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Street: "}),null===Ne||void 0===Ne?void 0:Ne.street]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Tel: "}),null===Ne||void 0===Ne?void 0:Ne.telephone]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Mobile: "}),null===Ne||void 0===Ne?void 0:Ne.mobile]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Fax: "}),null===Ne||void 0===Ne?void 0:Ne.fax]})]})]})]}),Object(u.jsxs)("div",{className:"additionalInfo",children:[Object(u.jsx)("div",{className:"textArea",children:Object(u.jsx)("textarea",{name:"additionalInfo",id:"additionalInfo",cols:"60",rows:"6",value:qe.additonalInfo,onChange:Ke,placeholder:"Add additional information to receiver",className:"textArea"})}),Object(u.jsx)("div",{className:"amount",children:Object(u.jsxs)("h3",{children:["Net Payable: ",(Ue+Number(We)+Je).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})})]}),Object(u.jsxs)("div",{className:"itemsContainer",children:[Object(u.jsx)("ul",{children:Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsx)("span",{className:"listTitle",children:"Product Name"}),Object(u.jsx)("span",{className:"listTitle",children:"Description"}),Object(u.jsx)("span",{className:"listTitle",children:"Quantity"}),Object(u.jsx)("span",{className:"listTitle",children:"Unit Price"}),Object(u.jsx)("span",{className:"listTitle",children:"Amount"})]})}),Object(u.jsx)("ul",{style:{height:"".concat(ke),overflow:"hidden"},className:"items",children:ae.map((function(e,t){return Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsxs)("select",{name:"productName",value:e.productName,onChange:we("productName",t),children:[Object(u.jsx)("option",{value:""}),U.map((function(e){return Object(u.jsx)("option",{value:e.productName,children:e.productName})}))]}),Object(u.jsx)("input",{type:"text",name:"description",value:e.description,onChange:we("description",t)}),Object(u.jsx)("input",{type:"number",name:"qty",value:e.qty,onChange:we("qty",t)}),Object(u.jsx)("input",{type:"number",name:"up",value:e.up,onChange:we("up",t)}),Object(u.jsx)("input",{type:"number",name:"amount",value:e.amount(e.qty,e.up),readOnly:!0})]},t)}))})]}),Object(u.jsxs)("div",{className:"summation",children:[Object(u.jsx)("button",{onClick:function(){De((function(e){return e+7.3})),"100%"===ke&&(h("Cannot Add more rows"),l(!0),setTimeout((function(){l(!1)}),3e3))},type:"button",className:"addRows btn",children:"Add Rows"}),Object(u.jsxs)("h3",{className:"amount",children:["Gross Amount: ",Me.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})]}),Object(u.jsxs)("div",{className:"deductionsAndAdditions",children:[Object(u.jsxs)("div",{className:"hideAndShow",children:[Object(u.jsx)("h5",{children:"Deductions"}),Object(u.jsx)("button",{onClick:function(){B(!F)},type:"button",children:F?"Hide":"Show"})]}),Object(u.jsx)("div",{className:"deductions",children:F&&Object(u.jsxs)("ul",{className:"deductions",children:[Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{className:"elements",children:"Elements"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Rate"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Amount"})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Rebate"}),Object(u.jsx)("input",{type:"number",name:"rebate",id:"rebate",onChange:function(e){Ee(e)},value:ee.rebate}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Ye.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Commercial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:He.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Trade Discount"}),Object(u.jsx)("input",{type:"number",name:"tradeDiscount",id:"tradeDiscount",onChange:function(e){Ee(e)},value:ee.tradeDiscount}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:_e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Commercial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:Qe.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Cash Discount"}),Object(u.jsx)("input",{type:"number",name:"cashDiscount",id:"cashDiscount",onChange:function(e){Ee(e)},value:ee.cashDiscount}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Ge.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Financial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:Ue.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]})]})}),Object(u.jsx)("ul",{className:"deductions",children:Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("li",{className:"deductItem additionItem",children:[Object(u.jsx)("span",{children:"Tax (VAT) Rate"}),Object(u.jsx)("input",{type:"number",name:"valueAddedTax",id:"valueAddedTax",onChange:function(e){Ee(e)},value:ee.valueAddedTax}),Object(u.jsx)("span",{children:We.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})})}),Object(u.jsxs)("div",{className:"additions",children:[Object(u.jsxs)("div",{className:"hideAndShow",children:[Object(u.jsx)("h5",{children:"Additions"}),Object(u.jsx)("button",{onClick:function(){T(!A)},type:"button",children:A?"Hide":"Show"})]}),A&&Object(u.jsxs)("ul",{className:"otherAdditions",children:[Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("li",{className:"additionItem",children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Element"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Amount"})})]})}),Object(u.jsx)("div",{className:"otherAdditions",children:Pe.map((function(e,t){return Object(u.jsxs)("li",{className:"additionItem",children:[Object(u.jsx)("input",{type:"text",value:e.name,onChange:Fe("name",t),name:"name"}),Object(u.jsx)("input",{type:"number",value:e.amount,onChange:Fe("amount",t),name:"amount"})]},t)}))}),Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("div",{className:"additionItem",children:[Object(u.jsx)("h5",{children:"Total Additions"}),Object(u.jsx)("h5",{children:Je.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})})]})]}),Object(u.jsxs)("div",{className:"netPay",children:[Object(u.jsx)("h3",{children:"Net Payable"}),Object(u.jsx)("h3",{children:(Ue+Number(We)+Je).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]}),Object(u.jsxs)("div",{className:"saveOptions",children:[Object(u.jsx)("button",{onClick:t,type:"button",className:"addRows btn",children:"Cancel"}),Object(u.jsx)("button",{onClick:et,type:"button",className:"addRows btn",children:"Save"}),Object(u.jsx)("button",{onClick:et,type:"button",className:"addRows btn",children:"Save and Send"})]})]}),q&&Object(u.jsx)(L,{onClick:function(){V(!1)}})]}),H&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{message:b,alert:i})]})};var V=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(!1),j=Object(r.a)(o,2),b=j[0],h=j[1],v=Object(c.useState)(!1),f=Object(r.a)(v,2),y=f[0],S=f[1],D=Object(c.useState)(!1),k=Object(r.a)(D,2),A=k[0],T=k[1],P=Object(c.useState)(!0),I=Object(r.a)(P,2),F=I[0],B=I[1],E=Object(c.useState)(!1),R=Object(r.a)(E,2),q=R[0],V=R[1],M=Object(c.useState)(""),Y=Object(r.a)(M,2),H=Y[0],_=Y[1],Q=Object(c.useState)([]),G=Object(r.a)(Q,2),U=G[0],W=G[1],J=Object(c.useState)([]),z=Object(r.a)(J,2),K=z[0],X=z[1],Z=Object(c.useState)([]),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ne=Object(c.useState)({rebate:"",tradeDiscount:"",cashDiscount:"",valueAddedTax:""}),ce=Object(r.a)(ne,2),ae=ce[0],se=ce[1],ie=Object(c.useState)(g),re=Object(r.a)(ie,2),le=re[0],oe=re[1],de=Object(c.useState)(""),ue=Object(r.a)(de,2),je=ue[0],be=ue[1],me=new Date,Oe=me.getDate(),he=me.getMonth(),xe=me.getFullYear(),pe=new Date("".concat(he+1,"/").concat(Oe,"/").concat(xe)).toDateString(),ve=Object(c.useState)({name:"",email:"",billingAddress:{country:"",city:"",street:""},contact:{telephone:"",mobile:"",fax:""}}),fe=Object(r.a)(ve,2),Ne=fe[0],ge=fe[1],ye=Object(c.useState)(7.5),Se=Object(r.a)(ye,2),Ce=Se[0],De=Se[1],ke=Ce>36?"100%":"".concat(Ce,"rem");Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var t,n,c,a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=x.a.CancelToken.source(),c=p.get("/products"),a=p.get("/suppliers"),s=p.get("/receipts"),e.next=7,x.a.all([c,a,s],{cancelToken:n.token}).then((function(e){var t=Object(r.a)(e,3),n=t[0],c=t[1],a=t[2];X(n.data),W(c.data.suppliers),B(!1),te(a.data)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 7:return e.abrupt("return",(function(){t=!0,n.cancel("Cancelling request")}));case 8:case"end":return e.stop()}}),e)}))),[]);var we=function(e,t){return function(n){var c=le.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));oe(c)}},Ae=Object(c.useState)([{name:"",amount:""},{name:"",amount:""},{name:"",amount:""},{name:"",amount:""}]),Te=Object(r.a)(Ae,2),Pe=Te[0],Ie=Te[1],Fe=function(e,t){return function(n){var c=Pe.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));Ie(c)}},Be=Object(c.useRef)(null),Ee=function(e){var t=e.target,n=t.name,c=t.value;se((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},Re=Object(c.useState)({date:pe,receiptNumber:"00".concat(ee.length+1),supplierName:"",meansOfPayment:"cash"}),Le=Object(r.a)(Re,2),qe=Le[0],Ve=Le[1],Me=le.map((function(e){return e.amount(e.qty,e.up)})).reduce((function(e,t){return Number(e)+Number(t)}),0),Ye=(Me*(Number(ae.rebate)/100)).toFixed(2),He=Me-Ye,_e=(He*(Number(ae.tradeDiscount)/100)).toFixed(2),Qe=He-_e,Ge=(Qe*(Number(ae.cashDiscount)/100)).toFixed(2),Ue=Qe-Ge,We=(Ue*(Number(ae.valueAddedTax)/100)).toFixed(2),Je=Pe.map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}));function ze(e){var t=Be.current;t&&!t.contains(e.target)&&l(!1)}Object(c.useEffect)((function(){U.filter((function(e){return e.name===je})).map((function(e){return ge(Object(d.a)({},e))}))}),[je]),Object(c.useEffect)((function(){return document.addEventListener("mousedown",ze),function(){document.removeEventListener("mousedown",ze)}}),[]);var Ke=function(e){var t=e.target,n=t.name,c=t.value;Ve((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},Xe=le.filter((function(e){return""!==e.productName&&""!==e.qty&&""!==e.up})).map((function(e){return{productName:e.productName,description:e.description,qty:e.qty,up:e.up,amount:e.qty*e.up}})),Ze=Pe.filter((function(e){return""!==e.name&&""!==e.amount})),$e={source:"cash purchase",receiptInput:qe,supplierDetails:Ne,data:Xe,additionsAndSubtractions:ae,discountsAndVat:{rebateValue:Ye,tradeDiscountValue:_e,cashDiscountValue:Ge,valueAddedTax:We},otherAdditions:Ze,meansOfPayment:qe.meansOfPayment,grossAmount:Me,netPayable:Ue+Number(We)+Je},et=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""!==Ne.name&&Xe.length>0?(setTimeout((function(){B(!0)}),500),p.post("/receipts",$e).then((function(){t(),n(),B(!1)}))):(_("Please add at least one product and a supplier"),V(!0),setTimeout((function(){V(!1)}),3e3));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"Quotation",children:[Object(u.jsx)("div",{className:"close",children:Object(u.jsx)("i",{className:"fas fa-times fa-lg",onClick:t})}),Object(u.jsx)("h3",{children:"New Purchase Receipt"}),Object(u.jsx)("div",{className:"formContainer",children:Object(u.jsxs)("form",{action:"",method:"post",children:[Object(u.jsxs)("div",{className:"quotationTop",children:[Object(u.jsxs)("div",{className:"date",children:[Object(u.jsx)("label",{htmlFor:"date",children:"Date:"}),Object(u.jsx)("input",{type:"text",name:"date",value:qe.date,id:"date",readOnly:!0})]}),Object(u.jsxs)("div",{className:"meansOfPayment",children:[Object(u.jsx)("label",{htmlFor:"meansOfPayment",children:"Means of Payment"}),Object(u.jsxs)("select",{name:"meansOfPayment",id:"meansOfPayment",value:qe.meansOfPayment,onChange:Ke,style:{borderRadius:"5px",marginLeft:"0.3rem"},children:[Object(u.jsx)("option",{value:"cash",children:"Default (Cash)"}),Object(u.jsx)("option",{value:"bank",children:"Bank"}),Object(u.jsx)("option",{value:"mobileMoney",children:"Mobile Money"})]})]}),Object(u.jsxs)("div",{className:"receiptNumber",children:[Object(u.jsx)("label",{htmlFor:"receiptNumber",children:"Receipt Number:"}),Object(u.jsx)("input",{type:"text",name:"receiptNumber",id:"receiptNumber",value:qe.receiptNumber,readOnly:!0})]})]}),Object(u.jsxs)("div",{className:"customerDetails",children:[Object(u.jsxs)("div",{ref:Be,className:"customerName",children:[Object(u.jsx)("label",{htmlFor:"supplierName",children:"Supplier:* "}),Object(u.jsx)("input",{type:"text",value:je,onChange:function(e){be(e.target.value)},onClick:function(){l(!i)},name:"supplierName",className:"autoListItemInput",id:"supplierName",placeholder:"Select Supplier"}),i&&Object(u.jsxs)("div",{className:"autoCompleteContainer",children:[Object(u.jsx)("button",{type:"button",onClick:function(){T(!0)},children:"Add New Supplier"}),null===U||void 0===U?void 0:U.filter((function(e){return!je||(!!e.name.toLowerCase().includes(je.toLowerCase())||void 0)})).map((function(e,t){return Object(u.jsx)("div",{className:"autoListItem",onClick:function(){be(e.name),l(!1)},tabIndex:"0",children:Object(u.jsx)("p",{children:e.name})},t)}))]})]}),Object(u.jsx)("div",{className:"customerEmail",children:Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Email: "}),null===Ne||void 0===Ne?void 0:Ne.email]})}),Object(u.jsxs)("div",{className:"deliveryAdress",children:[Object(u.jsx)("h4",{children:"Delivery Address & Contact"}),Object(u.jsxs)("div",{className:"addressInfo",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Country: "}),null===Ne||void 0===Ne?void 0:Ne.country]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"City: "}),null===Ne||void 0===Ne?void 0:Ne.city]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Street: "}),null===Ne||void 0===Ne?void 0:Ne.street]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Tel: "}),null===Ne||void 0===Ne?void 0:Ne.telephone]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Mobile: "}),null===Ne||void 0===Ne?void 0:Ne.mobile]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Fax: "}),null===Ne||void 0===Ne?void 0:Ne.fax]})]})]})]}),Object(u.jsxs)("div",{className:"additionalInfo",children:[Object(u.jsx)("div",{className:"textArea",children:Object(u.jsx)("textarea",{name:"additionalInfo",id:"additionalInfo",cols:"60",rows:"6",value:qe.additonalInfo,onChange:Ke,placeholder:"Add additional information to receiver",className:"textArea"})}),Object(u.jsx)("div",{className:"amount",children:Object(u.jsxs)("h3",{children:["Net Payable: ",(Ue+Number(We)+Je).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})})]}),Object(u.jsxs)("div",{className:"itemsContainer",children:[Object(u.jsx)("ul",{children:Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsx)("span",{className:"listTitle",children:"Product Name"}),Object(u.jsx)("span",{className:"listTitle",children:"Description"}),Object(u.jsx)("span",{className:"listTitle",children:"Quantity"}),Object(u.jsx)("span",{className:"listTitle",children:"Unit Price"}),Object(u.jsx)("span",{className:"listTitle",children:"Amount"})]})}),Object(u.jsx)("ul",{style:{height:"".concat(ke),overflow:"hidden"},className:"items",children:le.map((function(e,t){return Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsxs)("select",{name:"productName",id:"productName",value:e.productName,onChange:we("productName",t),children:[Object(u.jsx)("option",{children:" "}),K.map((function(e){return Object(u.jsx)("option",{value:e.productName,children:e.productName})}))]}),Object(u.jsx)("input",{type:"text",name:"description",value:e.description,onChange:we("description",t)}),Object(u.jsx)("input",{type:"number",name:"qty",value:e.qty,onChange:we("qty",t)}),Object(u.jsx)("input",{type:"number",name:"up",value:e.up,onChange:we("up",t)}),Object(u.jsx)("input",{type:"number",name:"amount",value:e.amount(e.qty,e.up),readOnly:!0})]},t)}))})]}),Object(u.jsxs)("div",{className:"summation",children:[Object(u.jsx)("button",{onClick:function(){De((function(e){return e+7.3})),"100%"===ke&&q("Cannot add more rows.")},type:"button",className:"addRows btn",children:"Add Rows"}),Object(u.jsxs)("h3",{className:"amount",children:["Gross Amount: ",Me.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})]}),Object(u.jsxs)("div",{className:"deductionsAndAdditions",children:[Object(u.jsxs)("div",{className:"hideAndShow",children:[Object(u.jsx)("h5",{children:"Deductions"}),Object(u.jsx)("button",{onClick:function(){S(!y)},type:"button",children:y?"Hide":"Show"})]}),Object(u.jsx)("div",{className:"deductions",children:y&&Object(u.jsxs)("ul",{className:"deductions",children:[Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{className:"elements",children:"Elements"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Rate"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Amount"})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Rebate"}),Object(u.jsx)("input",{type:"number",name:"rebate",id:"rebate",onChange:function(e){Ee(e)},value:ae.rebate}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Ye.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Commercial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:He.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Trade Discount"}),Object(u.jsx)("input",{type:"number",name:"tradeDiscount",id:"tradeDiscount",onChange:function(e){Ee(e)},value:ae.tradeDiscount}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:_e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Commercial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:Qe.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Cash Discount"}),Object(u.jsx)("input",{type:"number",name:"cashDiscount",id:"cashDiscount",onChange:function(e){Ee(e)},value:ae.cashDiscount}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Ge.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Financial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:Ue.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]})]})}),Object(u.jsx)("ul",{className:"deductions",children:Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("li",{className:"deductItem additionItem",children:[Object(u.jsx)("span",{children:"Tax (VAT) Rate"}),Object(u.jsx)("input",{type:"number",name:"valueAddedTax",id:"valueAddedTax",onChange:function(e){Ee(e)},value:ae.valueAddedTax}),Object(u.jsx)("span",{children:We.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})})}),Object(u.jsxs)("div",{className:"additions",children:[Object(u.jsxs)("div",{className:"hideAndShow",children:[Object(u.jsx)("h5",{children:"Additions"}),Object(u.jsx)("button",{onClick:function(){h(!b)},type:"button",children:b?"Hide":"Show"})]}),b&&Object(u.jsxs)("ul",{className:"otherAdditions",children:[Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("li",{className:"additionItem",children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Element"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Amount"})})]})}),Object(u.jsx)("div",{className:"otherAdditions",children:Pe.map((function(e,t){return Object(u.jsxs)("li",{className:"additionItem",children:[Object(u.jsx)("input",{type:"text",value:e.name,onChange:Fe("name",t),name:"name"}),Object(u.jsx)("input",{type:"number",value:e.amount,onChange:Fe("amount",t),name:"amount"})]},t)}))}),Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("div",{className:"additionItem",children:[Object(u.jsx)("h5",{children:"Total Additions"}),Object(u.jsx)("h5",{children:Je.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})})]})]}),Object(u.jsxs)("div",{className:"netPay",children:[Object(u.jsx)("h3",{children:"Net Payable"}),Object(u.jsx)("h3",{children:(Ue+Number(We)+Je).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]}),Object(u.jsxs)("div",{className:"saveOptions",children:[Object(u.jsx)("button",{onClick:t,type:"button",className:"addRows btn",children:"Cancel"}),Object(u.jsx)("button",{onClick:function(){et(),console.log("Save Button Clicked")},type:"button",className:"addRows btn",children:"Save"}),Object(u.jsx)("button",{onClick:function(){et(),console.log("Save and send Button Clicked")},type:"button",className:"addRows btn",children:"Save and Send"})]})]})}),A&&Object(u.jsx)(L,{onClick:function(){T(!1)}}),F&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:q,message:H})]})};var M=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(!1),j=Object(r.a)(o,2),b=j[0],h=j[1],v=Object(c.useState)(!0),f=Object(r.a)(v,2),g=f[0],y=f[1],S=Object(c.useState)(!1),D=Object(r.a)(S,2),k=D[0],A=D[1],T=Object(c.useState)(""),P=Object(r.a)(T,2),I=P[0],F=P[1],B=Object(c.useState)(""),E=Object(r.a)(B,2),R=E[0],q=E[1],V=Object(c.useState)([]),M=Object(r.a)(V,2),Y=M[0],H=M[1],_=Object(c.useState)([]),Q=Object(r.a)(_,2),G=(Q[0],Q[1]),U=Object(c.useState)([]),W=Object(r.a)(U,2),J=W[0],z=W[1],K=new Date,X=K.getDate(),Z=K.getMonth(),$=K.getFullYear(),ee=new Date("".concat(Z,"/").concat(X,"/").concat($)).toDateString(),te=Object(c.useState)({name:"",email:"",billingAddress:{country:"",city:"",street:""},contact:{telephone:"",mobile:"",fax:""}}),ne=Object(r.a)(te,2),ce=ne[0],ae=ne[1],se=Object(c.useRef)(null),ie=Object(c.useState)({date:ee,meansOfPayment:"cash"}),re=Object(r.a)(ie,2),le=re[0],oe=re[1],de=Object(c.useState)([]),ue=Object(r.a)(de,2),je=ue[0],be=ue[1];function me(e){var t=se.current;t&&!t.contains(e.target)&&l(!1)}Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var t,n,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=x.a.CancelToken.source(),c=p.get("/suppliers"),a=p.get("/purchaseInvoices"),e.next=6,x.a.all([c,a],{cancelToken:n.token}).then((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1];H(n.data.suppliers),G(c.data),z(n.data.creditors),y(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 6:return e.abrupt("return",(function(){t=!0,n.cancel("Cancelling request")}));case 7:case"end":return e.stop()}}),e)}))),[]),Object(c.useEffect)((function(){Y.filter((function(e){return e.name===R})).map((function(e){return ae(Object(d.a)({},e))}))}),[R]),Object(c.useEffect)((function(){return document.addEventListener("mousedown",me),function(){document.removeEventListener("mousedown",me)}}),[]),Object(c.useEffect)((function(){var e=null===J||void 0===J?void 0:J.filter((function(e){return e.supplierName===R})).map((function(e){return Object(d.a)(Object(d.a)({},e),{},{amountToPay:""})}));""!==R&&be(e)}),[R]);var Oe=function(e,t){return function(n){var c=je.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));be(c)}},he=je.map((function(e){return e.amountToPay})).reduce((function(e,t){return Number(e)+Number(t)}),0),xe={source:"make payment",supplierDetails:ce,makePaymentInput:le,template:je,totalToPay:he},pe=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===he?(F("Please add an amount to pay"),A(!0),setTimeout((function(){A(!1)}),3e3)):(setTimeout((function(){y(!0)}),500),p.post("/receivePayment",xe).then((function(){t(),n(),y(!1)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"Quotation",children:[Object(u.jsx)("div",{className:"close",onClick:t,children:Object(u.jsx)("i",{className:"fas fa-times fa-lg"})}),Object(u.jsx)("h3",{children:"Make Payment To Supplier"}),Object(u.jsx)("div",{className:"formContainer",children:Object(u.jsxs)("form",{action:"",method:"post",children:[Object(u.jsxs)("div",{className:"quotationTop",style:{width:"70%",margin:"0 auto"},children:[Object(u.jsxs)("div",{className:"date",children:[Object(u.jsx)("label",{htmlFor:"date",children:"Date:"}),Object(u.jsx)("input",{type:"text",name:"date",value:le.date,id:"date",contentEditable:!1,readOnly:!0})]}),Object(u.jsxs)("div",{className:"meansOfPayment",children:[Object(u.jsx)("label",{htmlFor:"meansOfPayment",children:"Means of Payment"}),Object(u.jsxs)("select",{name:"meansOfPayment",id:"meansOfPayment",value:le.meansOfPayment,onChange:function(e){var t=e.target,n=t.name,c=t.value;oe((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},style:{borderRadius:"5px",marginLeft:"0.3rem"},children:[Object(u.jsx)("option",{value:"Cash",children:"Default (Cash)"}),Object(u.jsx)("option",{value:"bank",children:"Bank"}),Object(u.jsx)("option",{value:"mobileMoney",children:"Mobile Money"})]})]})]}),Object(u.jsxs)("div",{className:"customerDetails",style:{width:"70%",margin:"0 auto"},children:[Object(u.jsxs)("div",{ref:se,className:"customerName",children:[Object(u.jsx)("label",{htmlFor:"customerName",children:"To (Supplier): "}),Object(u.jsx)("input",{type:"text",value:R,onChange:function(e){q(e.target.value)},onClick:function(){l(!i)},name:"supplierName",className:"autoListItemInput",id:"supplierName",placeholder:"Select Supplier"}),i&&Object(u.jsxs)("div",{className:"autoCompleteContainer",children:[Object(u.jsx)("button",{type:"button",onClick:function(){h(!0)},children:"Add New Supplier"}),Y.filter((function(e){return!R||(!!e.name.toLowerCase().includes(R.toLowerCase())||void 0)})).map((function(e,t){return Object(u.jsx)("div",{className:"autoListItem",onClick:function(){q(e.name),l(!1)},tabIndex:"0",children:Object(u.jsx)("p",{children:e.name})},t)}))]})]}),Object(u.jsx)("div",{className:"customerEmail",children:Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Email: "}),null===ce||void 0===ce?void 0:ce.email]})})]}),Object(u.jsx)("div",{className:"amount",style:{width:"70%",textAlign:"right",margin:"0 auto",backgroundColor:"rgba(211, 211, 211, 0.5)"},children:Object(u.jsxs)("h3",{className:"totalToPay",children:["Total: ",he.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),"  "]})}),Object(u.jsx)("div",{children:""===R?null:Object(u.jsx)("div",{className:"allDebtorsContainer",children:Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"invoiceListHead",children:[Object(u.jsx)("th",{children:"Total Debt"}),Object(u.jsx)("th",{children:"Total Paid"}),Object(u.jsx)("th",{children:"Balance Owed To"}),Object(u.jsx)("th",{children:"Amount To Pay"})]})}),Object(u.jsx)("tbody",{children:je.map((function(e,t){var n,c,a;return Object(u.jsxs)("tr",{className:"invoiceListbody",children:[Object(u.jsx)("td",{children:(null===(n=Number(e.totalDebt))||void 0===n?void 0:n.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:(null===(c=Number(e.totalPaid))||void 0===c?void 0:c.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:(null===(a=Number(e.balanceDue))||void 0===a?void 0:a.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{type:"number",name:"amountToPay",id:"amountToPay",value:le.invoiceNumber,onChange:Oe("amountToPay",t)})})]},t)}))})]})})}),Object(u.jsx)("div",{className:"totalToPay",style:{width:"70%",textAlign:"right",margin:"0 auto",backgroundColor:"rgba(211, 211, 211, 0.5)"},children:Object(u.jsxs)("h3",{className:"totalToPay",children:["Total: ",he.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")," "]})}),Object(u.jsxs)("div",{className:"saveOptions",children:[Object(u.jsx)("button",{onClick:t,type:"button",className:"addRows btn",children:"Cancel"}),Object(u.jsx)("button",{onClick:function(){pe()},type:"button",className:"addRows btn",children:"Save"}),Object(u.jsx)("button",{onClick:function(){pe()},type:"button",className:"addRows btn",children:"Save and Send"})]})]})}),b&&Object(u.jsx)(L,{onClick:function(){h(!1)}}),g&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:k,message:I})]})};var Y=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(""),j=Object(r.a)(o,2),b=j[0],h=j[1],v=Object(c.useState)(!1),f=Object(r.a)(v,2),y=f[0],S=f[1],D=Object(c.useState)(!1),k=Object(r.a)(D,2),A=k[0],T=k[1],P=Object(c.useState)(!1),I=Object(r.a)(P,2),F=I[0],B=I[1],E=Object(c.useState)(!1),R=Object(r.a)(E,2),q=R[0],V=R[1],M=Object(c.useState)(!0),Y=Object(r.a)(M,2),H=Y[0],_=Y[1],Q=Object(c.useState)([]),G=Object(r.a)(Q,2),U=G[0],W=G[1],J=Object(c.useState)([]),z=Object(r.a)(J,2),K=z[0],X=z[1],Z=Object(c.useState)([]),$=Object(r.a)(Z,2),ee=$[0],te=($[1],Object(c.useState)({rebate:"",tradeDiscount:"",cashDiscount:"",valueAddedTax:""})),ne=Object(r.a)(te,2),ce=ne[0],ae=ne[1],se=Object(c.useState)(g),ie=Object(r.a)(se,2),re=ie[0],le=ie[1],oe=Object(c.useState)(""),de=Object(r.a)(oe,2),ue=de[0],je=de[1],be=new Date,me=be.getDate(),Oe=be.getMonth(),he=be.getFullYear(),xe=new Date("".concat(Oe+1,"/").concat(me,"/").concat(he)).toDateString(),pe=Object(c.useState)("15"),ve=Object(r.a)(pe,2),fe=ve[0],Ne=ve[1];Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var t,n,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=x.a.CancelToken.source(),c=p.get("/products"),a=p.get("/suppliers"),e.next=6,x.a.all([c,a],{cancelToken:n.token}).then((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1];X(n.data),W(c.data.suppliers),_(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 6:return e.abrupt("return",(function(){t=!0,n.cancel("Cancelling request")}));case 7:case"end":return e.stop()}}),e)}))),[]);var ge=Object(c.useState)({name:"",email:"",billingAddress:{country:"",city:"",street:""},contact:{telephone:"",mobile:"",fax:""}}),ye=Object(r.a)(ge,2),Se=ye[0],Ce=ye[1],De=Object(c.useState)(7.5),ke=Object(r.a)(De,2),we=ke[0],Ae=ke[1],Te=we>36?"100%":"".concat(we,"rem"),Pe=function(e,t){return function(n){var c=re.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));le(c)}},Ie=Object(c.useState)([{name:"",amount:""},{name:"",amount:""},{name:"",amount:""},{name:"",amount:""}]),Fe=Object(r.a)(Ie,2),Be=Fe[0],Ee=Fe[1],Re=function(e,t){return function(n){var c=Be.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));Ee(c)}},Le=Object(c.useRef)(null),qe=function(e){var t=e.target,n=t.name,c=t.value;ae((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},Ve=Object(c.useState)({date:xe,orderNumber:"00".concat(ee.length+1),supplierName:"",dueDate:function(e){var t=new Date("".concat(Oe,"/").concat(me,"/").concat(he));return new Date(t.setDate(t.getDate()+Number(e))).toDateString()}}),Me=Object(r.a)(Ve,2),Ye=Me[0],He=Me[1],_e=re.map((function(e){return e.amount(e.qty,e.up)})).reduce((function(e,t){return Number(e)+Number(t)}),0),Qe=(_e*(Number(ce.rebate)/100)).toFixed(2),Ge=_e-Qe,Ue=(Ge*(Number(ce.tradeDiscount)/100)).toFixed(2),We=Ge-Ue,Je=(We*(Number(ce.cashDiscount)/100)).toFixed(2),ze=We-Je,Ke=(ze*(Number(ce.valueAddedTax)/100)).toFixed(2),Xe=Be.map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}));function Ze(e){var t=Le.current;t&&!t.contains(e.target)&&S(!1)}Object(c.useEffect)((function(){U.filter((function(e){return e.name===ue})).map((function(e){return Ce(Object(d.a)({},e))}))}),[ue]),Object(c.useEffect)((function(){return document.addEventListener("mousedown",Ze),function(){document.removeEventListener("mousedown",Ze)}}),[]);var $e=re.filter((function(e){return""!==e.productName&&""!==e.qty&&""!==e.up})).map((function(e){return{productName:e.productName,description:e.description,qty:e.qty,up:e.up,amount:e.qty*e.up}})),et=Be.filter((function(e){return""!==e.name&&""!==e.amount})),tt={orderInput:Ye,selectInvoiceTerm:fe,supplierDetails:Se,data:$e,additionsAndSubtractions:ce,discountsAndVat:{rebateValue:Qe,tradeDiscountValue:Ue,cashDiscountValue:Je,valueAddedTax:Ke},otherAdditions:et,grossAmount:_e,netPayable:ze+Number(Ke)+Xe,dueDate:Ye.dueDate(fe)},nt=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""!==Se.name&&$e.length>0?(setTimeout((function(){_(!0)}),500),p.post("/purchaseOrders",tt).then((function(e){console.log(e.data),t(),n(),_(!1)}))):(h("Please add a supplier and at least one product"),l(!0),setTimeout((function(){l(!1)}),3e3));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"Quotation",children:[Object(u.jsx)("div",{className:"close",onClick:t,children:Object(u.jsx)("i",{className:"fas fa-times fa-lg"})}),Object(u.jsx)("h3",{children:"New Purchase Order"}),Object(u.jsxs)("div",{className:"formContainer",children:[Object(u.jsxs)("form",{action:"",method:"post",children:[Object(u.jsxs)("div",{className:"quotationTop",children:[Object(u.jsxs)("div",{className:"date",children:[Object(u.jsx)("label",{htmlFor:"date",children:"Date:"}),Object(u.jsx)("input",{type:"text",name:"date",value:Ye.date,id:"date",contentEditable:!1,readOnly:!0})]}),Object(u.jsxs)("div",{className:"select",children:[Object(u.jsx)("label",{htmlFor:"invoiceDuration",children:"Terms"}),Object(u.jsxs)("select",{name:"invoiceDuration",id:"invoiceDuration",onChange:function(e){Ne(Number(e.target.value))},value:fe,children:[Object(u.jsx)("option",{value:"",hidden:!0,children:"Select(default: 15)"}),Object(u.jsx)("option",{value:15,children:"15 days"}),Object(u.jsx)("option",{value:30,children:"30 days"}),Object(u.jsx)("option",{value:45,children:"45 days"}),Object(u.jsx)("option",{value:60,children:"60 days"}),Object(u.jsx)("option",{value:75,children:"75 days"}),Object(u.jsx)("option",{value:90,children:"90 days"})]})]}),Object(u.jsxs)("div",{className:"dueDate",children:[Object(u.jsx)("label",{htmlFor:"dueDate",children:"Due Date:"}),Object(u.jsx)("input",{type:"text",id:"dueDate",name:"dueDate",value:Ye.dueDate(fe),readOnly:!0})]}),Object(u.jsxs)("div",{className:"invoiceNumber",children:[Object(u.jsx)("label",{htmlFor:"InvoiceNumber",children:"Order Number:"}),Object(u.jsx)("input",{type:"text",name:"orderNumber",id:"invoiceNumber",value:Ye.orderNumber,readOnly:!0})]})]}),Object(u.jsxs)("div",{className:"customerDetails",children:[Object(u.jsxs)("div",{ref:Le,className:"customerName",children:[Object(u.jsx)("label",{htmlFor:"customerName",children:"Receiver: "}),Object(u.jsx)("input",{type:"text",value:ue,onChange:function(e){je(e.target.value)},onClick:function(){S(!y)},name:"customerName",className:"autoListItemInput",id:"customerName",placeholder:"Select Customer"}),y&&Object(u.jsxs)("div",{className:"autoCompleteContainer",children:[Object(u.jsx)("button",{type:"button",onClick:function(){V(!0)},children:"Add New Supplier"}),null===U||void 0===U?void 0:U.filter((function(e){return!ue||(!!e.name.toLowerCase().includes(ue.toLowerCase())||void 0)})).map((function(e,t){return Object(u.jsx)("div",{className:"autoListItem",onClick:function(){je(e.name),S(!1)},tabIndex:"0",children:Object(u.jsx)("p",{children:e.name})},t)}))]})]}),Object(u.jsx)("div",{className:"customerEmail",children:Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Email: "}),null===Se||void 0===Se?void 0:Se.email]})}),Object(u.jsxs)("div",{className:"deliveryAdress",children:[Object(u.jsx)("h4",{children:"Delivery Address & Contact"}),Object(u.jsxs)("div",{className:"addressInfo",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Country: "}),null===Se||void 0===Se?void 0:Se.country]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"City: "}),null===Se||void 0===Se?void 0:Se.city]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Street: "}),null===Se||void 0===Se?void 0:Se.street]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Tel: "}),null===Se||void 0===Se?void 0:Se.telephone]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Mobile: "}),null===Se||void 0===Se?void 0:Se.mobile]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Fax: "}),null===Se||void 0===Se?void 0:Se.fax]})]})]})]}),Object(u.jsxs)("div",{className:"additionalInfo",children:[Object(u.jsx)("div",{className:"textArea",children:Object(u.jsx)("textarea",{name:"additionalInfo",id:"additionalInfo",cols:"60",rows:"6",value:Ye.additonalInfo,onChange:function(e){var t=e.target,n=t.name,c=t.value;He((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},placeholder:"Add additional information to receiver",className:"textArea"})}),Object(u.jsx)("div",{className:"amount",children:Object(u.jsxs)("h3",{children:["Net Payable: ",(ze+Number(Ke)+Xe).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})})]}),Object(u.jsxs)("div",{className:"itemsContainer",children:[Object(u.jsx)("ul",{children:Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsx)("span",{className:"listTitle",children:"Product Name"}),Object(u.jsx)("span",{className:"listTitle",children:"Description"}),Object(u.jsx)("span",{className:"listTitle",children:"Quantity"}),Object(u.jsx)("span",{className:"listTitle",children:"Unit Price"}),Object(u.jsx)("span",{className:"listTitle",children:"Amount"})]})}),Object(u.jsx)("ul",{style:{height:"".concat(Te),overflow:"hidden"},className:"items",children:re.map((function(e,t){return Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsxs)("select",{name:"productName",value:e.productName,onChange:Pe("productName",t),children:[Object(u.jsx)("option",{value:""}),K.map((function(e){return Object(u.jsx)("option",{value:e.productName,children:e.productName})}))]}),Object(u.jsx)("input",{type:"text",name:"description",value:e.description,onChange:Pe("description",t)}),Object(u.jsx)("input",{type:"number",name:"qty",value:e.qty,onChange:Pe("qty",t)}),Object(u.jsx)("input",{type:"number",name:"up",value:e.up,onChange:Pe("up",t)}),Object(u.jsx)("input",{type:"number",name:"amount",value:e.amount(e.qty,e.up),readOnly:!0})]},t)}))})]}),Object(u.jsxs)("div",{className:"summation",children:[Object(u.jsx)("button",{onClick:function(){Ae((function(e){return e+7.3})),"100%"===Te&&(h("Cannot Add more rows"),l(!0),setTimeout((function(){l(!1)}),3e3))},type:"button",className:"addRows btn",children:"Add Rows"}),Object(u.jsxs)("h3",{className:"amount",children:["Gross Amount: ",_e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})]}),Object(u.jsxs)("div",{className:"deductionsAndAdditions",children:[Object(u.jsxs)("div",{className:"hideAndShow",children:[Object(u.jsx)("h5",{children:"Deductions"}),Object(u.jsx)("button",{onClick:function(){B(!F)},type:"button",children:F?"Hide":"Show"})]}),Object(u.jsx)("div",{className:"deductions",children:F&&Object(u.jsxs)("ul",{className:"deductions",children:[Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{className:"elements",children:"Elements"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Rate"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Amount"})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Rebate"}),Object(u.jsx)("input",{type:"number",name:"rebate",id:"rebate",onChange:function(e){qe(e)},value:ce.rebate}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Qe.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Commercial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:Ge.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Trade Discount"}),Object(u.jsx)("input",{type:"number",name:"tradeDiscount",id:"tradeDiscount",onChange:function(e){qe(e)},value:ce.tradeDiscount}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Ue.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Commercial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:We.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Cash Discount"}),Object(u.jsx)("input",{type:"number",name:"cashDiscount",id:"cashDiscount",onChange:function(e){qe(e)},value:ce.cashDiscount}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Je.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Financial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:ze.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]})]})}),Object(u.jsx)("ul",{className:"deductions",children:Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("li",{className:"deductItem additionItem",children:[Object(u.jsx)("span",{children:"Tax (VAT) Rate"}),Object(u.jsx)("input",{type:"number",name:"valueAddedTax",id:"valueAddedTax",onChange:function(e){qe(e)},value:ce.valueAddedTax}),Object(u.jsx)("span",{children:Ke.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})})}),Object(u.jsxs)("div",{className:"additions",children:[Object(u.jsxs)("div",{className:"hideAndShow",children:[Object(u.jsx)("h5",{children:"Additions"}),Object(u.jsx)("button",{onClick:function(){T(!A)},type:"button",children:A?"Hide":"Show"})]}),A&&Object(u.jsxs)("ul",{className:"otherAdditions",children:[Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("li",{className:"additionItem",children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Element"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Amount"})})]})}),Object(u.jsx)("div",{className:"otherAdditions",children:Be.map((function(e,t){return Object(u.jsxs)("li",{className:"additionItem",children:[Object(u.jsx)("input",{type:"text",value:e.name,onChange:Re("name",t),name:"name"}),Object(u.jsx)("input",{type:"number",value:e.amount,onChange:Re("amount",t),name:"amount"})]},t)}))}),Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("div",{className:"additionItem",children:[Object(u.jsx)("h5",{children:"Total Additions"}),Object(u.jsx)("h5",{children:Xe.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})})]})]}),Object(u.jsxs)("div",{className:"netPay",children:[Object(u.jsx)("h3",{children:"Net Payable"}),Object(u.jsx)("h3",{children:(ze+Number(Ke)+Xe).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]}),Object(u.jsxs)("div",{className:"saveOptions",children:[Object(u.jsx)("button",{onClick:t,type:"button",className:"addRows btn",children:"Cancel"}),Object(u.jsx)("button",{onClick:nt,type:"button",className:"addRows btn",children:"Save"}),Object(u.jsx)("button",{onClick:nt,type:"button",className:"addRows btn",children:"Save and Send"})]})]}),q&&Object(u.jsx)(L,{onClick:function(){V(!1)}})]}),H&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{message:b,alert:i})]})};var H=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(""),j=Object(r.a)(o,2),b=j[0],h=j[1],v=Object(c.useState)(!1),f=Object(r.a)(v,2),y=f[0],S=f[1],D=Object(c.useState)(!1),k=Object(r.a)(D,2),A=k[0],T=k[1],P=Object(c.useState)(!1),I=Object(r.a)(P,2),F=I[0],B=I[1],E=Object(c.useState)(!1),R=Object(r.a)(E,2),q=R[0],V=R[1],M=Object(c.useState)(!0),Y=Object(r.a)(M,2),H=Y[0],_=Y[1],Q=Object(c.useState)([]),G=Object(r.a)(Q,2),U=G[0],W=G[1],J=Object(c.useState)([]),z=Object(r.a)(J,2),K=z[0],X=z[1],Z=Object(c.useState)([]),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ne=Object(c.useState)({rebate:"",tradeDiscount:"",cashDiscount:"",valueAddedTax:""}),ce=Object(r.a)(ne,2),ae=ce[0],se=ce[1],ie=Object(c.useState)(g),re=Object(r.a)(ie,2),le=re[0],oe=re[1],de=Object(c.useState)(""),ue=Object(r.a)(de,2),je=ue[0],be=ue[1],me=new Date,Oe=me.getDate(),he=me.getMonth(),xe=me.getFullYear(),pe=new Date("".concat(he+1,"/").concat(Oe,"/").concat(xe)).toDateString(),ve=Object(c.useState)({name:"",email:"",billingAddress:{country:"",city:"",street:""},contact:{telephone:"",mobile:"",fax:""}}),fe=Object(r.a)(ve,2),Ne=fe[0],ge=fe[1],ye=Object(c.useState)(7.5),Se=Object(r.a)(ye,2),Ce=Se[0],De=Se[1],ke=Ce>36?"100%":"".concat(Ce,"rem");Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var t,n,c,a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=x.a.CancelToken.source(),c=p.get("/products"),a=p.get("/suppliers"),s=p.get("/returns"),e.next=7,x.a.all([c,a,s],{cancelToken:n.token}).then((function(e){var t=Object(r.a)(e,3),n=t[0],c=t[1],a=t[2];W(n.data),X(c.data.suppliers),te(a.data.purchaseReturns),_(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 7:return e.abrupt("return",(function(){t=!0,n.cancel("Cancelling request")}));case 8:case"end":return e.stop()}}),e)}))),[]);var we=function(e,t){return function(n){var c=le.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));oe(c)}},Ae=Object(c.useState)([{name:"",amount:""},{name:"",amount:""},{name:"",amount:""},{name:"",amount:""}]),Te=Object(r.a)(Ae,2),Pe=Te[0],Ie=Te[1],Fe=function(e,t){return function(n){var c=Pe.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));Ie(c)}},Be=Object(c.useRef)(null),Ee=function(e){var t=e.target,n=t.name,c=t.value;se((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},Re=Object(c.useState)({date:pe,returnsNumber:"00".concat(ee.length+1),supplierName:""}),Le=Object(r.a)(Re,2),qe=Le[0],Ve=Le[1],Me=le.map((function(e){return e.amount(e.qty,e.up)})).reduce((function(e,t){return Number(e)+Number(t)}),0),Ye=(Me*(Number(ae.rebate)/100)).toFixed(2),He=Me-Ye,_e=(He*(Number(ae.tradeDiscount)/100)).toFixed(2),Qe=He-_e,Ge=(Qe*(Number(ae.cashDiscount)/100)).toFixed(2),Ue=Qe-Ge,We=(Ue*(Number(ae.valueAddedTax)/100)).toFixed(2),Je=Pe.map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}));function ze(e){var t=Be.current;t&&!t.contains(e.target)&&S(!1)}Object(c.useEffect)((function(){K.filter((function(e){return e.name===je})).map((function(e){return ge(Object(d.a)({},e))}))}),[je]),Object(c.useEffect)((function(){return document.addEventListener("mousedown",ze),function(){document.removeEventListener("mousedown",ze)}}),[]);var Ke=le.filter((function(e){return""!==e.productName&&""!==e.qty&&""!==e.up})).map((function(e){return{productName:e.productName,description:e.description,qty:e.qty,up:e.up,amount:e.qty*e.up}})),Xe=Pe.filter((function(e){return""!==e.name&&""!==e.amount})),Ze={returnsInput:qe,supplierDetails:Ne,data:Ke,additionsAndSubtractions:ae,discountsAndVat:{rebateValue:Ye,tradeDiscountValue:_e,cashDiscountValue:Ge,valueAddedTax:We},otherAdditions:Xe,grossAmount:Me,netPayable:(Ue+Number(We)+Je).toFixed(2)},$e=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""===Ne.name&&Ke.length>0?(setTimeout((function(){_(!0)}),500),p.post("/purchaseReturns",Ze).then((function(e){console.log(e.data),t(),n(),_(!1)}))):(h("Please add a supplier and at least one product"),l(!0),setTimeout((function(){l(!1)}),3e3));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"Quotation",children:[Object(u.jsx)("div",{className:"close",onClick:t,children:Object(u.jsx)("i",{className:"fas fa-times fa-lg"})}),Object(u.jsx)("h3",{children:"New Purchase Returns"}),Object(u.jsx)("div",{className:"formContainer",children:Object(u.jsxs)("form",{action:"",method:"post",children:[Object(u.jsxs)("div",{className:"quotationTop",children:[Object(u.jsxs)("div",{className:"date",children:[Object(u.jsx)("label",{htmlFor:"date",children:"Date:"}),Object(u.jsx)("input",{type:"text",name:"date",value:qe.date,id:"date",contentEditable:!1,readOnly:!0})]}),Object(u.jsxs)("div",{className:"noteNumber",children:[Object(u.jsx)("label",{htmlFor:"quoteNumber",children:"Purchase Returns No:"}),Object(u.jsx)("input",{type:"text",name:"quoteNumber",id:"quoteNumber",value:qe.returnsNumber,readOnly:!0})]})]}),Object(u.jsxs)("div",{className:"customerDetails",children:[Object(u.jsxs)("div",{ref:Be,className:"customerName",children:[Object(u.jsx)("label",{htmlFor:"customerName",children:"Receiver: "}),Object(u.jsx)("input",{type:"text",value:je,onChange:function(e){be(e.target.value)},onClick:function(){S(!y)},name:"supplierName",className:"autoListItemInput",id:"supplierName",placeholder:"Select Supplier"}),y&&Object(u.jsxs)("div",{className:"autoCompleteContainer",children:[Object(u.jsx)("button",{type:"button",onClick:function(){V(!0)},children:"Add New Supplier"}),K.filter((function(e){return!je||(!!e.name.toLowerCase().includes(je.toLowerCase())||void 0)})).map((function(e,t){return Object(u.jsx)("div",{className:"autoListItem",onClick:function(){be(e.name),S(!1)},tabIndex:"0",children:Object(u.jsx)("p",{children:e.name})},t)}))]})]}),Object(u.jsx)("div",{className:"customerEmail",children:Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Email: "}),null===Ne||void 0===Ne?void 0:Ne.email]})}),Object(u.jsxs)("div",{className:"deliveryAdress",children:[Object(u.jsx)("h4",{children:"Delivery Address & Contact"}),Object(u.jsxs)("div",{className:"addressInfo",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Country: "}),null===Ne||void 0===Ne?void 0:Ne.country]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"City: "}),null===Ne||void 0===Ne?void 0:Ne.city]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Street: "}),null===Ne||void 0===Ne?void 0:Ne.street]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Tel: "}),null===Ne||void 0===Ne?void 0:Ne.telephone]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Mobile: "}),null===Ne||void 0===Ne?void 0:Ne.mobile]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Fax: "}),null===Ne||void 0===Ne?void 0:Ne.fax]})]})]})]}),Object(u.jsxs)("div",{className:"additionalInfo",children:[Object(u.jsx)("div",{className:"textArea",children:Object(u.jsx)("textarea",{name:"additionalInfo",id:"additionalInfo",cols:"60",rows:"6",value:qe.additonalInfo,onChange:function(e){var t=e.target,n=t.name,c=t.value;Ve((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},placeholder:"Add additional information to receiver",className:"textArea"})}),Object(u.jsx)("div",{className:"amount",children:Object(u.jsxs)("h3",{children:["Net: ",(Ue+Number(We)+Je).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})})]}),Object(u.jsxs)("div",{className:"itemsContainer",children:[Object(u.jsx)("ul",{children:Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsx)("span",{className:"listTitle",children:"Product Name"}),Object(u.jsx)("span",{className:"listTitle",children:"Description"}),Object(u.jsx)("span",{className:"listTitle",children:"Quantity"}),Object(u.jsx)("span",{className:"listTitle",children:"Unit Price"}),Object(u.jsx)("span",{className:"listTitle",children:"Amount"})]})}),Object(u.jsx)("ul",{style:{height:"".concat(ke),overflow:"hidden"},className:"items",children:le.map((function(e,t){var n;return Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsxs)("select",(n={name:"productName",id:"productName",value:e.productName,onChange:we("productName")},Object(N.a)(n,"onChange",we("productName",t)),Object(N.a)(n,"children",[Object(u.jsx)("option",{children:" "}),U.map((function(e){return Object(u.jsx)("option",{value:e.productName,children:e.productName})}))]),n)),Object(u.jsx)("input",{type:"text",name:"description",value:e.description,onChange:we("description",t)}),Object(u.jsx)("input",{type:"number",name:"qty",value:e.qty,onChange:we("qty",t)}),Object(u.jsx)("input",{type:"number",name:"up",value:e.up,onChange:we("up",t)}),Object(u.jsx)("input",{type:"number",name:"amount",value:e.amount(e.qty,e.up),readOnly:!0})]},t)}))})]}),Object(u.jsxs)("div",{className:"summation",children:[Object(u.jsx)("button",{onClick:function(){De((function(e){return e+7.3})),"100%"===ke&&(h("Cannot Add more rows"),l(!0),setTimeout((function(){l(!1)}),3e3))},type:"button",className:"addRows btn",children:"Add Rows"}),Object(u.jsxs)("h3",{className:"amount",children:["Gross Amount: ",Me.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})]}),Object(u.jsxs)("div",{className:"deductionsAndAdditions",children:[Object(u.jsxs)("div",{className:"hideAndShow",children:[Object(u.jsx)("h5",{children:"Deductions"}),Object(u.jsx)("button",{onClick:function(){B(!F)},type:"button",children:F?"Hide":"Show"})]}),Object(u.jsx)("div",{className:"deductions",children:F&&Object(u.jsxs)("ul",{className:"deductions",children:[Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{className:"elements",children:"Elements"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Rate"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Amount"})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Rebate"}),Object(u.jsx)("input",{type:"number",name:"rebate",id:"rebate",onChange:function(e){Ee(e)},value:ae.rebate}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Ye.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Commercial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:He.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Trade Discount"}),Object(u.jsx)("input",{type:"number",name:"tradeDiscount",id:"tradeDiscount",onChange:function(e){Ee(e)},value:ae.tradeDiscount}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:_e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Commercial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:Qe.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Cash Discount"}),Object(u.jsx)("input",{type:"number",name:"cashDiscount",id:"cashDiscount",onChange:function(e){Ee(e)},value:ae.cashDiscount}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Ge.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Financial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:Ue.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]})]})}),Object(u.jsx)("ul",{className:"deductions",children:Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("li",{className:"deductItem additionItem",children:[Object(u.jsx)("span",{children:"Tax (VAT) Rate"}),Object(u.jsx)("input",{type:"number",name:"valueAddedTax",id:"valueAddedTax",onChange:function(e){Ee(e)},value:ae.valueAddedTax}),Object(u.jsx)("span",{children:We.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})})}),Object(u.jsxs)("div",{className:"additions",children:[Object(u.jsxs)("div",{className:"hideAndShow",children:[Object(u.jsx)("h5",{children:"Additions"}),Object(u.jsx)("button",{onClick:function(){T(!A)},type:"button",children:A?"Hide":"Show"})]}),A&&Object(u.jsxs)("ul",{className:"otherAdditions",children:[Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("li",{className:"additionItem",children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Element"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Amount"})})]})}),Object(u.jsx)("div",{className:"otherAdditions",children:Pe.map((function(e,t){return Object(u.jsxs)("li",{className:"additionItem",children:[Object(u.jsx)("input",{type:"text",value:e.name,onChange:Fe("name",t),name:"name"}),Object(u.jsx)("input",{type:"number",value:e.amount,onChange:Fe("amount",t),name:"amount"})]},t)}))}),Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("div",{className:"additionItem",children:[Object(u.jsx)("h5",{children:"Total Additions"}),Object(u.jsx)("h5",{children:Je.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})})]})]}),Object(u.jsxs)("div",{className:"netPay",children:[Object(u.jsx)("h3",{children:"Net "}),Object(u.jsx)("h3",{children:(Ue+Number(We)+Je).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]}),Object(u.jsxs)("div",{className:"saveOptions",children:[Object(u.jsx)("button",{onClick:t,type:"button",className:"addRows btn",children:"Cancel"}),Object(u.jsx)("button",{onClick:function(){$e()},type:"button",className:"addRows btn",children:"Save"}),Object(u.jsx)("button",{onClick:function(){$e()},type:"button",className:"addRows btn",children:"Save and Send"})]})]})}),q&&Object(u.jsx)(L,{onClick:function(){V(!1)}}),H&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{message:b,alert:i})]})};var _=function(){var e=Object(o.f)(),t=Object(c.useState)(!1),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),l=Object(r.a)(i,2),j=l[0],b=l[1],h=Object(c.useState)(!1),v=Object(r.a)(h,2),N=v[0],g=v[1],y=Object(c.useState)(!1),S=Object(r.a)(y,2),D=S[0],k=S[1],A=Object(c.useState)(!1),T=Object(r.a)(A,2),P=T[0],I=T[1],F=Object(c.useState)(!1),B=Object(r.a)(F,2),E=B[0],R=B[1],_=Object(c.useState)(!0),Q=Object(r.a)(_,2),G=Q[0],U=Q[1],W=Object(c.useState)(!1),J=Object(r.a)(W,2),z=J[0],K=J[1],X=Object(c.useState)(""),Z=Object(r.a)(X,2),$=Z[0],ee=Z[1],te=Object(c.useState)([]),ne=Object(r.a)(te,2),ce=ne[0],ae=ne[1],se=Object(c.useState)([]),ie=Object(r.a)(se,2),re=ie[0],le=ie[1],oe=Object(c.useState)([]),de=Object(r.a)(oe,2),ue=de[0],je=de[1],be=Object(c.useState)([]),me=Object(r.a)(be,2),Oe=me[0],he=me[1],xe=Object(c.useState)([]),pe=Object(r.a)(xe,2),ve=pe[0],fe=pe[1];Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return Ne(t,e),function(){e=!0,t.cancel("Cancelling request")}}),[]);var Ne=function(){var e=Object(O.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("/purchases",{cancelToken:t.token}).then((function(e){ae(e.data.purchases),le(e.data.graph),je(e.data.creditPurchases),he(e.data.cashPurchases),fe(e.data.returns),U(!1)})).catch((function(e){n||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ge=null===re||void 0===re?void 0:re.map((function(e){return e.value})),ye=null===re||void 0===re?void 0:re.map((function(e){return e.month})),Se=null===ve||void 0===ve?void 0:ve.map((function(e){return e.netPayable})).reduce((function(e,t){return e+t}),0),Ce=null===ce||void 0===ce?void 0:ce.filter((function(e){return"credit"===e.purchaseType})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0),De=[];null===ce||void 0===ce||ce.filter((function(e){"cash"===e.purchaseType&&De.push(e),"bank"===e.purchaseType&&De.push(e),"mobileMoney"===e.purchaseType&&De.push(e)}));var ke=null===De||void 0===De?void 0:De.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0),we=Object(c.useRef)(null),Ae=Object(c.useState)({transform:"translateY(-5rem)",visibility:"hidden"}),Te=Object(r.a)(Ae,2),Pe=Te[0],Ie=Te[1],Fe={width:"100%",position:"absolute",color:"gray",fontWeight:"550",padding:"1rem",backgroundColor:"#ffffff",borderRadius:"1rem",transform:Pe.transform,visibility:Pe.visibility,transition:"transform 0.5s ease"};function Be(e){var t=we.current;t&&!t.contains(e.target)&&Ie({transform:"translateY(-5rem)",visibility:"hidden"})}return Object(c.useEffect)((function(){return document.addEventListener("mousedown",Be),function(){document.removeEventListener("mousedown",Be)}}),[]),Object(u.jsxs)("div",{className:"Sales Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsx)("h1",{children:"Purchases Dashboard"}),Object(u.jsx)("div",{className:"moreOptions",children:Object(u.jsxs)("div",{className:"moreOptions invoicesHeading",ref:we,children:[Object(u.jsxs)("button",{className:"invoiceButton",onClick:function(){"hidden"===Pe.visibility?Ie({transform:"translateY(0)",visibility:"visible"}):Ie({transform:"translateY(-5rem)",visibility:"hidden"})},children:["New Transaction",Object(u.jsx)("i",{className:"fas fa-sort-down"})]}),Object(u.jsxs)("div",{className:"moreOptionsCont",style:Object(d.a)({},Fe),children:[Object(u.jsx)("p",{className:"option",onClick:function(){s(!0)},children:"Purchase Invoice"}),Object(u.jsx)("p",{className:"option",onClick:function(){b(!0)},children:"Purchase Receipt"}),Object(u.jsx)("p",{className:"option",onClick:function(){I(!0)},children:"Purchase Returns"}),Object(u.jsx)("p",{className:"option",onClick:function(){k(!0)},children:"Purchase Order"})]})]})})]}),Object(u.jsxs)("div",{className:"salesMiddle",children:[Object(u.jsxs)("div",{className:"salesTotals",children:[Object(u.jsxs)("div",{className:"cashSales","data-text":"purchase receipts",onClick:function(){e.push("/purchase-receipts")},children:[Object(u.jsx)("h5",{children:"Total Purchase Receipts"}),Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:null===ke||void 0===ke?void 0:ke.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("div",{className:"creditSales","data-text":"purchase invoices",onClick:function(){e.push("/purchase-invoices")},children:[Object(u.jsx)("h5",{children:"Total Credit Purchases"}),Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:null===Ce||void 0===Ce?void 0:Ce.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("div",{className:"salesReturns","data-text":"purchase returns",onClick:function(){e.push("/purchase-returns")},children:[Object(u.jsx)("h5",{children:"Total Purchase Returns"}),Object(u.jsx)("p",{style:{color:"red"},children:Object(u.jsx)("b",{children:null===Se||void 0===Se?void 0:Se.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]})]}),Object(u.jsx)(f,{labels:ye,data3:ge,tooltip3:"Total Monthly Purchases",data1:null===ue||void 0===ue?void 0:ue.map((function(e){return e.value})),tooltip1:"Credit Purchases",data2:null===Oe||void 0===Oe?void 0:Oe.map((function(e){return e.value})),tooltip2:"Purchase Receipts"})]}),a&&Object(u.jsx)(q,{onClick:function(){s(!1)},refetch:function(){K(!0),ee("Purchase Invoice Added Successfully"),setTimeout((function(){K(!1),ee("")}),2e3)}}),j&&Object(u.jsx)(V,{onClick:function(){b(!1)},refetch:function(){K(!0),ee("Purchase Receipt Added Successfully"),setTimeout((function(){K(!1),ee("")}),2e3)}}),N&&Object(u.jsx)(M,{onClick:function(){g(!1)},refetch:function(){K(!0),ee("Payment Added Successfully"),setTimeout((function(){K(!1),ee("")}),2e3)}}),D&&Object(u.jsx)(Y,{onClick:function(){k(!1)},refetch:function(){K(!0),ee("Purchase Order Added Successfully"),setTimeout((function(){K(!1),ee("")}),2e3)}}),P&&Object(u.jsx)(H,{onClick:function(){I(!1)},refetch:function(){K(!0),ee("Puirchase Returns Added Successfully"),setTimeout((function(){K(!1),ee("")}),2e3)}}),G&&Object(u.jsx)(w,{}),E&&Object(u.jsx)(L,{onClick:function(){R(!1)},refetch:function(){K(!0),ee("Supplier Added Successfully"),setTimeout((function(){K(!1),ee("")}),2e3)}}),Object(u.jsx)(C,{aler:z,message:$})]})};var Q=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),i=Object(r.a)(s,2),l=i[0],d=i[1],j=Object(c.useState)(!1),b=Object(r.a)(j,2),h=b[0],v=b[1],f=Object(c.useState)(!0),N=Object(r.a)(f,2),g=N[0],y=N[1],S=Object(c.useState)([]),D=Object(r.a)(S,2),k=D[0],A=D[1],T=Object(o.f)();Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return P(t,e),function(){e=!0,t.cancel("Cancelling request")}}),[]);var P=function(){var e=Object(O.a)(m.a.mark((function e(t,n){var c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=p.get("/purchases"),a=p.get("/suppliers"),e.next=4,x.a.all([c,a],{cancelToken:t.token}).then((function(e){var t=Object(r.a)(e,2),n=(t[0],t[1]);A(n.data.suppliers),y(!1)})).catch((function(e){n||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=Object(c.useRef)(null);function F(e){var t=I.current;t&&!t.contains(e.target)&&v(!1)}return Object(c.useEffect)((function(){return document.addEventListener("mousedown",F),function(){document.removeEventListener("mousedown",F)}}),[]),Object(u.jsxs)("div",{className:"Sales",children:[Object(u.jsxs)("div",{className:"Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsx)("h1",{children:"Suppliers"}),Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){v(!0)},children:"New Supplier"})]}),Object(u.jsxs)("div",{className:"allDebtorsContainer",children:[0===k.length?Object(u.jsxs)("div",{style:{marginTop:"1rem"},children:[Object(u.jsx)("h3",{children:"No Data to display. Please Add Suppliers"}),Object(u.jsx)("button",{className:"btn",onClick:function(){v(!0)},children:"Add Supplier"})]}):Object(u.jsx)("h3",{style:{textAlign:"left"},children:"All Suppliers"}),Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:0===k.length?"":Object(u.jsxs)("tr",{className:"invoiceListHead",children:[Object(u.jsx)("th",{children:"Supplier Name"}),Object(u.jsx)("th",{children:"Email Address"}),Object(u.jsx)("th",{children:"City "}),Object(u.jsx)("th",{children:"Telephone"})]})}),Object(u.jsx)("tbody",{className:"tableBody",children:null===k||void 0===k?void 0:k.map((function(e){var t;return Object(u.jsxs)("tr",{className:"invoiceListbody invoiceDetail",onClick:function(){T.push("/suppliers/".concat(e.name))},children:[Object(u.jsx)("td",{children:e.name}),Object(u.jsx)("td",{children:e.email}),Object(u.jsx)("td",{children:e.city}),Object(u.jsx)("td",{children:null===(t=e.telephone)||void 0===t?void 0:t.replace(/\B(?=(\d{3})+(?!\d))/g,"-")})]})}))})]})]})]}),g&&Object(u.jsx)(w,{}),h&&Object(u.jsx)("div",{ref:I,children:Object(u.jsx)(L,{onClick:function(){v(!1)},refetch:function(){d("Supplier Added Successfully"),a(!0),setTimeout((function(){a(!1),d("")}))}})}),Object(u.jsx)(C,{alert:n,message:l})]})};var G=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(r.a)(s,2),l=i[0],j=i[1],b=Object(c.useState)(!0),h=Object(r.a)(b,2),v=h[0],N=h[1],g=Object(c.useState)(!1),y=Object(r.a)(g,2),S=y[0],D=y[1],k=Object(c.useState)(!1),A=Object(r.a)(k,2),T=A[0],P=A[1],I=Object(c.useState)(!1),F=Object(r.a)(I,2),B=F[0],E=F[1],R=Object(c.useState)(!1),_=Object(r.a)(R,2),Q=_[0],G=_[1],U=Object(c.useState)(!1),W=Object(r.a)(U,2),J=W[0],z=W[1],K=Object(c.useState)(!1),X=Object(r.a)(K,2),Z=X[0],$=X[1],ee=Object(c.useState)(!1),te=Object(r.a)(ee,2),ne=te[0],ce=te[1],ae=Object(c.useState)(!1),se=Object(r.a)(ae,2),ie=se[0],re=se[1],le=Object(c.useState)(!1),oe=Object(r.a)(le,2),de=oe[0],ue=oe[1],je=Object(c.useState)(!1),be=Object(r.a)(je,2),me=be[0],Oe=be[1],he=Object(c.useState)(!0),xe=Object(r.a)(he,2),pe=xe[0],ve=xe[1],fe=Object(c.useState)([]),Ne=Object(r.a)(fe,2),ge=Ne[0],ye=Ne[1],Se=Object(c.useState)([]),Ce=Object(r.a)(Se,2),De=Ce[0],ke=Ce[1],we=Object(c.useState)([]),Ae=Object(r.a)(we,2),Te=Ae[0],Pe=Ae[1],Ie=Object(c.useState)([]),Fe=Object(r.a)(Ie,2),Be=Fe[0],Ee=Fe[1],Re=Object(c.useState)([]),Le=Object(r.a)(Re,2),qe=Le[0],Ve=Le[1],Me=Object(c.useState)([]),Ye=Object(r.a)(Me,2),He=Ye[0],_e=Ye[1],Qe=Object(c.useState)([]),Ge=Object(r.a)(Qe,2),Ue=Ge[0],We=Ge[1],Je=Object(c.useState)([]),ze=Object(r.a)(Je,2),Ke=ze[0],Xe=ze[1],Ze=Object(c.useState)([]),$e=Object(r.a)(Ze,2),et=$e[0],tt=$e[1],nt=Object(c.useState)([]),ct=Object(r.a)(nt,2),at=ct[0],st=ct[1],it=Object(c.useState)("overview"),rt=Object(r.a)(it,2),lt=rt[0],ot=rt[1],dt=Object(o.f)(),ut=Object(o.h)(),jt=null===at||void 0===at?void 0:at.filter((function(e){return e.name===ut.supplierName}));Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var t,n,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.get("/suppliers/".concat(ut.supplierName)),n=p.get("/suppliers"),c=!1,a=x.a.CancelToken.source(),e.next=6,x.a.all([t,n],{cancelToken:a.token}).then((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1];ye(n.data.purchaseInvoices),ke(n.data.cashPurchases),Pe(n.data.purchaseOrders),Ee(n.data.purchaseReturns),Ve(n.data.purchases),_e(n.data.creditorList),We(n.data.purchaseInvoices.map((function(e){return e.otherAdditions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0)}))),Xe(n.data.cashPurchases.map((function(e){return e.otherAdditions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0)}))),tt(n.data.purchaseReturns.map((function(e){return e.otherAdditions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0)}))),st(c.data.suppliers),N(!1)})).catch((function(e){c||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 6:return e.abrupt("return",(function(){c=!0,a.cancel("Cancelling request")}));case 7:case"end":return e.stop()}}),e)}))),[]);var bt=[],mt=[],Ot=[],ht=[],xt=[],pt=[],vt=[],ft=[],Nt=[],gt=[],yt=[],St=[];qe.filter((function(e){switch(new Date(e.date).getMonth()){case 0:bt.push(e.amount);break;case 1:mt.push(e.amount);break;case 2:Ot.push(e.amount);break;case 3:ht.push(e.amount);break;case 4:xt.push(e.amount);break;case 5:pt.push(e.amount);break;case 6:vt.push(e.amount);break;case 7:ft.push(e.amount);break;case 8:Nt.push(e.amount);break;case 9:gt.push(e.amount);break;case 10:yt.push(e.amount);break;case 11:St.push(e.amount);break;default:return null}})),bt=bt.reduce((function(e,t){return e+t}),0),mt=mt.reduce((function(e,t){return e+t}),0),Ot=Ot.reduce((function(e,t){return e+t}),0),ht=ht.reduce((function(e,t){return e+t}),0),xt=xt.reduce((function(e,t){return e+t}),0),pt=pt.reduce((function(e,t){return e+t}),0),vt=vt.reduce((function(e,t){return e+t}),0),ft=ft.reduce((function(e,t){return e+t}),0),Nt=Nt.reduce((function(e,t){return e+t}),0),gt=gt.reduce((function(e,t){return e+t}),0),yt=yt.reduce((function(e,t){return e+t}),0),St=St.reduce((function(e,t){return e+t}),0);var Ct=[],Dt=[],kt=[],wt=[],At=[],Tt=[],Pt=[],It=[],Ft=[],Bt=[],Et=[],Rt=[],Lt=[],qt=[],Vt=[],Mt=[],Yt=[],Ht=[],_t=[],Qt=[],Gt=[],Ut=[],Wt=[],Jt=[];null===ge||void 0===ge||ge.filter((function(e){var t;switch(new Date(null===(t=e.invoiceInput)||void 0===t?void 0:t.date).getMonth()){case 0:Ct.push(e.netPayable);break;case 1:kt.push(e.netPayable);break;case 2:At.push(e.netPayable);break;case 3:Pt.push(e.netPayable);break;case 4:Ft.push(e.netPayable);break;case 5:Et.push(e.netPayable);break;case 6:Lt.push(e.netPayable);break;case 7:Vt.push(e.netPayable);break;case 8:Yt.push(e.netPayable);break;case 9:_t.push(e.netPayable);break;case 10:Gt.push(e.netPayable);break;case 11:Wt.push(e.netPayable);break;default:return null}})),null===De||void 0===De||De.filter((function(e){var t;switch(new Date(null===(t=e.receiptInput)||void 0===t?void 0:t.date).getMonth()){case 0:Dt.push(e.netPayable);break;case 1:wt.push(e.netPayable);break;case 2:Tt.push(e.netPayable);break;case 3:It.push(e.netPayable);break;case 4:Bt.push(e.netPayable);break;case 5:Rt.push(e.netPayable);break;case 6:qt.push(e.netPayable);break;case 7:Mt.push(e.netPayable);break;case 8:Ht.push(e.netPayable);break;case 9:Qt.push(e.netPayable);break;case 10:Ut.push(e.netPayable);break;case 11:Jt.push(e.netPayable);break;default:return null}}));var zt=Dt.reduce((function(e,t){return Number(e)+Number(t)}),0),Kt=wt.reduce((function(e,t){return Number(e)+Number(t)}),0),Xt=Tt.reduce((function(e,t){return Number(e)+Number(t)}),0),Zt=It.reduce((function(e,t){return Number(e)+Number(t)}),0),$t=Bt.reduce((function(e,t){return Number(e)+Number(t)}),0),en=Rt.reduce((function(e,t){return Number(e)+Number(t)}),0),tn=qt.reduce((function(e,t){return Number(e)+Number(t)}),0),nn=Mt.reduce((function(e,t){return Number(e)+Number(t)}),0),cn=Ht.reduce((function(e,t){return Number(e)+Number(t)}),0),an=Qt.reduce((function(e,t){return Number(e)+Number(t)}),0),sn=Ut.reduce((function(e,t){return Number(e)+Number(t)}),0),rn=Jt.reduce((function(e,t){return Number(e)+Number(t)}),0),ln=Ct.reduce((function(e,t){return Number(e)+Number(t)}),0),on=kt.reduce((function(e,t){return Number(e)+Number(t)}),0),dn=At.reduce((function(e,t){return Number(e)+Number(t)}),0),un=Pt.reduce((function(e,t){return Number(e)+Number(t)}),0),jn=Ft.reduce((function(e,t){return Number(e)+Number(t)}),0),bn=Et.reduce((function(e,t){return Number(e)+Number(t)}),0),mn=Lt.reduce((function(e,t){return Number(e)+Number(t)}),0),On=Vt.reduce((function(e,t){return Number(e)+Number(t)}),0),hn=Yt.reduce((function(e,t){return Number(e)+Number(t)}),0),xn=_t.reduce((function(e,t){return Number(e)+Number(t)}),0),pn=Gt.reduce((function(e,t){return Number(e)+Number(t)}),0),vn=Wt.reduce((function(e,t){return Number(e)+Number(t)}),0),fn=Object(c.useRef)(null),Nn=Object(c.useState)({transform:"translateY(-5rem)",visibility:"hidden"}),gn=Object(r.a)(Nn,2),yn=gn[0],Sn=gn[1],Cn={width:"100%",position:"absolute",color:"gray",fontWeight:"550",padding:"1rem",backgroundColor:"#ffffff",borderRadius:"1rem",transform:yn.transform,visibility:yn.visibility,transition:"transform 0.5s ease"};function Dn(e){var t=fn.current;t&&!t.contains(e.target)&&Sn({transform:"translateY(-5rem)",visibility:"hidden"})}return Object(c.useEffect)((function(){return document.addEventListener("mousedown",Dn),function(){document.removeEventListener("mousedown",Dn)}}),[]),Object(u.jsxs)("div",{className:"CustomerDetails Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsxs)("h1",{children:["Supplier: ",ut.supplierName]}),Object(u.jsx)("div",{className:"moreOptions",children:Object(u.jsxs)("div",{className:"moreOptions invoicesHeading",ref:fn,children:[Object(u.jsxs)("button",{className:"invoiceButton",onClick:function(){"hidden"===yn.visibility?Sn({transform:"translateY(0)",visibility:"visible"}):Sn({transform:"translateY(-5rem)",visibility:"hidden"})},children:["New Transaction",Object(u.jsx)("i",{className:"fas fa-sort-down"})]}),Object(u.jsxs)("div",{className:"moreOptionsCont",style:Object(d.a)({},Cn),children:[Object(u.jsx)("p",{className:"option",onClick:function(){P(!0)},children:"Purchase Invoice"}),Object(u.jsx)("p",{className:"option",onClick:function(){E(!0)},children:"Purchase Receipt"}),Object(u.jsx)("p",{className:"option",onClick:function(){z(!0)},children:"Make Payment"}),Object(u.jsx)("p",{className:"option",onClick:function(){G(!0)},children:"Purchase Order"})]})]})})]}),Object(u.jsx)("div",{className:"filterContainer",children:Object(u.jsxs)("div",{className:"filter",children:[Object(u.jsx)("button",{className:"overview"===lt?"button":"btn",onClick:function(){ot("overview"),ce(!1),re(!1),ue(!1),Oe(!1),ve(!0)},children:"Overview"}),Object(u.jsx)("button",{className:"View Invoices"===lt?"button":"btn",onClick:function(){ot("View Invoices"),re(!1),ue(!1),Oe(!1),ve(!1),ce(!0)},children:"All Invoices"}),Object(u.jsx)("button",{className:"View Receipts"===lt?"button":"btn",onClick:function(){ot("View Receipts"),ue(!1),Oe(!1),ve(!1),ce(!1),re(!0)},children:"Cash Purchases"}),Object(u.jsx)("button",{className:"View Quotation"===lt?"button":"btn",onClick:function(){ot("View Quotation"),Oe(!1),ve(!1),ce(!1),re(!1),ue(!0)},children:"Purchase Orders"}),Object(u.jsx)("button",{className:"View CreditNote"===lt?"button":"btn",onClick:function(){ot("View CreditNote"),ve(!1),ce(!1),re(!1),ue(!1),Oe(!0)},children:"Purchase Returns"})]})}),pe&&Object(u.jsxs)("div",{className:"customerBodyELements",children:[null===jt||void 0===jt?void 0:jt.map((function(e){return Object(u.jsxs)("div",{className:"customerDetailsInfo",children:[Object(u.jsx)("i",{class:"fas fa-user-circle fa-5x"}),Object(u.jsxs)("div",{className:"customerName group",children:[Object(u.jsxs)("h2",{children:["Name: ",e.name]}),He.map((function(e){return Object(u.jsxs)("p",{className:"balanceDue",children:["Total Credit: ",e.balanceDue]})}))]}),Object(u.jsxs)("div",{className:"contactInfos group",children:[Object(u.jsx)("h3",{className:"customerDetail",children:Object(u.jsx)("u",{children:"Contact Info"})}),Object(u.jsxs)("p",{className:"customerDetail",children:[Object(u.jsx)("span",{children:"Email:"}),e.email]}),Object(u.jsxs)("p",{className:"customerDetail",children:[Object(u.jsx)("span",{children:"Tel:"}),e.telephone]}),Object(u.jsxs)("p",{className:"customerDetail",children:[Object(u.jsx)("span",{children:"Mobile:"}),e.mobile]}),Object(u.jsxs)("p",{className:"customerDetail",children:[Object(u.jsx)("span",{children:"P.O Box: "}),e.fax]})]}),Object(u.jsxs)("div",{className:"addressInfos group",children:[Object(u.jsx)("h3",{className:"customerDetail",children:Object(u.jsx)("u",{children:"Address Info"})}),Object(u.jsxs)("p",{className:"customerDetail",children:[Object(u.jsx)("span",{children:"Country:"})," ",e.country]}),Object(u.jsxs)("p",{className:"customerDetail",children:[Object(u.jsx)("span",{children:"City:"})," ",e.city]}),Object(u.jsxs)("p",{className:"customerDetail",children:[Object(u.jsx)("span",{children:"Street:"})," ",e.street]})]})]})})),qe.length>0?Object(u.jsxs)("div",{className:"recentAndBarChart",children:[Object(u.jsxs)("div",{className:"recentTransactions",children:[Object(u.jsxs)("div",{className:"totalPurchases",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Total Credits"})}),Object(u.jsx)("p",{children:(null===ge||void 0===ge?void 0:ge.map((function(e){return e.netPayable})).reduce((function(e,t){return Number(e)+Number(t)}),0)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"totalPurchases",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Total Cash"})}),Object(u.jsx)("p",{children:(null===De||void 0===De?void 0:De.map((function(e){return e.netPayable})).reduce((function(e,t){return Number(e)+Number(t)}),0)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"totalPurchases",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Total Paid To"})}),Object(u.jsx)("p",{children:(null===He||void 0===He?void 0:He.map((function(e){return e.totalPaid})).reduce((function(e,t){return Number(e)+Number(t)}),0)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"totalPurchases",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Balance Owed To"})}),Object(u.jsx)("p",{children:(null===He||void 0===He?void 0:He.map((function(e){return e.balanceDue})).reduce((function(e,t){return Number(e)+Number(t)}),0)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]}),Object(u.jsx)("div",{className:"barChartChart",children:Object(u.jsx)(f,{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],data3:[bt,mt,Ot,ht,xt,pt,vt,ft,Nt,gt,yt,St],tooltip3:"Total Purchases",data1:[ln,on,dn,un,jn,bn,mn,On,hn,xn,pn,vn],tooltip1:"Credit Purchases",data2:[zt,Kt,Xt,Zt,$t,en,tn,nn,cn,an,sn,rn],tooltip2:"Cash Purchases"})})]}):Object(u.jsx)("h2",{className:"noData",children:"No Data To Display. Please Record Transactions"})]}),Object(u.jsxs)("div",{className:"allDebtorsContainer",children:[ne&&ge.length>0?Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"invoiceListHead",children:[Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Invoice Term"}),Object(u.jsx)("th",{children:"Due Date"}),Object(u.jsx)("th",{children:"Invoice Number"}),Object(u.jsx)("th",{children:"Gross Amount"}),Object(u.jsx)("th",{children:"Total Discounts"}),Object(u.jsx)("th",{children:"VAT"}),Object(u.jsx)("th",{children:"Other Additions"}),Object(u.jsx)("th",{children:"Net Payable"})]})}),Object(u.jsx)("tbody",{children:ge.map((function(e,t){var n;return Object(u.jsxs)("tr",{className:"invoiceListbody invoiceDetail",onClick:function(){dt.push("/purchase-invoices/".concat(e._id))},children:[Object(u.jsx)("td",{children:new Date(e.invoiceInput.date).toLocaleDateString()}),Object(u.jsxs)("td",{children:[e.selectInvoiceTerm," days"]}),Object(u.jsx)("td",{children:new Date(e.dueDate).toLocaleDateString()}),Object(u.jsx)("td",{children:e.invoiceInput.invoiceNumber}),Object(u.jsx)("td",{children:e.grossAmount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:(Number(e.discountsAndVat.rebateValue)+Number(e.discountsAndVat.tradeDiscountValue)+Number(e.discountsAndVat.cashDiscountValue)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:e.discountsAndVat.valueAddedTax.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:null===(n=Ue[t])||void 0===n?void 0:n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:e.netPayable.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})}))})]}):ne&&Object(u.jsx)("h2",{className:"noData",children:"No Invoices To Display. Please Record Transactions"}),ie&&De.length>0?Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"invoiceListHead",children:[Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Receipt Number"}),Object(u.jsx)("th",{children:"Gross Amount"}),Object(u.jsx)("th",{children:"Total Discounts"}),Object(u.jsx)("th",{children:"VAT"}),Object(u.jsx)("th",{children:"Other Additions"}),Object(u.jsx)("th",{children:"Net Payable"})]})}),Object(u.jsx)("tbody",{children:De.map((function(e,t){var n;return Object(u.jsxs)("tr",{className:"receiptListbody invoiceDetail",onClick:function(){dt.push("/purchase-receipts/".concat(e._id))},children:[Object(u.jsx)("td",{children:e.receiptInput.date}),Object(u.jsx)("td",{children:e.receiptInput.receiptNumber}),Object(u.jsx)("td",{children:e.grossAmount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:(Number(e.discountsAndVat.rebateValue)+Number(e.discountsAndVat.tradeDiscountValue)+Number(e.discountsAndVat.cashDiscountValue)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:e.discountsAndVat.valueAddedTax.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:null===(n=Ke[t])||void 0===n?void 0:n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:e.netPayable.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})}))})]}):ie&&Object(u.jsx)("h2",{className:"noData",children:"No Data To Display. Please Record Transactions"}),me&&Be.length>0?Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"invoiceListHead",children:[Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Return Number"}),Object(u.jsx)("th",{children:"Gross Amount"}),Object(u.jsx)("th",{children:"Total Discounts"}),Object(u.jsx)("th",{children:"VAT"}),Object(u.jsx)("th",{children:"Other Additions"}),Object(u.jsx)("th",{children:"Net Payable"})]})}),Object(u.jsx)("tbody",{children:Be.map((function(e,t){var n;return Object(u.jsxs)("tr",{className:"noteListbody invoiceDetail",onClick:function(){dt.push("/purchase-returns/".concat(e._id))},children:[Object(u.jsx)("td",{children:e.returnsInput.date}),Object(u.jsx)("td",{children:e.returnsInput.returnNumber}),Object(u.jsx)("td",{children:e.grossAmount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:(Number(e.discountsAndVat.rebateValue)+Number(e.discountsAndVat.tradeDiscountValue)+Number(e.discountsAndVat.cashDiscountValue)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:e.discountsAndVat.valueAddedTax.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:null===(n=et[t])||void 0===n?void 0:n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:e.netPayable.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})}))})]}):me&&Object(u.jsx)("h2",{className:"noData",children:"No Data To Display. Please Record Transactions"}),de&&Te.length>0?Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"invoiceListHead",children:[Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Order Number"}),Object(u.jsx)("th",{children:"Gross Amount"})]})}),Object(u.jsx)("tbody",{children:Te.map((function(e,t){return Object(u.jsxs)("tr",{className:"quoteListbody invoiceDetail",onClick:function(){dt.push("/purchase-orders/".concat(e._id))},children:[Object(u.jsx)("td",{children:e.orderInput.date}),Object(u.jsx)("td",{children:e.orderInput.orderNumber}),Object(u.jsx)("td",{children:e.grossAmount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})}))})]}):de&&Object(u.jsx)("h2",{className:"noData",children:"No Data To Display. Please Record Transactions"})]}),T&&Object(u.jsx)(q,{onClick:function(){P(!1)},refetch:function(){j("Purchase Invoice Added Successfully"),a(!0),setTimeout((function(){a(!1),j("")}))}}),B&&Object(u.jsx)(V,{onClick:function(){E(!1)},refetch:function(){j("Purchase Receipt Added Successfully"),a(!0),setTimeout((function(){a(!1),j("")}))}}),J&&Object(u.jsx)(M,{onClick:function(){z(!1)},refetch:function(){j("Supplier Payment Added Successfully"),a(!0),setTimeout((function(){a(!1),j("")}))}}),Q&&Object(u.jsx)(Y,{onClick:function(){G(!1)},refetch:function(){j("Purchase Order Added Successfully"),a(!0),setTimeout((function(){a(!1),j("")}))}}),Z&&Object(u.jsx)(H,{onClick:function(){$(!1)},refetch:function(){j("Purchase Returns Added Successfully"),a(!0),setTimeout((function(){a(!1),j("")}))}}),v&&Object(u.jsx)(w,{}),S&&Object(u.jsx)(L,{onClick:function(){D(!1)},refetch:function(){j("Supplier Added Successfully"),a(!0),setTimeout((function(){a(!1),j("")}))}}),Object(u.jsx)(C,{alert:n,message:l})]})};n(240),n(241);var U=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(""),j=Object(r.a)(o,2),b=j[0],m=j[1],O=Object(c.useState)({}),h=Object(r.a)(O,2),x=h[0],v=h[1],f=Object(c.useState)(y),g=Object(r.a)(f,2),S=g[0],D=g[1],k=Object(c.useState)(17),A=Object(r.a)(k,2),T=A[0],P=A[1],I=T>36?"100%":"".concat(T,"rem"),F=Object(c.useState)(!1),B=Object(r.a)(F,2),E=B[0],R=B[1],L=Object(c.useRef)(),q=function(e,t){return function(n){var c=S.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));D(c)}},V=S.filter((function(e){return""!==e.expName&&""!==e.receiver&&""!==e.category&&""!==e.meansOfPayment&&""!==e.amount})),M={elements:V,date:x.date};function Y(e){var n=L.current;n&&!n.contains(e.target)&&t()}Object(c.useEffect)((function(){return document.addEventListener("mousedown",Y),function(){document.removeEventListener("mousedown",Y)}}),[]);var H=function(){0===V.length?(m("Please add at least one expense"),l(!0),setTimeout((function(){l(!1)}),3e3)):(R(!0),p.post("/expenses",M).then((function(e){t(),n(),R(!1)})).catch((function(e){return console.log(e)})))};return Object(u.jsxs)("div",{className:"NewExpense",ref:L,children:[Object(u.jsx)("div",{className:"close",children:Object(u.jsx)("i",{className:"fas fa-times fa-lg",onClick:t})}),Object(u.jsxs)("div",{className:"mainContainer",children:[Object(u.jsxs)("div",{className:"expTop",children:[Object(u.jsxs)("div",{className:"date",children:[Object(u.jsx)("label",{htmlFor:"date",children:"Date: "}),Object(u.jsx)("input",{type:"date",name:"date",id:"date",value:x.date,onChange:function(e){var t=e.target,n=t.name,c=t.value;v((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))}})]}),Object(u.jsx)("div",{className:"receiveer"})]}),Object(u.jsx)("div",{style:{height:"".concat(I),overflow:"hidden"},className:"expenseTable",children:Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"invoiceListHead",children:[Object(u.jsx)("th",{children:"Expense Name"}),Object(u.jsx)("th",{children:"Receiver"}),Object(u.jsx)("th",{children:"Category"}),Object(u.jsx)("th",{children:"Means of Payment"}),Object(u.jsx)("th",{children:"Amount"})]})}),Object(u.jsx)("tbody",{children:S.map((function(e,t){return Object(u.jsxs)("tr",{className:"invoiceLisBody",children:[Object(u.jsx)("td",{children:Object(u.jsx)("input",{type:"text",name:"expName",value:e.expName,onChange:q("expName",t)})}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{type:"text",name:"receiver",onChange:q("receiver",t)})}),Object(u.jsx)("td",{children:Object(u.jsxs)("select",{name:"category",value:e.category,onChange:q("category",t),children:[Object(u.jsx)("option",{value:""}),Object(u.jsx)("option",{value:"administration",children:"Administration"}),Object(u.jsx)("option",{value:"distribution",children:"Selling and Distribution"}),Object(u.jsx)("option",{value:"other",children:"Other"})]})}),Object(u.jsx)("td",{children:Object(u.jsxs)("select",{name:"meansOfPayment",value:e.meansOfPayment,onChange:q("meansOfPayment",t),children:[Object(u.jsx)("option",{value:""}),Object(u.jsx)("option",{value:"cash",children:"Cash"}),Object(u.jsx)("option",{value:"bank",children:"Bank"}),Object(u.jsx)("option",{value:"mobile money",children:"Mobile Money"})]})}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{type:"number",name:"amount",value:e.amount,onChange:q("amount",t)})})]},t)}))})]})}),Object(u.jsxs)("div",{className:"expButtons",children:[Object(u.jsx)("button",{onClick:function(){P((function(e){return e+8})),"100%"===I&&(m("Cannot Add more rows"),l(!0),setTimeout((function(){l(!1)}),3e3))},type:"button",className:"addRows btn",children:"Add Rows"}),Object(u.jsxs)("div",{className:"saveOptions",children:[Object(u.jsx)("button",{onClick:t,type:"button",className:"addRows btn",children:"Cancel"}),Object(u.jsx)("button",{onClick:H,type:"button",className:"addRows btn",children:"Save"}),Object(u.jsx)("button",{onClick:H,type:"button",className:"addRows btn",children:"Save and Send"})]})]})]}),E&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{message:b,alert:i})]})};n(242);var W=function(e){var t=e.date,n=e.expName,a=e.receiver,s=e.category,i=e.meansOfPayment,r=e.amount,l=e.handleChange,o=e.onClick,d=e.handleUpdate,j=Object(c.useRef)(),b=function(e){var t=j.current;t&&!t.contains(e.target)&&o()};return Object(c.useEffect)((function(){return document.addEventListener("mousedown",b),function(){document.removeEventListener("mousedown",b)}}),[]),Object(u.jsx)("div",{className:"UpdateExpense",children:Object(u.jsxs)("div",{className:"updateExpenseInput",ref:j,children:[Object(u.jsx)("h3",{children:"Update Expense"}),Object(u.jsxs)("div",{className:"dateUpdate",children:[Object(u.jsx)("label",{htmlFor:"date",children:"Date"}),Object(u.jsx)("input",{type:"date",name:"date",id:"date",value:t,onChange:l,className:"date"})]}),Object(u.jsxs)("div",{className:"expNameUpdate",children:[Object(u.jsx)("label",{htmlFor:"expName",children:"Expense Name"}),Object(u.jsx)("input",{type:"text",name:"expName",id:"expName",value:n,onChange:l,className:"expName"})]}),Object(u.jsxs)("div",{className:"receiverUpdate",children:[Object(u.jsx)("label",{htmlFor:"receiver",children:"Receiver"}),Object(u.jsx)("input",{type:"text",name:"receiver",id:"receiver",value:a,onChange:l,className:"receiver"})]}),Object(u.jsxs)("div",{className:"categoryUpdate",children:[Object(u.jsx)("label",{htmlFor:"category",children:"Category"}),Object(u.jsxs)("select",{className:"category",name:"category",id:"category",value:s,onChange:l,children:[Object(u.jsx)("option",{value:"administration",children:"Administration"}),Object(u.jsx)("option",{value:"distribution",children:"Distribution"}),Object(u.jsx)("option",{value:"other",children:"Other"})]})]}),Object(u.jsxs)("div",{className:"meansUpdate",children:[Object(u.jsx)("label",{htmlFor:"meansOfPayment",children:"Means of Payment"}),Object(u.jsxs)("select",{className:"meansOfPayment",name:"meansOfPayment",id:"meansOfPayment",value:i,onChange:l,children:[Object(u.jsx)("option",{value:"cash",children:"Cash"}),Object(u.jsx)("option",{value:"bank",children:"Bank"}),Object(u.jsx)("option",{value:"mobileMoney",children:"Mobile Money"})]})]}),Object(u.jsxs)("div",{className:"amountUpdate",children:[Object(u.jsx)("label",{htmlFor:"amount",children:"Amount"}),Object(u.jsx)("input",{type:"text",name:"amount",id:"amount",value:r,onChange:l})]}),Object(u.jsxs)("div",{className:"updateButtons",children:[Object(u.jsx)("button",{className:"btn",onClick:o,children:"Cancel"}),Object(u.jsx)("button",{className:"btn",onClick:d,children:"Update"})]})]})})};n(243);var J=function(e){var t=e.onClick,n=e.handleDelete,a=Object(c.useRef)();Object(c.useEffect)((function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}}),[]);var s=function(e){var n=a.current;n&&!n.contains(e.target)&&t()};return Object(u.jsx)("div",{className:"DeleteBox",children:Object(u.jsxs)("div",{className:"deleteContainer",ref:a,children:[Object(u.jsxs)("p",{className:"deleteText",children:["Click ",Object(u.jsx)("b",{children:"OK"})," to confirm ",Object(u.jsx)("span",{children:"delete"})]}),Object(u.jsxs)("div",{className:"deleteOptions",children:[Object(u.jsx)("button",{className:"btn",onClick:t,children:"Cancel"}),Object(u.jsx)("button",{className:"btn",onClick:function(){n(),t()},children:"OK"})]})]})})};var z=function(){var e=Object(c.useState)(!0),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!0),i=Object(r.a)(s,2),l=i[0],o=i[1],j=Object(c.useState)(!1),b=Object(r.a)(j,2),h=b[0],f=b[1],g=Object(c.useState)(!1),y=Object(r.a)(g,2),S=y[0],D=y[1],k=Object(c.useState)(!1),A=Object(r.a)(k,2),T=A[0],P=A[1],I=Object(c.useState)(!1),F=Object(r.a)(I,2),B=F[0],E=F[1],R=Object(c.useState)(""),L=Object(r.a)(R,2),q=L[0],V=L[1],M=Object(c.useState)([]),Y=Object(r.a)(M,2),H=Y[0],_=Y[1],Q=Object(c.useState)({}),G=Object(r.a)(Q,2),z=G[0],K=G[1],X=Object(c.useState)(""),Z=Object(r.a)(X,2),$=Z[0],ee=Z[1],te=Object(c.useState)("detail"),ne=Object(r.a)(te,2),ce=ne[0],ae=ne[1];Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.a.CancelToken.source(),n=!1,e.next=4,p.get("/expenses",{cancelToken:t.token}).then((function(e){o(!1),_(e.data)})).catch((function(e){n||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 4:return e.abrupt("return",(function(){n=!0,t.cancel("Cancelling request")}));case 5:case"end":return e.stop()}}),e)}))),[]);var se=[],ie=[],re=[],le=[],oe=[],de=[],ue=[],je=[],be=[],me=[],Oe=[],he=[];return H.filter((function(e){switch(new Date(e.date).getMonth()){case 0:se.push(e.amount);break;case 1:ie.push(e.amount);break;case 2:re.push(e.amount);break;case 3:le.push(e.amount);break;case 4:oe.push(e.amount);break;case 5:de.push(e.amount);break;case 6:ue.push(e.amount);break;case 7:je.push(e.amount);break;case 8:be.push(e.amount);break;case 9:me.push(e.amount);break;case 10:Oe.push(e.amount);break;case 11:he.push(e.amount);break;default:return null}})),se=se.reduce((function(e,t){return e+t}),0),ie=ie.reduce((function(e,t){return e+t}),0),re=re.reduce((function(e,t){return e+t}),0),le=le.reduce((function(e,t){return e+t}),0),oe=oe.reduce((function(e,t){return e+t}),0),de=de.reduce((function(e,t){return e+t}),0),ue=ue.reduce((function(e,t){return e+t}),0),je=je.reduce((function(e,t){return e+t}),0),be=be.reduce((function(e,t){return e+t}),0),me=me.reduce((function(e,t){return e+t}),0),Oe=Oe.reduce((function(e,t){return e+t}),0),he=he.reduce((function(e,t){return e+t}),0),Object(u.jsxs)("div",{className:"Expense Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsxs)("div",{style:{textAlign:"left"},children:[Object(u.jsx)("h1",{children:"Expenses"}),Object(u.jsxs)("h3",{children:["Total Spent On Expenses: ",Object(u.jsx)("span",{style:{color:"red"},children:H.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]}),Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){f(!0)},children:"New Expense"})]}),Object(u.jsxs)("div",{className:"recentDetails",children:[Object(u.jsxs)("div",{className:"mostRecentTransactions",children:[Object(u.jsx)("h3",{children:"Recent Transactions"}),Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Detail"}),Object(u.jsx)("th",{children:"Paid To"}),Object(u.jsx)("th",{children:"Amount"})]})}),Object(u.jsx)("tbody",{children:null===H||void 0===H?void 0:H.sort((function(e,t){return new Date(t.date)-new Date(e.date)})).slice(0,3).map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"detail",children:e.expName}),Object(u.jsx)("td",{children:e.receiver}),Object(u.jsx)("td",{children:e.amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]},t)}))})]})]}),Object(u.jsxs)("div",{className:"mosstPaidExpenses",children:[Object(u.jsx)("h3",{children:"Expenses Most Paid For"}),Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:" Detail "}),Object(u.jsx)("th",{children:" Paid To "}),Object(u.jsx)("th",{children:" Amount "})]})}),Object(u.jsx)("tbody",{children:null===H||void 0===H?void 0:H.sort((function(e,t){return t.amount-e.amount})).slice(0,3).map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"detail",children:e.expName}),Object(u.jsx)("td",{children:e.receiver}),Object(u.jsx)("td",{children:e.amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]},t)}))})]})]})]}),Object(u.jsxs)("div",{className:"buttons",children:[Object(u.jsx)("button",{className:n?"button":"btn",onClick:function(){a(!0)},children:"Overview"}),Object(u.jsx)("button",{className:n?"btn":"button",onClick:function(){a(!1)},children:"All Transactions"})]}),Object(u.jsxs)("div",{className:"barChartAndExpenses",children:[n&&Object(u.jsx)("div",{className:"Barchart",children:Object(u.jsx)(v.a,{width:200,height:"70%",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],datasets:[{label:"Expense Overview",data:[se,ie,re,le,oe,de,ue,je,be,me,Oe,he],backgroundColor:["#B336D6","#DB59FF","#598A07","#9AD636","#D63689","#088A07","#37D636","#FF57AE","#36D6A3","#8A2207","#30FFBC","#D65736"]}]},options:{maintainAspectRatio:!0}})}),!n&&Object(u.jsxs)("div",{className:"allTransactions",children:[Object(u.jsxs)("div",{className:"expTranTop",children:[Object(u.jsx)("h3",{children:"All Expense Transactions"}),Object(u.jsxs)("div",{className:"filterOptions",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"filterBy",children:"Filter By:"}),Object(u.jsxs)("select",{name:"filterBy",id:"filterBy",value:ce,onChange:function(e){var t=e.target.value;ae(t)},className:"btn",children:[Object(u.jsx)("option",{value:"detail",children:"Detail"}),Object(u.jsx)("option",{value:"category",children:"Category"}),Object(u.jsx)("option",{value:"receiver",children:"Receiver"}),Object(u.jsx)("option",{value:"means",children:"Paid By"})]})]}),Object(u.jsx)("input",{type:"text",name:"filterExp",value:$,onChange:function(e){var t=e.target.value;ee(t)},placeholder:"detail"===ce?"Enter Exp Name":"receiver"===ce?"Enter Receiver":"means"===ce?"Enter Means Of Payment":"category"===ce?"Enter Category":null,className:"btn"})]})]}),Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Detail"}),Object(u.jsx)("th",{children:"Category"}),Object(u.jsx)("th",{children:"Receiver"}),Object(u.jsx)("th",{children:"Paid By:"}),Object(u.jsx)("th",{children:"Amount"})]})}),Object(u.jsx)("tbody",{children:H.filter((function(e){if(!$)return!0;switch(ce){case"detail":if(e.expName.toLowerCase().includes($.toLowerCase()))return!0;case"category":if(e.category.toLowerCase().includes($.toLowerCase()))return!0;case"means":if(e.meansOfPayment.toLowerCase().includes($.toLowerCase()))return!0;case"receiver":if(e.receiver.toLowerCase().includes($.toLowerCase()))return!0;default:return!1}})).sort((function(e,t){return new Date(t.date)-new Date(e.date)})).map((function(e,t){return Object(u.jsxs)("tr",{className:"allExpenses",children:[Object(u.jsx)("td",{children:new Date(e.date).toLocaleDateString()}),Object(u.jsx)("td",{className:"detail",children:e.expName}),Object(u.jsx)("td",{className:"category",children:e.category}),Object(u.jsx)("td",{children:e.receiver}),Object(u.jsx)("td",{className:"means",children:e.meansOfPayment}),Object(u.jsx)("td",{children:e.amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsxs)("td",{className:"updateExpense",children:[Object(u.jsx)("i",Object(N.a)({class:"fas fa-pen",dataset:"update",onClick:function(){K(e),D(!0)}},"dataset","update")),Object(u.jsx)("i",Object(N.a)({class:"fas fa-trash",dataset:"delete",onClick:function(){K(e),P(!0)}},"dataset","delete"))]})]},t)}))})]})]})]}),l&&Object(u.jsx)(w,{}),h&&Object(u.jsx)(U,{onClick:function(){f(!1)},refetch:function(){E(!0),V("Expense Added Successfully"),setTimeout((function(){E(!1),V("")}),2e3)}}),Object(u.jsx)(C,{alert:B,message:q}),S&&Object(u.jsx)(W,{date:z.date,expName:z.expName,receiver:z.receiver,category:z.category,meansOfPayment:z.meansOfPayment,amount:z.amount,handleChange:function(e){var t=e.target,n=t.name,c=t.value;K((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},onClick:function(){D(!1)},handleUpdate:Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!1),o(!0),e.next=4,p.put("/expenses/update",z).then((function(e){if(200===e.status){var t=x.a.CancelToken.source();p.get("/expenses",{cancelToken:t.token}).then((function(e){o(!1),_(e.data),V("Expense Updated Successfully"),E(!0),setTimeout((function(){E(!1),V("")}),2e3)})).catch((function(e){x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong")}))}else console.log("could not delete")}));case 4:case"end":return e.stop()}}),e)})))}),T&&Object(u.jsx)(J,{onClick:function(){P(!1)},handleDelete:Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!1),o(!0),e.next=4,p.patch("/expenses/delete",z).then((function(e){if(200===e.status){var t=x.a.CancelToken.source();p.get("/expenses",{cancelToken:t.token}).then((function(e){o(!1),_(e.data),V("Expense Deleted Successfully"),E(!0),setTimeout((function(){E(!1),V("")}),2e3)})).catch((function(e){x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong")}))}else console.log("could not delete")}));case 4:case"end":return e.stop()}}),e)})))})]})};n(244),n(95);var K=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(""),j=Object(r.a)(o,2),b=j[0],h=j[1],x=Object(c.useRef)(),v=Object(c.useState)({productName:"",description:"",sellingPrice:""}),f=Object(r.a)(v,2),g=f[0],y=f[1],S=function(e){var t=e.target,n=t.name,c=t.value;y((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))};function D(e){var n=x.current;n&&!n.contains(e.target)&&t()}Object(c.useEffect)((function(){return document.addEventListener("mousedown",D),function(){document.removeEventListener("mousedown",D)}}),[]);var k={productName:g.productName,description:g.description,sellingPrice:""===g.sellingPrice?0:g.sellingPrice},w=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==g.productName){e.next=7;break}h("Please add a product name"),l(!0),setTimeout((function(){l(!1)}),3e3),e.next=11;break;case 7:return e.next=9,p.post("/product",k);case 9:t(),n();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"AddProductForm",ref:x,children:[Object(u.jsx)("h2",{children:"Add A Product"}),Object(u.jsxs)("div",{className:"addProductContainer",children:[Object(u.jsxs)("div",{className:"productName",children:[Object(u.jsx)("label",{htmlFor:"productName",children:"Name:"}),Object(u.jsx)("input",{type:"text",name:"productName",id:"productName",onChange:S,value:g.productName})]}),Object(u.jsxs)("div",{className:"description",children:[Object(u.jsx)("label",{htmlFor:"description",children:"Description:"}),Object(u.jsx)("input",{type:"text",name:"description",id:"description",onChange:S,value:g.description})]}),Object(u.jsxs)("div",{className:"up",children:[Object(u.jsx)("label",{htmlFor:"up",children:"Selling Price:"}),Object(u.jsx)("input",{type:"number",name:"sellingPrice",id:"up",onChange:S,value:g.sellingPrice})]}),Object(u.jsxs)("div",{className:"buttons",children:[Object(u.jsx)("button",{className:"btn",onClick:t,children:"Cancel"}),Object(u.jsx)("button",{className:"btn",onClick:w,children:"Submit"})]})]}),Object(u.jsx)(C,{alert:i,message:b})]})};var X=function(e){var t=e.onClick,n=e.productName,a=e.description,s=e.handleProductSubmit,i=e.handleUpdate,r=e.sellingPrice,l=Object(c.useRef)();function o(e){var n=l.current;n&&!n.contains(e.target)&&t()}return Object(c.useEffect)((function(){return document.addEventListener("mousedown",o),function(){document.removeEventListener("mousedown",o)}}),[]),Object(u.jsxs)("div",{className:"AddProductForm",ref:l,children:[Object(u.jsx)("h2",{children:"Add A Product"}),Object(u.jsxs)("div",{className:"addProductContainer",children:[Object(u.jsxs)("div",{className:"productName",children:[Object(u.jsx)("label",{htmlFor:"productName",children:"Name:"}),Object(u.jsx)("input",{type:"text",name:"productName",id:"productName",onChange:i,value:n})]}),Object(u.jsxs)("div",{className:"description",children:[Object(u.jsx)("label",{htmlFor:"description",children:"Description:"}),Object(u.jsx)("input",{type:"text",name:"description",id:"description",onChange:i,value:a})]}),Object(u.jsxs)("div",{className:"up",children:[Object(u.jsx)("label",{htmlFor:"up",children:"sellingPrice:"}),Object(u.jsx)("input",{type:"text",name:"sellingPrice",id:"up",onChange:i,value:r})]}),Object(u.jsxs)("div",{className:"buttons",children:[Object(u.jsx)("button",{className:"btn",onClick:t,children:"Cancel"}),Object(u.jsx)("button",{className:"btn",onClick:s,children:"Submit"})]})]})]})},Z=n(41),$=n.n(Z);n(259);var ee=function(e){var t=e.productId,n=e.productName,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(""),j=Object(r.a)(o,2),b=j[0],h=j[1],v=Object(c.useState)(!1),N=Object(r.a)(v,2),g=N[0],y=N[1],S=Object(c.useState)(!1),D=Object(r.a)(S,2),k=D[0],P=D[1],I=Object(c.useState)(!1),F=Object(r.a)(I,2),B=F[0],E=F[1],R=Object(c.useState)(!1),L=Object(r.a)(R,2),M=L[0],Y=L[1],H=Object(c.useState)(!1),_=Object(r.a)(H,2),Q=_[0],G=_[1],U=Object(c.useState)(!1),W=Object(r.a)(U,2),J=W[0],z=W[1],X=Object(c.useState)(!0),Z=Object(r.a)(X,2),$=Z[0],ee=Z[1],te=Object(c.useState)([]),ne=Object(r.a)(te,2),ce=ne[0],ae=ne[1],se=Object(c.useState)([]),ie=Object(r.a)(se,2),re=ie[0],le=ie[1],oe=Object(c.useRef)(null);function de(e){var t=oe.current;t&&!t.contains(e.target)&&P(!1)}Object(c.useEffect)((function(){return document.addEventListener("mousedown",de),function(){document.removeEventListener("mousedown",de)}}),[]),Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var c,a,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),c=!1,a=x.a.CancelToken.source(),s=p.get("/products/".concat(t)),i=p.get("/entriesAndExits/".concat(n)),e.next=7,x.a.all([s,i],{cancelToken:a.token}).then((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1];ae(n.data),le(c.data),y(!1)})).catch((function(e){c||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 7:return e.abrupt("return",(function(){c=!0,a.cancel("Cancelling request")}));case 8:case"end":return e.stop()}}),e)}))),[]);var ue=re.filter((function(e){return"entry"===e.exitOrEntry})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0),je=re.filter((function(e){return"exit"===e.exitOrEntry})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0),be=re.filter((function(e){return"entry"===e.exitOrEntry})).map((function(e){return e.qty})).reduce((function(e,t){return e+t}),0),me=re.filter((function(e){return"exit"===e.exitOrEntry})).map((function(e){return e.qty})).reduce((function(e,t){return e+t}),0),Oe=je/me,he=ce.map((function(e){return e.sellingPrice.toFixed(2)})),xe=((ue-je)/(be-me)).toFixed(2)||0,pe=(Oe-xe).toFixed(2),ve=re.filter((function(e){return"entry"===e.exitOrEntry})),fe=re.filter((function(e){return"exit"===e.exitOrEntry})),Ne=[],ge=[],ye=[],Se=[],Ce=[],De=[],ke=[],we=[],Ae=[],Te=[],Pe=[],Ie=[];ve.filter((function(e){switch(new Date(e.date).getMonth()){case 0:Ne.push(e.amount);break;case 1:ge.push(e.amount);break;case 2:ye.push(e.amount);break;case 3:Se.push(e.amount);break;case 4:Ce.push(e.amount);break;case 5:De.push(e.amount);break;case 6:ke.push(e.amount);break;case 7:we.push(e.amount);break;case 8:Ae.push(e.amount);break;case 9:Te.push(e.amount);break;case 10:Pe.push(e.amount);break;case 11:Ie.push(e.amount);break;default:return null}}));var Fe=[],Be=[],Ee=[],Re=[],Le=[],qe=[],Ve=[],Me=[],Ye=[],He=[],_e=[],Qe=[];fe.filter((function(e){switch(new Date(e.date).getMonth()){case 0:Fe.push(e.amount);break;case 1:Be.push(e.amount);break;case 2:Ee.push(e.amount);break;case 3:Re.push(e.amount);break;case 4:Le.push(e.amount);break;case 5:qe.push(e.amount);break;case 6:Ve.push(e.amount);break;case 7:Me.push(e.amount);break;case 8:Ye.push(e.amount);break;case 9:He.push(e.amount);break;case 10:_e.push(e.amount);break;case 11:Qe.push(e.amount);break;default:return null}})),null===re||void 0===re||re.filter((function(e){return"exit"===e.exitOrEntry})).sort((function(e,t){return new Date(t.date)-new Date(e.date)})).slice(0,5),null===re||void 0===re||re.filter((function(e){return"entry"===e.exitOrEntry})).sort((function(e,t){return new Date(t.date)-new Date(e.date)})).slice(0,5);var Ge=Ne.reduce((function(e,t){return Number(e)+Number(t)}),0),Ue=ge.reduce((function(e,t){return Number(e)+Number(t)}),0),We=ye.reduce((function(e,t){return Number(e)+Number(t)}),0),Je=Se.reduce((function(e,t){return Number(e)+Number(t)}),0),ze=Ce.reduce((function(e,t){return Number(e)+Number(t)}),0),Ke=De.reduce((function(e,t){return Number(e)+Number(t)}),0),Xe=ke.reduce((function(e,t){return Number(e)+Number(t)}),0),Ze=we.reduce((function(e,t){return Number(e)+Number(t)}),0),$e=Ae.reduce((function(e,t){return Number(e)+Number(t)}),0),et=Te.reduce((function(e,t){return Number(e)+Number(t)}),0),tt=Pe.reduce((function(e,t){return Number(e)+Number(t)}),0),nt=Ie.reduce((function(e,t){return Number(e)+Number(t)}),0),ct=Fe.reduce((function(e,t){return Number(e)+Number(t)}),0),at=Be.reduce((function(e,t){return Number(e)+Number(t)}),0),st=Ee.reduce((function(e,t){return Number(e)+Number(t)}),0),it=Re.reduce((function(e,t){return Number(e)+Number(t)}),0),rt=Le.reduce((function(e,t){return Number(e)+Number(t)}),0),lt=qe.reduce((function(e,t){return Number(e)+Number(t)}),0),ot=Ve.reduce((function(e,t){return Number(e)+Number(t)}),0),dt=Me.reduce((function(e,t){return Number(e)+Number(t)}),0),ut=Ye.reduce((function(e,t){return Number(e)+Number(t)}),0),jt=He.reduce((function(e,t){return Number(e)+Number(t)}),0),bt=_e.reduce((function(e,t){return Number(e)+Number(t)}),0),mt=Qe.reduce((function(e,t){return Number(e)+Number(t)}),0),Ot=Object(c.useRef)(null),ht=Object(c.useState)({transform:"translateY(-5rem)",visibility:"hidden"}),xt=Object(r.a)(ht,2),pt=xt[0],vt=xt[1],ft={width:"100%",position:"absolute",color:"gray",fontWeight:"550",padding:"1rem",backgroundColor:"#ffffff",borderRadius:"1rem",transform:pt.transform,visibility:pt.visibility,transition:"transform 0.5s ease"};function Nt(e){var t=Ot.current;t&&!t.contains(e.target)&&vt({transform:"translateY(-5rem)",visibility:"hidden"})}return Object(c.useEffect)((function(){return document.addEventListener("mousedown",Nt),function(){document.removeEventListener("mousedown",Nt)}}),[]),Object(u.jsxs)("div",{className:"CustomerDetails Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsxs)("h1",{children:["Product: ",ce.map((function(e){return e.productName}))]}),Object(u.jsx)("div",{className:"moreOptions",children:Object(u.jsxs)("div",{className:"moreOptions invoicesHeading",ref:Ot,children:[Object(u.jsxs)("button",{className:"invoiceButton",onClick:function(){"hidden"===pt.visibility?vt({transform:"translateY(0)",visibility:"visible"}):vt({transform:"translateY(-5rem)",visibility:"hidden"})},children:["New Transaction",Object(u.jsx)("i",{className:"fas fa-sort-down"})]}),Object(u.jsxs)("div",{className:"moreOptionsCont",style:Object(d.a)({},ft),children:[Object(u.jsx)("p",{className:"option",onClick:function(){G(!0)},children:"Purchase Invoice"}),Object(u.jsx)("p",{className:"option",onClick:function(){z(!0)},children:"Purchase Receipt"}),Object(u.jsx)("p",{className:"option",onClick:function(){E(!0)},children:"Sales Invoice"}),Object(u.jsx)("p",{className:"option",onClick:function(){Y(!0)},children:"Sales Receipt"})]})]})})]}),Object(u.jsx)("div",{className:"filterContainer",children:Object(u.jsxs)("div",{className:"filter",children:[Object(u.jsx)("button",{className:$?"button":"btn",onClick:function(){ee(!0)},children:"Overview"}),Object(u.jsx)("button",{className:$?"btn":"button",onClick:function(){ee(!1)},children:"All Transactions"})]})}),$&&Object(u.jsxs)("div",{className:"customerBodyELements",children:[ce.map((function(e){var t;return Object(u.jsxs)("div",{className:"customerDetailsInfo",children:[Object(u.jsx)("i",{class:"fas fa-image fa-5x"}),Object(u.jsxs)("div",{className:"customerName group",children:[Object(u.jsxs)("h2",{children:["Name: ",e.productName]}),Object(u.jsx)("p",{children:e.description}),Object(u.jsxs)("p",{className:"detail",children:["Unit Selling Price: ",he[0]]}),Object(u.jsxs)("p",{children:["Average Exit Price: ",(null===(t=Number(Oe))||void 0===t?void 0:t.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})]}),Object(u.jsxs)("div",{className:"contactInfos group",children:[Object(u.jsx)("h3",{className:"customerDetail",children:Object(u.jsx)("u",{children:"Stock Info"})}),Object(u.jsxs)("p",{className:"detail",children:["Qty In Stock: ",(be-me).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]}),Object(u.jsxs)("p",{className:"detail",children:[Object(u.jsx)("b",{children:"Value In Stock: \xa0 "})," ",(Number(ue)-Number(je)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]}),Object(u.jsxs)("p",{className:"detail",children:[Object(u.jsx)("b",{children:"WAC/Unit:"})," ",xe.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]}),Object(u.jsxs)("p",{className:"detail",children:[Object(u.jsx)("b",{children:"Gross Profit/Unit:"})," ",Object(u.jsx)("span",{style:{color:pe<0?"red":"black"},children:pe.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("p",{className:"detail",children:[Object(u.jsx)("b",{children:"Gross Profit(%):"})," ",Object(u.jsx)("span",{style:{color:pe<0?"red":"black"},children:((Number(Oe)-Number(xe))/Number(Oe)*100).toFixed(2)})]})]})]})})),Object(u.jsxs)("div",{className:"recentAndBarChart",children:[Object(u.jsxs)("div",{className:"recentTransactions",children:[Object(u.jsxs)("div",{className:"totalPurchases",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Total Entries"})}),Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{style:{padding:"0.5rem"},children:Object(u.jsx)("b",{children:"Qty:"})}),Number(be).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{style:{padding:"0.5rem"},children:Object(u.jsx)("b",{children:"Amount:"})}),Number(ue).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})]}),Object(u.jsxs)("div",{className:"totalPurchases",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Total Exits"})}),Object(u.jsxs)("p",{children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{style:{padding:"0.5rem"},children:Object(u.jsx)("b",{children:"Qty:"})}),Number(me).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{style:{padding:"0.5rem"},children:Object(u.jsx)("b",{children:"Amount:"})}),Number(je).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})]})]})]}),Object(u.jsx)("div",{className:"barChartChart",children:Object(u.jsx)(f,{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],data1:[Ge,Ue,We,Je,ze,Ke,Xe,Ze,$e,et,tt,nt],tooltip1:"Entries",data2:[ct,at,st,it,rt,lt,ot,dt,ut,jt,bt,mt],tooltip2:"Exits"})})]})]}),Object(u.jsx)("div",{className:"allDebtorsContainer",children:!$&&re.length>0?Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"invoiceListHead",children:[Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Entry or Exit"}),Object(u.jsx)("th",{children:"Quantity"}),Object(u.jsx)("th",{children:"Unit Price"}),Object(u.jsx)("th",{children:"Amount"})]})}),Object(u.jsx)("tbody",{className:"",children:null===re||void 0===re?void 0:re.map((function(e,t){return Object(u.jsxs)("tr",{className:"invoiceListbody",children:[Object(u.jsx)("td",{children:new Date(e.date).toLocaleDateString()}),Object(u.jsx)("td",{children:e.exitOrEntry}),Object(u.jsx)("td",{children:Number(e.qty).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:Number(e.up).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:Number(e.amount).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})}))})]}):!$&&Object(u.jsx)("h2",{className:"noData",children:"No Transactions To Display. Please Record Transactions"})}),Q&&Object(u.jsx)(q,{onClick:function(){G(!1)},refetch:function(){h("Purchase Invoice Added Successfully"),l(!0),setTimeout((function(){l(!1),h("")}),2e3)}}),J&&Object(u.jsx)(V,{onClick:function(){z(!1)},refetch:function(){h("Purchase Receipt Added Successfully"),l(!0),setTimeout((function(){l(!1),h("")}),2e3)}}),B&&Object(u.jsx)(A,{onClick:function(){E(!1)},refetch:function(){h("Sales Invoice Added Successfully"),l(!0),setTimeout((function(){l(!1),h("")}),2e3)}}),M&&Object(u.jsx)(T,{onClick:function(){Y(!1)},refetch:function(){h("Sales Receipt Added Successfully"),l(!0),setTimeout((function(){l(!1),h("")}),2e3)}}),g&&Object(u.jsx)(w,{}),k&&Object(u.jsx)("div",{ref:oe,children:Object(u.jsx)(K,{onClick:function(){P(!1)},refetch:function(){h("Product Added Successfully"),l(!0),setTimeout((function(){l(!1),h("")}),2e3)}})}),Object(u.jsx)(C,{alert:i,message:b})]})};var te=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(r.a)(s,2),l=i[0],j=i[1],b=Object(c.useState)(!0),h=Object(r.a)(b,2),v=h[0],f=h[1],g=Object(c.useState)(!1),y=Object(r.a)(g,2),S=y[0],D=y[1],k=Object(c.useState)(!1),P=Object(r.a)(k,2),I=P[0],F=P[1],B=Object(c.useState)(!1),E=Object(r.a)(B,2),R=(E[0],E[1]),L=Object(c.useState)(!1),V=Object(r.a)(L,2),M=V[0],Y=V[1],H=Object(c.useState)(!1),_=Object(r.a)(H,2),Q=_[0],G=_[1],U=Object(c.useState)(!1),W=Object(r.a)(U,2),z=W[0],Z=W[1],te=Object(c.useState)(!1),ne=Object(r.a)(te,2),ce=ne[0],ae=ne[1],se=Object(c.useState)([]),ie=Object(r.a)(se,2),re=ie[0],le=ie[1],oe=Object(c.useState)([]),de=Object(r.a)(oe,2),ue=de[0],je=de[1],be=Object(c.useState)({productName:"",description:""}),me=Object(r.a)(be,2),Oe=me[0],he=me[1],xe=Object(c.useRef)(null),pe=Object(o.g)().search,ve=$.a.parse(pe);console.log(ve);var fe=Object(o.f)();function Ne(e){var t=xe.current;t&&!t.contains(e.target)&&R(!1)}Object(c.useEffect)((function(){return document.addEventListener("mousedown",Ne),function(){document.removeEventListener("mousedown",Ne)}}),[]),Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var t,n,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=x.a.CancelToken.source(),c=p.get("/products"),a=p.get("/entriesAndExits"),e.next=6,x.a.all([c,a],{cancelToken:n.token}).then((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1];le(n.data),je(c.data),f(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 6:return e.abrupt("return",(function(){t=!0,n.cancel("Cancelling request")}));case 7:case"end":return e.stop()}}),e)}))),[]);var ge=ue.filter((function(e){return"exit"===e.exitOrEntry})).map((function(e){return e.productName})),ye=ue.filter((function(e){return"entry"===e.exitOrEntry})).map((function(e){return e.productName})),Se=ge.reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{}),Ce=[];for(var De in Se)Ce.push({k:De,n:Se[De]});Ce.sort((function(e,t){return t.n-e.n})),Ce.map((function(e){return e.k})).slice(0,5),Se=ye.reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{});var ke=[];for(var we in Se)ke.push({k:we,n:Se[we]});ke.sort((function(e,t){return t.n-e.n})),ke.map((function(e){return e.k})).slice(0,5);var Ae=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.put("/deleteProduct",Oe).then((function(e){le(e.data),j("Product Deleted Successfully"),a(!0),setTimeout((function(){a(!1),j("")}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.put("/product",Oe).then((function(e){return le(e.data)}));case 2:F(!1),j("Product Updated Successfully"),a(!0),setTimeout((function(){a(!1),j("")}),2e3);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"InventoryPage",children:[""===pe?Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsx)("h1",{children:"Inventories"}),Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){D(!0)},children:"New Product"})]}),Object(u.jsx)("div",{className:"products allDebtorsContainer",children:Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Product Name"}),Object(u.jsx)("th",{children:"Description"}),Object(u.jsx)("th",{children:"Action"})]})}),Object(u.jsx)("tbody",{children:null===re||void 0===re?void 0:re.map((function(e){return Object(u.jsxs)("tr",{className:"inventoryList invoiceDetail",children:[Object(u.jsx)("td",{className:"inventoryItem",onClick:function(){fe.push("/inventories?id=".concat(e._id,"&name=").concat(e.productName))},children:e.productName}),Object(u.jsx)("td",{className:"inventoryItem",onClick:function(){fe.push("/inventories?id=".concat(e._id,"&name=").concat(e.productName))},children:e.description}),Object(u.jsxs)("td",{className:"inventoryItem upDateOptions",children:[Object(u.jsx)("i",{className:"fas fa-pen",onClick:function(){he(e),F(!0)}}),Object(u.jsx)("i",{className:"fas fa-trash",onClick:function(){he(e),ae(!0)}})]})]})}))})]})})]}),v&&Object(u.jsx)(w,{}),S&&Object(u.jsx)(K,{onClick:function(){D(!1)},refetch:function(){j("Product Added Successfully"),a(!0),setTimeout((function(){a(!1),j("")}),2e3)}}),M&&Object(u.jsx)(A,{onClick:function(){Y(!1)},refetch:function(){j("Sales Incoice Added Successfully"),a(!0),setTimeout((function(){a(!1),j("")}),2e3)}}),Q&&Object(u.jsx)(T,{onClick:function(){G(!1)},refetch:function(){j("Sales Receipt Added Successfully"),a(!0),setTimeout((function(){a(!1),j("")}),2e3)}}),z&&Object(u.jsx)(q,{onClick:function(){Z(!1)},refetch:function(){j("Purchase Invoice Added Successfully"),a(!0),setTimeout((function(){a(!1),j("")}),2e3)}}),I&&Object(u.jsx)(X,{onClick:function(){F(!1)},productName:Oe.productName,description:Oe.description,sellingPrice:Oe.sellingPrice,handleProductSubmit:Te,handleUpdate:function(e){var t=e.target,n=t.name,c=t.value;he((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))}}),ce&&Object(u.jsx)(J,{onClick:function(){ae(!1)},handleDelete:function(){Ae()}})]}):Object(u.jsx)(ee,{productId:ve.id,productName:ve.name}),Object(u.jsx)(C,{alert:n,message:l})]})};n(260),n(261);var ne=function(e){var t=e.cancel,n=Object(c.useState)({sendingAccount:"cash",receivingAccount:"bank"}),a=Object(r.a)(n,2),s=a[0],i=a[1],l=Object(c.useRef)(null),o=function(e){var t=e.target,n=t.name,c=t.value;i((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},j=function(){var e=Object(O.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={sendingAccount:s.sendingAccount,receivingAccount:s.receivingAccount,amount:Number(s.amount)},s.sendingAccount===s.receivingAccount&&alert("Transfer from account must be different from transfer to account"),s.sendingAccount===s.receivingAccount){e.next=10;break}if(s.amount){e.next=7;break}alert("Please add amount to transfer"),e.next=10;break;case 7:return alert("Data posted successfuly"),e.next=10,p.post("/contra-transaction",n).then((function(e){t()}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function b(e){var n=l.current;n&&!n.contains(e.target)&&t()}return Object(c.useEffect)((function(){return document.addEventListener("mousedown",b),function(){document.removeEventListener("mousedown",b)}}),[]),Object(u.jsxs)("div",{className:"Contra",ref:l,children:[Object(u.jsxs)("div",{className:"senderAndReceiverAccounts",children:[Object(u.jsxs)("div",{className:"sendingAccount",children:[Object(u.jsx)("label",{htmlFor:"sendingAccount",children:"Transfer from:"}),Object(u.jsxs)("select",{name:"sendingAccount",value:s.sendingAccount,onChange:o,id:"sendingAccount",children:[Object(u.jsx)("option",{value:"cash",children:"Cash Account"}),Object(u.jsx)("option",{value:"bank",children:"Bank Account"}),Object(u.jsx)("option",{value:"mobileMoney",children:"Mobile Money Account"})]})]}),Object(u.jsxs)("div",{className:"receivingAccount",children:[Object(u.jsx)("label",{htmlFor:"receivingAccount",children:"Transfer To:"}),Object(u.jsxs)("select",{name:"receivingAccount",value:s.receivingAccount,onChange:o,id:"receivingAccount",children:[Object(u.jsx)("option",{value:"bank",children:"Bank Account"}),Object(u.jsx)("option",{value:"cash",children:"Cash Account"}),Object(u.jsx)("option",{value:"mobileMoney",children:"Mobile Money Account"})]})]})]}),Object(u.jsxs)("div",{className:"amountToTransfer",children:[Object(u.jsx)("label",{htmlFor:"amount",children:"Amount to Transfer"}),Object(u.jsx)("input",{type:"number",name:"amount",value:s.amount,onChange:o,id:"amount"})]}),Object(u.jsxs)("div",{className:"submitOptions",children:[Object(u.jsx)("button",{className:"btn",onClick:t,children:"Cancel"}),Object(u.jsx)("button",{className:"btn",onClick:j,children:"Submit"})]})]})};var ce=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([]),i=Object(r.a)(s,2),l=i[0],o=i[1],j=Object(c.useState)(!1),b=Object(r.a)(j,2),h=b[0],v=b[1],N=Object(c.useState)(!1),g=Object(r.a)(N,2),y=g[0],S=g[1],C=Object(c.useState)(!1),k=Object(r.a)(C,2),I=k[0],F=k[1],B=Object(c.useState)(!1),E=Object(r.a)(B,2),R=E[0],Y=E[1],H=Object(c.useState)(!1),_=Object(r.a)(H,2),Q=_[0],G=_[1],U=Object(c.useState)(!1),W=Object(r.a)(U,2),J=W[0],z=W[1],K=Object(c.useState)(!1),X=Object(r.a)(K,2),Z=X[0],$=X[1],ee=Object(c.useState)(!1),te=Object(r.a)(ee,2),ce=te[0],ae=te[1],se=Object(c.useState)(!0),ie=Object(r.a)(se,2),re=ie[0],le=ie[1],oe=Object(c.useState)("cash"),de=Object(r.a)(oe,2),ue=de[0],je=de[1],be=Object(c.useState)(!1),me=Object(r.a)(be,2),Oe=me[0],he=me[1];Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.a.CancelToken.source(),n=!1,e.next=4,p.get("/meansOfPayment",{cancelToken:t.token}).then((function(e){a(!1),o(e.data)})).catch((function(e){n||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 4:return e.abrupt("return",(function(){n=!0,t.cancel("Cancelling request")}));case 5:case"end":return e.stop()}}),e)}))),[]);var xe=l.filter((function(e){return e.meansOfPayment===ue})).filter((function(e){return"out"===e.inOrOut})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0),pe=l.filter((function(e){return e.meansOfPayment===ue})).filter((function(e){return"in"===e.inOrOut})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0),ve=pe-xe,fe=[],Ne=[],ge=[],ye=[],Se=[],Ce=[],De=[],ke=[],we=[],Ae=[],Te=[],Pe=[],Ie=[],Fe=[],Be=[],Ee=[],Re=[],Le=[],qe=[],Ve=[],Me=[],Ye=[],He=[],_e=[],Qe=l.filter((function(e){return e.meansOfPayment===ue}));Qe.filter((function(e){return"in"===e.inOrOut})).map((function(e){switch(new Date(e.date).getMonth()){case 0:fe.push(e.amount);break;case 1:ge.push(e.amount);break;case 2:Se.push(e.amount);break;case 3:De.push(e.amount);break;case 4:we.push(e.amount);break;case 5:Te.push(e.amount);break;case 6:Ie.push(e.amount);break;case 7:Be.push(e.amount);break;case 8:Re.push(e.amount);break;case 9:qe.push(e.amount);break;case 10:Me.push(e.amount);break;case 11:He.push(e.amount);break;default:return null}})),Qe.filter((function(e){return"out"===e.inOrOut})).map((function(e){switch(new Date(e.date).getMonth()){case 0:Ne.push(e.amount);break;case 1:ye.push(e.amount);break;case 2:Ce.push(e.amount);break;case 3:ke.push(e.amount);break;case 4:Ae.push(e.amount);break;case 5:Pe.push(e.amount);break;case 6:Fe.push(e.amount);break;case 7:Ee.push(e.amount);break;case 8:Le.push(e.amount);break;case 9:Ve.push(e.amount);break;case 10:Ye.push(e.amount);break;case 11:_e.push(e.amount);break;default:return null}})),fe=fe.reduce((function(e,t){return e+t}),0),ge=ge.reduce((function(e,t){return e+t}),0),Se=Se.reduce((function(e,t){return e+t}),0),De=De.reduce((function(e,t){return e+t}),0),we=we.reduce((function(e,t){return e+t}),0),Te=Te.reduce((function(e,t){return e+t}),0),Ie=Ie.reduce((function(e,t){return e+t}),0),Be=Be.reduce((function(e,t){return e+t}),0),Re=Re.reduce((function(e,t){return e+t}),0),qe=qe.reduce((function(e,t){return e+t}),0),Me=Me.reduce((function(e,t){return e+t}),0),He=He.reduce((function(e,t){return e+t}),0),Ne=Ne.reduce((function(e,t){return e+t}),0),ye=ye.reduce((function(e,t){return e+t}),0),Ce=Ce.reduce((function(e,t){return e+t}),0),ke=ke.reduce((function(e,t){return e+t}),0),Ae=Ae.reduce((function(e,t){return e+t}),0),Pe=Pe.reduce((function(e,t){return e+t}),0),Fe=Fe.reduce((function(e,t){return e+t}),0),Ee=Ee.reduce((function(e,t){return e+t}),0),Le=Le.reduce((function(e,t){return e+t}),0),Ve=Ve.reduce((function(e,t){return e+t}),0),Ye=Ye.reduce((function(e,t){return e+t}),0),_e=_e.reduce((function(e,t){return e+t}),0);var Ge=fe-Ne,Ue=ge-ye,We=Se-Ce,Je=De-ke,ze=we-Ae,Ke=Te-Pe,Xe=Ie-Fe,Ze=Be-Ee,$e=Re-Le,et=qe-Ve,tt=Me-Ye,nt=He-_e,ct=Object(c.useRef)(null),at=Object(c.useState)({transform:"translateY(-5rem)",visibility:"hidden"}),st=Object(r.a)(at,2),it=st[0],rt=st[1],lt={width:"100%",position:"absolute",color:"gray",fontWeight:"550",padding:"1rem",backgroundColor:"#ffffff",borderRadius:"1rem",transform:it.transform,visibility:it.visibility,transition:"transform 0.5s ease"};function ot(e){var t=ct.current;t&&!t.contains(e.target)&&rt({transform:"translateY(-5rem)",visibility:"hidden"})}return Object(c.useEffect)((function(){return document.addEventListener("mousedown",ot),function(){document.removeEventListener("mousedown",ot)}}),[]),Object(u.jsxs)("div",{className:"liquidityPage Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsx)("h1",{children:"Treasury"}),Object(u.jsxs)("div",{className:"moreOptions invoicesHeading",ref:ct,children:[Object(u.jsxs)("button",{className:"invoiceButton",onClick:function(){"hidden"===it.visibility?rt({transform:"translateY(0)",visibility:"visible"}):rt({transform:"translateY(-5rem)",visibility:"hidden"})},children:["New Transaction ",Object(u.jsx)("i",{className:"fas fa-sort-down"})]}),Object(u.jsxs)("div",{className:"moreOptionsCont",style:Object(d.a)({},lt),children:[Object(u.jsx)("p",{className:"option",onClick:function(){S(!0)},children:"Sales Receipt"}),Object(u.jsx)("p",{className:"option",onClick:function(){Y(!0)},children:"Receive Payment"}),Object(u.jsx)("p",{className:"option",onClick:function(){z(!0)},children:"Puchase Receipt"}),Object(u.jsx)("p",{className:"option",onClick:function(){F(!0)},children:"Make Payment"}),Object(u.jsx)("p",{className:"option",onClick:function(){he(!0)},children:"Inter Account (Contra)"})]})]})]}),Object(u.jsxs)("div",{className:"liquidityOptions",children:[Object(u.jsx)("p",{className:"cash"===ue?"selected":"option",onClick:function(){je("cash")},children:"Cash Account"}),Object(u.jsx)("p",{className:"bank"===ue?"selected":"option",onClick:function(){je("bank")},children:"Bank Account"}),Object(u.jsx)("p",{className:"mobileMoney"===ue?"selected":"option",onClick:function(){je("mobileMoney")},children:"Mobile Money Account"})]}),Object(u.jsxs)("div",{className:"totalInAccount",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"accountTotal",children:"cash"===ue?"Total Cash In ":"bank"===ue?"Total Bank In ":"Total Mobile Money In "}),Object(u.jsx)("p",{children:pe.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"accountTotal",children:"cash"===ue?"Total Cash Out ":"bank"===ue?"Total Bank Out ":"Total Mobile Money Out "}),Object(u.jsx)("p",{children:xe.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"accountTotal",children:"Balance in Account"}),Object(u.jsx)("p",{children:ve.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]}),Object(u.jsxs)("div",{className:"filters",children:[Object(u.jsx)("button",{className:re?"button":"btn",onClick:function(){le(!0)},children:"Overview"}),Object(u.jsx)("button",{className:re?"btn":"button",onClick:function(){le(!1)},children:"All Transactions"})]}),Object(u.jsxs)("div",{children:[re&&Object(u.jsx)(f,{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],data1:[fe,ge,Se,De,we,Te,Ie,Be,Re,qe,Me,He],tooltip1:"".concat(ue," in"),data2:[Ne,ye,Ce,ke,Ae,Pe,Fe,Ee,Le,Ve,Ye,_e],tooltip2:"".concat(ue," out"),data3:[Ge,Ue,We,Je,ze,Ke,Xe,Ze,$e,et,tt,nt],tooltip3:"".concat(ue," balance")}),!re&&Object(u.jsx)("div",{className:"allTrans allDebtorsContainer",children:Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"recentItemHead",children:[Object(u.jsx)("th",{className:"recentItem",children:"Date"}),Object(u.jsx)("th",{className:"recentItem",children:"Sent to / Received from:"}),Object(u.jsx)("th",{className:"recentItem",children:"Description"}),Object(u.jsx)("th",{className:"recentItem",children:"Amount"})]})}),Object(u.jsx)("tbody",{children:l.filter((function(e){return e.meansOfPayment===ue})).sort((function(e,t){return new Date(t.date)-new Date(e.date)})).map((function(e){var t;return Object(u.jsxs)("tr",{className:"recentItemHead",children:[Object(u.jsx)("td",{className:"recentItem",children:e.date}),Object(u.jsx)("td",{className:"recentItem",children:e.name}),Object(u.jsx)("td",{className:"recentItem",children:e.reason}),Object(u.jsx)("td",{className:"recentItem",children:(null===(t=Number(e.amount))||void 0===t?void 0:t.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]},e._id)}))})]})})]}),n&&Object(u.jsx)(w,{}),h&&Object(u.jsx)(A,{onClick:function(){v(!1)}}),y&&Object(u.jsx)(T,{onClick:function(){S(!1)}}),I&&Object(u.jsx)(M,{onClick:function(){F(!1)}}),R&&Object(u.jsx)(P,{onClick:function(){Y(!1)}}),Q&&Object(u.jsx)(q,{onClick:function(){G(!1)}}),J&&Object(u.jsx)(V,{onClick:function(){z(!1)}}),Z&&Object(u.jsx)(D,{onClick:function(){$(!1)}}),ce&&Object(u.jsx)(L,{onClick:function(){ae(!1)}}),Oe&&Object(u.jsx)(ne,{cancel:function(){he(!1)}})]})};n(262);var ae=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(""),j=Object(r.a)(o,2),b=j[0],h=j[1],x=(new Date).toDateString(),v=Object(c.useState)({date:x,purchaseDate:"",ref:"",serialNumber:function(e){var t=(new Date).valueOf();return e.match(/\b(\w)/g).join("").toUpperCase().concat(t.toString())},assetName:"",depRate:"",supplier:"",residualValue:"",cash:"",mobileMoney:"",bank:"",credit:"",vat:"",netPayable:function(e,t,n,c,a){var s=Number(e)+Number(t)+Number(n)+Number(c);return s+s*Number(a)/100}}),f=Object(r.a)(v,2),g=f[0],y=f[1],S=function(e){var t=e.target,n=t.name,c=t.value;y((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},D={date:g.date,purchaseDate:""===g.purchaseDate?g.date:g.purchaseDate,ref:g.ref,serialNumber:""===g.assetName?"":g.serialNumber(g.assetName),assetName:g.assetName,depRate:g.depRate,supplier:g.supplier,residualValue:""===g.residualValue?0:Number(g.residualValue),cash:""===g.cash?0:Number(g.cash),mobileMoney:""===g.mobileMoney?0:Number(g.mobileMoney),bank:""===g.bank?0:Number(g.bank),credit:""===g.credit?0:Number(g.credit),vat:""===g.vat?0:Number(g.vat),netPayable:g.netPayable(g.cash,g.credit,g.mobileMoney,g.bank,g.vat)},k=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==g.assetName&&""!==g.depRate&&""!==g.supplier){e.next=6;break}h("Please fill out fields marked with *"),l(!0),setTimeout((function(){l(!1)}),3e3),e.next=14;break;case 6:if(""!==g.cash||""!==g.bank||""!==g.mobileMoney||""!==g.credit){e.next=12;break}h("Please fill in at least one payment mehod (cash, bank, mobile money, or credit)"),l(!0),setTimeout((function(){l(!1)}),3e3),e.next=14;break;case 12:return e.next=14,p.post("/fixedAssets",D).then((function(e){t(),n()}));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=Object(c.useRef)(null);function A(e){var n=w.current;n&&!n.contains(e.target)&&t()}return Object(c.useEffect)((function(){return document.addEventListener("mousedown",A),function(){document.removeEventListener("mousedown",A)}}),[]),Object(u.jsxs)("div",{className:"NewFixedAsset",ref:w,children:[Object(u.jsx)("div",{className:"close",children:Object(u.jsx)("i",{className:"fas fa-times fa-lg",onClick:t})}),Object(u.jsxs)("div",{className:"assetFormContainer",children:[Object(u.jsxs)("div",{className:"date",children:[Object(u.jsx)("label",{htmlFor:"date",children:"Date:"}),Object(u.jsx)("input",{type:"text",name:"date",id:"date",readOnly:!0,value:g.date})]}),Object(u.jsxs)("div",{className:"purchaseDate",children:[Object(u.jsx)("label",{htmlFor:"purchaseDate",children:"Purchase Date:"}),Object(u.jsx)("input",{type:"date",name:"purchaseDate",id:"purchaseDate",onChange:S,value:g.purchaseDate})]}),Object(u.jsxs)("div",{className:"ref",children:[Object(u.jsx)("label",{htmlFor:"ref",children:"Reference:"}),Object(u.jsx)("input",{type:"text",name:"ref",id:"ref",onChange:S,value:g.ref})]}),Object(u.jsxs)("div",{className:"serialNumber",children:[Object(u.jsx)("label",{htmlFor:"serialNumber",children:"Serial Number:"}),Object(u.jsx)("input",{type:"text",name:"serialNumber",id:"serialNumber",readOnly:!0,value:""===g.assetName?"":g.serialNumber(g.assetName)})]}),Object(u.jsxs)("div",{className:"assetName",children:[Object(u.jsx)("label",{htmlFor:"assetName",children:"Name of Asset*:"}),Object(u.jsx)("input",{type:"text",name:"assetName",id:"assetName",onChange:S,value:g.assetName})]}),Object(u.jsxs)("div",{className:"depRate",children:[Object(u.jsx)("label",{htmlFor:"depRate",children:"Depreciation Rate*:"}),Object(u.jsx)("input",{type:"number",name:"depRate",id:"depRate",onChange:S,value:g.depRate})]}),Object(u.jsxs)("div",{className:"supplier",children:[Object(u.jsx)("label",{htmlFor:"supplier",children:"Supplier*:"}),Object(u.jsx)("input",{type:"text",name:"supplier",id:"supplier",onChange:S,value:g.supplier})]}),Object(u.jsxs)("div",{className:"residualValue",children:[Object(u.jsx)("label",{htmlFor:"residualValue",children:"Residual Value:"}),Object(u.jsx)("input",{type:"number",name:"residualValue",id:"residualValue",onChange:S,value:g.residualValue})]})]}),Object(u.jsxs)("div",{className:"payment",children:[Object(u.jsx)("h3",{children:"Payment"}),Object(u.jsxs)("div",{className:"paymentMethods",children:[Object(u.jsxs)("div",{className:"cash",children:[Object(u.jsx)("label",{htmlFor:"cash",children:"Cash:"}),Object(u.jsx)("input",{type:"number",name:"cash",id:"cash",onChange:S,value:g.cash})]}),Object(u.jsxs)("div",{className:"mobileMoney",children:[Object(u.jsx)("label",{htmlFor:"mobileMoney",children:"Mobile Money:"}),Object(u.jsx)("input",{type:"number",name:"mobileMoney",id:"mobileMoney",onChange:S,value:g.mobileMoney})]}),Object(u.jsxs)("div",{className:"bank",children:[Object(u.jsx)("label",{htmlFor:"bank",children:"Bank:"}),Object(u.jsx)("input",{type:"number",name:"bank",id:"bank",onChange:S,value:g.bank})]}),Object(u.jsxs)("div",{className:"credit",children:[Object(u.jsx)("label",{htmlFor:"credit",children:"Credit:"}),Object(u.jsx)("input",{type:"number",name:"credit",id:"credit",onChange:S,value:g.credit})]}),Object(u.jsxs)("div",{className:"vat",children:[Object(u.jsx)("label",{htmlFor:"vat",children:"VAT(%):"}),Object(u.jsx)("input",{type:"number",name:"vat",id:"vat",onChange:S,value:g.vat})]}),Object(u.jsxs)("div",{className:"credit",children:[Object(u.jsx)("label",{htmlFor:"netPayable",children:"Net Payable:"}),Object(u.jsx)("input",{type:"number",name:"netPayable",id:"netPayable",readOnly:!0,value:g.netPayable(g.cash,g.credit,g.mobileMoney,g.bank,g.vat)})]})]})]}),Object(u.jsxs)("div",{className:"assetSubmitButtons",children:[Object(u.jsx)("button",{className:"btn",onClick:t,children:"Cancel"}),Object(u.jsx)("button",{className:"btn",onClick:k,children:"Save"})]}),Object(u.jsx)(C,{alert:i,message:b})]})};n(263),n(264);var se=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(""),j=Object(r.a)(o,2),b=j[0],h=j[1],x=Object(c.useRef)(),v=Object(c.useState)(8),f=Object(r.a)(v,2),g=f[0],y=f[1],D=g>22?"100%":"".concat(g,"rem"),k=Object(c.useState)(S),w=Object(r.a)(k,2),A=w[0],T=w[1],P=Object(c.useState)({date:(new Date).toDateString(),name:"",email:"",address:"",tel:"",serialNumber:function(e){var t=(new Date).valueOf();return e.match(/\b(\w)/g).join("").toUpperCase().concat(t.toString())},cash:"",bank:"",mobileMoney:""}),I=Object(r.a)(P,2),F=I[0],B=I[1],E=function(e){var t=e.target,n=t.name,c=t.value;B((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},R=function(e,t){return function(n){var c=A.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));T(c)}},L=function(e){var t=(new Date).valueOf();return e.match(/\b(\w)/g).join("").toUpperCase().concat(t.toString())},q=A.filter((function(e){return""!==e.assetName&&""!==e.cost&&""!==e.depRate})).map((function(e){return Object(d.a)(Object(d.a)({},e),{},{serialNumber:L(e.assetName)})}));function V(e){var n=x.current;n&&!n.contains(e.target)&&t()}Object(c.useEffect)((function(){return document.addEventListener("mousedown",V),function(){document.removeEventListener("mousedown",V)}}),[]);var M=(null===q||void 0===q?void 0:q.map((function(e){return Number(e.cost)})).reduce((function(e,t){return e+t}),0))+(""===F.cash?0:Number(F.cash))+(""===F.bank?0:Number(F.bank))+(""===F.mobileMoney?0:Number(F.mobileMoney)),Y={date:F.date,name:F.name,email:F.email,address:F.address,tel:F.tel,serialNumber:""===F.name?"":F.serialNumber(F.name),cash:""===F.cash?0:Number(F.cash),bank:""===F.bank?0:Number(F.bank),mobileMoney:""===F.mobileMoney?0:Number(F.mobileMoney),totalContribution:M,fixedAssets:q},H=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""===F.name?(h("Please add shareholder's name"),l(!0),setTimeout((function(){l(!1)}),3e3)):""===F.cash&&""===F.bank&&""===F.mobileMoney&&0===q.length?(h("please input at least one contribution means"),l(!0),setTimeout((function(){l(!1)}),3e3)):p.post("/shareholders",Y).then((function(e){t(),n()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"NewShareholder",ref:x,children:[Object(u.jsx)("h3",{children:"New Shareholder"}),Object(u.jsxs)("div",{className:"detail",children:[Object(u.jsxs)("div",{className:"date",children:[Object(u.jsx)("label",{htmlFor:"date",children:"Date"}),Object(u.jsx)("input",{type:"text",name:"date",value:F.date,readOnly:!0})]}),Object(u.jsxs)("div",{className:"name",children:[Object(u.jsx)("label",{htmlFor:"name",children:"Shareholder Name"}),Object(u.jsx)("input",{type:"text",name:"name",value:F.name,onChange:E})]}),Object(u.jsxs)("div",{className:"serialNumber",children:[Object(u.jsx)("label",{htmlFor:"serialNumber",children:"Serial Number"}),Object(u.jsx)("input",{type:"text",name:"serialNumber",value:""===F.name?"":F.serialNumber(F.name),readOnly:!0})]})]}),Object(u.jsxs)("div",{className:"detail",children:[Object(u.jsxs)("div",{className:"email",children:[Object(u.jsx)("label",{htmlFor:"email",children:"E-mail"}),Object(u.jsx)("input",{type:"text",name:"email",value:F.email,onChange:E})]}),Object(u.jsxs)("div",{className:"address",children:[Object(u.jsx)("label",{htmlFor:"Address",children:"Address"}),Object(u.jsx)("input",{type:"text",name:"address",value:F.address,onChange:E})]}),Object(u.jsxs)("div",{className:"tel",children:[Object(u.jsx)("label",{htmlFor:"tel",children:"Telephone"}),Object(u.jsx)("input",{type:"number",name:"tel",value:F.tel,onChange:E})]})]}),Object(u.jsxs)("div",{className:"contribution",children:[Object(u.jsx)("h3",{children:"Contribution by:"}),Object(u.jsxs)("div",{className:"cashContributions",children:[Object(u.jsxs)("div",{className:"mobileMoney",children:[Object(u.jsx)("label",{htmlFor:"mobileMoney",children:"Mobile Money"}),Object(u.jsx)("input",{type:"number",name:"mobileMoney",value:F.mobileMoney,onChange:E})]}),Object(u.jsxs)("div",{className:"cash",children:[Object(u.jsx)("label",{htmlFor:"cash",children:"Cash"}),Object(u.jsx)("input",{type:"number",name:"cash",value:F.cash,onChange:E})]}),Object(u.jsxs)("div",{className:"bank",children:[Object(u.jsx)("label",{htmlFor:"bank",children:"Bank"}),Object(u.jsx)("input",{type:"number",name:"bank",value:F.bank,onChange:E})]})]}),Object(u.jsx)("h3",{children:"Fixed Asset Contributions"}),Object(u.jsx)("div",{className:"fixedAssetContributions",style:{height:"".concat(D),overflow:"hidden"},children:Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"invoiceListHead",children:[Object(u.jsx)("th",{children:"Asset Name"}),Object(u.jsx)("th",{children:"Cost"}),Object(u.jsx)("th",{children:"Residual Value"}),Object(u.jsx)("th",{children:"Dep Rate (%)"})]})}),Object(u.jsx)("tbody",{children:A.map((function(e,t){return Object(u.jsxs)("tr",{className:"invoiceLisBody",children:[Object(u.jsx)("td",{children:Object(u.jsx)("input",{type:"text",name:"assetName",value:e.assetName,onChange:R("assetName",t)})}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{type:"number",name:"cost",value:e.cost,onChange:R("cost",t)})}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{type:"number",name:"residualValue",value:e.residualValue,onChange:R("residualValue",t)})}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{type:"number",name:"depRate",value:e.depRate,onChange:R("depRate",t)})})]},t)}))})]})})]}),Object(u.jsxs)("div",{className:"expButtons",children:[Object(u.jsx)("button",{onClick:function(){y((function(e){return e+4})),"100%"===D&&(l(!0),h("Cannot add more rows."),setTimeout((function(){l(!1),h("")}),3e3))},type:"button",className:"addRows btn",children:"Add Rows"}),Object(u.jsxs)("div",{className:"saveOptions",children:[Object(u.jsx)("button",{onClick:t,type:"button",className:"addRows btn",children:"Cancel"}),Object(u.jsx)("button",{onClick:H,type:"button",className:"addRows btn",children:"Save"})]})]}),Object(u.jsx)(C,{message:b,alert:i})]})};n(265);var ie=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(""),j=Object(r.a)(o,2),b=j[0],h=j[1],x=Object(c.useRef)(null),v=Object(c.useState)({date:(new Date).toDateString(),name:"",liabilityName:"",serialNumber:function(e){var t=(new Date).valueOf();return e.match(/\b(\w)/g).join("").toUpperCase().concat(t.toString())},amount:"",duration:"",interestRate:"",receivedBy:"cash"}),f=Object(r.a)(v,2),g=f[0],y=f[1],S=function(e){var t=e.target,n=t.name,c=t.value;y((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},D={date:g.date,name:g.name,liabilityName:g.liabilityName,serialNumber:""!==g.liabilityName?g.serialNumber(g.liabilityName):"",amount:""!==g.amount?Number(g.amount):0,duration:""!==g.duration?Number(g.duration):0,interestRate:""!==g.interestRate?Number(g.interestRate):0,receivedBy:g.receivedBy},k=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==g.name&&""!==g.amount&&""!==g.duration&&""!==g.interestRate){e.next=6;break}h("please fill all required fields"),l(!0),setTimeout((function(){l(!1)}),3e3),e.next=8;break;case 6:return e.next=8,p.post("/longtermLiabilities",D).then((function(e){t(),n()}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function w(e){var n=x.current;n&&!n.contains(e.target)&&t()}return Object(c.useEffect)((function(){return document.addEventListener("mousedown",w),function(){document.removeEventListener("mousedown",w)}}),[]),Object(u.jsxs)("div",{className:"NewLiability",ref:x,children:[Object(u.jsx)("h3",{children:"New Long Term Liability"}),Object(u.jsxs)("div",{className:"liabilityFormContainer",children:[Object(u.jsxs)("div",{className:"date optionItem",children:[Object(u.jsx)("label",{htmlFor:"date",children:"Date"}),Object(u.jsx)("input",{type:"text",name:"date",value:g.date,readOnly:!0})]}),Object(u.jsxs)("div",{className:"individual",children:[Object(u.jsx)("label",{htmlFor:"name",children:"From:"}),Object(u.jsx)("input",{type:"text",name:"name",value:g.name,onChange:S,placeholder:"Institution or individual"})]}),Object(u.jsxs)("div",{className:"name optionItem",children:[Object(u.jsx)("label",{htmlFor:"liabilityName",children:"Name"}),Object(u.jsx)("input",{type:"text",name:"liabilityName",value:g.liabilityName,onChange:S,placeholder:"Liability Name"})]}),Object(u.jsxs)("div",{className:"serialNumber optionItem",children:[Object(u.jsx)("label",{htmlFor:"serialNumber",children:"Serial Number"}),Object(u.jsx)("input",{type:"text",name:"serialNumber",value:""!==g.liabilityName?g.serialNumber(g.liabilityName):"",readOnly:!0})]}),Object(u.jsxs)("div",{className:"duration optionItem",children:[Object(u.jsx)("label",{htmlFor:"duration",children:"Duration (years)"}),Object(u.jsx)("input",{type:"number",name:"duration",value:g.duration,onChange:S,placeholder:"Duration in years"})]}),Object(u.jsxs)("div",{className:"interestRate optionItem",children:[Object(u.jsx)("label",{htmlFor:"interestRate",children:"Interest Rate(%)"}),Object(u.jsx)("input",{type:"number",name:"interestRate",value:g.interestRate,onChange:S,placeholder:"Yearly interest rate"})]}),Object(u.jsxs)("div",{className:"amounts optionItem",children:[Object(u.jsx)("label",{htmlFor:"amount",children:"Amount"}),Object(u.jsx)("input",{type:"number",name:"amount",value:g.amount,onChange:S,placeholder:"Liability value"})]}),Object(u.jsxs)("div",{className:"receivedBy optionItem",children:[Object(u.jsx)("label",{htmlFor:"receivedBy",children:"Received By"}),Object(u.jsxs)("select",{type:"text",name:"receivedBy",value:g.receivedBy,onChange:S,children:[Object(u.jsx)("option",{value:"cash",children:"Cash"}),Object(u.jsx)("option",{value:"bank",children:"Bank"}),Object(u.jsx)("option",{value:"mobileMoney",children:"Mobile Money"})]})]})]}),Object(u.jsxs)("div",{className:"liabilityButtons",children:[Object(u.jsx)("button",{className:"btn",onClick:t,children:"Cancel"}),Object(u.jsx)("button",{className:"btn",onClick:k,children:"Save"})]}),Object(u.jsx)(C,{message:b,alert:i})]})};var re=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),i=Object(r.a)(s,2),j=i[0],b=i[1],h=Object(c.useState)(""),v=Object(r.a)(h,2),f=v[0],g=v[1],y=Object(c.useState)(!1),S=Object(r.a)(y,2),D=S[0],k=S[1],A=Object(c.useState)(!1),T=Object(r.a)(A,2),P=(T[0],T[1]),I=Object(c.useState)(!1),F=Object(r.a)(I,2),B=F[0],E=F[1],R=Object(c.useState)(!0),L=Object(r.a)(R,2),q=L[0],V=L[1],M=Object(c.useState)(!1),Y=Object(r.a)(M,2),H=Y[0],_=Y[1],Q=Object(c.useState)(!0),G=Object(r.a)(Q,2),U=G[0],W=G[1],J=Object(c.useState)([]),z=Object(r.a)(J,2),K=z[0],X=z[1],Z=Object(c.useState)([]),ee=Object(r.a)(Z,2),te=ee[0],ne=ee[1],ce=Object(c.useState)([]),re=Object(r.a)(ce,2),le=re[0],oe=re[1],de=Object(o.f)(),ue=Object(o.g)().search,je=($.a.parse(ue),function(){var e=Object(O.a)(m.a.mark((function e(t,n){var c,a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=p.get("/fixedAssets"),a=p.get("/shareholders"),s=p.get("/longtermLiabilities"),e.next=5,x.a.all([c,a,s],{cancelToken:n.token}).then((function(e){var t=Object(r.a)(e,3),n=t[0],c=t[1],a=t[2];X(n.data),ne(c.data),oe(a.data),W(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return je(e,t),function(){e=!0,t.cancel("Cancelling request")}}),[]);var be=new Date,me=be.getFullYear(),Oe=be.getMonth(),he=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],xe=[];K.forEach((function(e){e.depInfos.forEach((function(e){e.year===me&&xe.push(e)}))}));var pe=Object(c.useRef)(null);function ve(e){var t=pe.current;t&&!t.contains(e.target)&&P(!1)}Object(c.useEffect)((function(){return document.addEventListener("mousedown",ve),function(){document.removeEventListener("mousedown",ve)}}),[]);var fe=null===K||void 0===K?void 0:K.map((function(e){return e.asset.serialNumber})),Ne=Object(c.useRef)(null),ge=Object(c.useState)({transform:"translateY(-5rem)",visibility:"hidden"}),ye=Object(r.a)(ge,2),Se=ye[0],Ce=ye[1],De={width:"100%",position:"absolute",color:"gray",fontWeight:"550",padding:"1rem",backgroundColor:"#ffffff",borderRadius:"1rem",transform:Se.transform,visibility:Se.visibility,transition:"transform 0.5s ease"};function ke(e){var t=Ne.current;t&&!t.contains(e.target)&&Ce({transform:"translateY(-5rem)",visibility:"hidden"})}Object(c.useEffect)((function(){return document.addEventListener("mousedown",ke),function(){document.removeEventListener("mousedown",ke)}}),[]);var we=function(){g("Function Coming Soon!!!"),b(!0),setTimeout((function(){b(!1),g("")}),2e3)},Ae=function(){g("Function Coming Soon!!!"),b(!0),setTimeout((function(){b(!1),g("")}),2e3)},Te=function(){g("Function Coming Soon!!!"),b(!0),setTimeout((function(){b(!1),g("")}),2e3)};return Object(u.jsxs)("div",{className:"Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsx)("h1",{children:"Fixed Assets, Capital & Longterm Liabilities"}),Object(u.jsxs)("div",{className:"moreOptions invoicesHeading",ref:Ne,children:[Object(u.jsxs)("button",{className:"invoiceButton",onClick:function(){"hidden"===Se.visibility?Ce({transform:"translateY(0)",visibility:"visible"}):Ce({transform:"translateY(-5rem)",visibility:"hidden"})},children:["New Transaction ",Object(u.jsx)("i",{className:"fas fa-sort-down"})]}),Object(u.jsxs)("div",{className:"moreOptionsCont",style:Object(d.a)({},De),children:[Object(u.jsx)("p",{className:"option",onClick:function(){a(!0)},children:"Fixed Asset"}),Object(u.jsx)("p",{className:"option",onClick:function(){E(!0)},children:"Shareholder"}),Object(u.jsx)("p",{className:"option",onClick:function(){k(!0)},children:"Longterm Liability"})]})]})]}),Object(u.jsxs)("div",{className:"liquidityOptions",children:[Object(u.jsx)("p",{className:q?"btn selected":"option",onClick:function(){V(!0),de.push("/capital-and-fixed-assets")},children:"Assets Register"}),Object(u.jsx)("p",{className:q?"option":"btn selected",onClick:function(){V(!1),de.push("/capital-and-fixed-assets?eqt=true")},children:"Equity and Long Term Liabilities"})]}),Object(u.jsx)("div",{className:"assetsRegisterContainer",children:""===ue?Object(u.jsxs)("div",{className:"assetsRegister",children:[Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"asset",children:" Date"}),Object(u.jsx)("th",{className:"asset",children:"Purchase Date"}),Object(u.jsx)("th",{className:"asset",children:"Asset Name"}),Object(u.jsx)("th",{className:"asset",children:"Ref Number"}),Object(u.jsx)("th",{className:"asset",children:"Serial Number"}),Object(u.jsx)("th",{className:"asset",children:"Original Value"}),Object(u.jsx)("th",{className:"asset",children:"Residual Value"}),Object(u.jsx)("th",{className:"asset",children:"Dep Rate"}),Object(u.jsx)("th",{className:"asset",children:"Life Span (Years)"})]})}),Object(u.jsx)("tbody",{children:K.map((function(e){return Object(u.jsxs)("tr",{className:"assetDetailParent",onClick:function(){de.push("/assets/".concat(e.asset.serialNumber))},children:[Object(u.jsxs)("td",{className:"asset",children:[" ",new Date(e.asset.date).toLocaleDateString()]}),Object(u.jsx)("td",{className:"asset",children:new Date(e.asset.purchaseDate).toLocaleDateString()}),Object(u.jsxs)("td",{className:"asset",children:[e.asset.assetName.slice(0,10),"..."]}),Object(u.jsxs)("td",{className:"asset",children:[e.asset.ref.slice(0,10),"..."]}),Object(u.jsx)("td",{className:"asset",children:Object(u.jsxs)(l.b,{className:"assetLink",to:"/assets/".concat(e.asset.serialNumber),children:[e.asset.serialNumber.slice(0,10),"..."]})}),Object(u.jsx)("td",{className:"asset",children:e.asset.cost.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"asset",children:Number(e.asset.residualValue).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"asset",children:e.asset.depRate}),Object(u.jsx)("td",{className:"asset",children:(100/e.asset.depRate).toFixed(1)})]},e._id)}))})]}),Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsxs)("th",{className:"asset",children:["Dep of Month ",Object(u.jsx)("small",{children:he[Oe]})," "]}),Object(u.jsxs)("th",{className:"asset",children:["Dep of Year ",Object(u.jsx)("small",{children:me})]}),Object(u.jsxs)("th",{className:"asset",children:["Previous Dep ",Object(u.jsx)("small",{children:me-1})]}),Object(u.jsxs)("th",{className:"asset",children:["Acc Dep ",Object(u.jsx)("small",{children:"".concat(he[11]," ").concat(me)})]}),Object(u.jsxs)("th",{className:"asset",children:["Book Value ",Object(u.jsx)("small",{children:"".concat(he[11]," ").concat(me)})]})]})}),Object(u.jsx)("tbody",{children:xe.map((function(e,t){return Object(u.jsxs)("tr",{className:"assetDetailParent",onClick:function(){de.push("/assets/".concat(fe[t]))},children:[Object(u.jsx)("td",{className:"asset",children:e.monthlyDep.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"asset",children:e.endOfYearDep.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"asset",children:e.previousAccDep.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"asset",children:e.accDep.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"asset",children:e.nbv.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})}))})]})]}):Object(u.jsxs)("div",{className:"shareholdersList",children:[Object(u.jsxs)("div",{className:"buttonContainer",children:[Object(u.jsx)("button",{className:H?"btn":"button",onClick:function(){_(!1)},children:"View Shareholders List"}),Object(u.jsx)("button",{className:H?"button":"btn",onClick:function(){_(!0)},children:"View Liabilities List"})]}),!H&&Object(u.jsxs)("div",{className:"shareholders allDebtorsContainer",children:[Object(u.jsx)("h3",{children:"Shareholders List"}),Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"holderDetail",children:"Shareholder Name"}),Object(u.jsx)("th",{className:"holderDetail",children:"Address"}),Object(u.jsx)("th",{className:"holderDetail",children:"Email"}),Object(u.jsx)("th",{className:"holderDetail",children:"Telephone"}),Object(u.jsx)("th",{className:"holderDetail",children:"Identification Number"}),Object(u.jsx)("th",{className:"holderDetail",children:"Total Contribution"})]})}),Object(u.jsx)("tbody",{children:te.map((function(e){return Object(u.jsxs)("tr",{className:"shareholder invoiceDetail",children:[Object(u.jsx)("td",{className:"holderDetail",onClick:function(){de.push("/shareholders/".concat(e.serialNumber))},children:e.name}),Object(u.jsx)("td",{className:"holderDetail",onClick:function(){de.push("/shareholders/".concat(e.serialNumber))},children:e.address}),Object(u.jsx)("td",{className:"holderDetail",onClick:function(){de.push("/shareholders/".concat(e.serialNumber))},children:Object(u.jsx)("a",{href:"mailto:".concat(e.email),children:e.email})}),Object(u.jsx)("td",{className:"holderDetail",onClick:function(){de.push("/shareholders/".concat(e.serialNumber))},children:Object(u.jsx)("a",{href:"tel:".concat(e.tel),children:e.tel})}),Object(u.jsxs)("td",{className:"holderDetail",onClick:function(){de.push("/shareholders/".concat(e.serialNumber))},children:[" ",e.serialNumber]}),Object(u.jsx)("td",{className:"holderDetail",onClick:function(){de.push("/shareholders/".concat(e.serialNumber))},children:e.totalContribution}),Object(u.jsxs)("td",{className:"holderDetail updateHolder",children:[Object(u.jsx)("small",{onClick:Ae,children:"Update"}),Object(u.jsx)("small",{onClick:we,children:"Redeem"})]})]})}))})]})]}),H&&Object(u.jsxs)("div",{className:"shareholders",children:[Object(u.jsx)("h3",{children:"Liabilities List"}),Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"holderDetail",children:"Date"}),Object(u.jsx)("th",{className:"holderDetail",children:"Libility Name"}),Object(u.jsx)("th",{className:"holderDetail",children:"Individual or Institution"}),Object(u.jsx)("th",{className:"holderDetail",children:"Identification Number"}),Object(u.jsx)("th",{className:"holderDetail",children:"Deposited to:"}),Object(u.jsx)("th",{className:"holderDetail",children:"Interest Rate"}),Object(u.jsx)("th",{className:"holderDetail",children:"Duration"}),Object(u.jsx)("th",{className:"holderDetail",children:"Amount"})]})}),Object(u.jsx)("tbody",{children:le.map((function(e){return Object(u.jsxs)("tr",{className:"liability shareholder",children:[Object(u.jsx)("td",{className:"holderDetail",onClick:function(){de.push("/liabilities/".concat(e.serialNumber))},children:new Date(e.date).toLocaleDateString()}),Object(u.jsx)("td",{className:"holderDetail",onClick:function(){de.push("/liabilities/".concat(e.serialNumber))},children:e.liabilityName}),Object(u.jsx)("td",{className:"holderDetail",onClick:function(){de.push("/liabilities/".concat(e.serialNumber))},children:e.name}),Object(u.jsx)("td",{className:"holderDetail",onClick:function(){de.push("/liabilities/".concat(e.serialNumber))},children:e.serialNumber}),Object(u.jsx)("td",{className:"holderDetail",onClick:function(){de.push("/liabilities/".concat(e.serialNumber))},children:e.receivedBy}),Object(u.jsx)("td",{className:"holderDetail",onClick:function(){de.push("/liabilities/".concat(e.serialNumber))},children:e.interestRate}),Object(u.jsx)("td",{className:"holderDetail",onClick:function(){de.push("/liabilities/".concat(e.serialNumber))},children:e.duration}),Object(u.jsx)("td",{className:"holderDetail",onClick:function(){de.push("/liabilities/".concat(e.serialNumber))},children:e.amount}),Object(u.jsx)("td",{className:"holderDetail updateHolder",children:Object(u.jsx)("small",{onClick:Te,children:"Redeem"})})]})}))})]})]})]})}),n&&Object(u.jsx)(ae,Object(N.a)({onClick:function(){a(!1)},refetch:function(){g("Fixed Asset Added Successfully"),b(!0),setTimeout((function(){b(!1),g("")}),2e3)}},"refetch",(function(){g("Fixed Asset Added Successfully"),b(!0),setTimeout((function(){b(!1),g("")}),2e3)}))),B&&Object(u.jsx)(se,Object(N.a)({onClick:function(){E(!1)},refetch:function(){g("Shareholder Added Successfully"),b(!0),setTimeout((function(){b(!1),g("")}),2e3)}},"refetch",(function(){g("Shareholder Added Successfully"),b(!0),setTimeout((function(){b(!1),g("")}),2e3)}))),U&&Object(u.jsx)(w,{}),D&&Object(u.jsx)(ie,Object(N.a)({onClick:function(){k(!1)},refetch:function(){g("Liability Added Successfully"),b(!0),setTimeout((function(){b(!1),g("")}),2e3)}},"refetch",(function(){g("Liability Added Successfully"),b(!0),setTimeout((function(){b(!1),g("")}),2e3)}))),Object(u.jsx)(C,{alert:j,message:f})]})};n(266);var le=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(r.a)(s,2),l=i[0],d=i[1],j=Object(c.useState)(!1),b=Object(r.a)(j,2),h=b[0],v=b[1],f=Object(c.useState)(!0),N=Object(r.a)(f,2),g=N[0],y=N[1],S=Object(o.h)().serialNumber,D=Object(c.useState)([]),k=Object(r.a)(D,2),A=k[0],T=k[1],P=function(){var e=Object(O.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("/fixedAssets/".concat(S),{cancelToken:n.token}).then((function(e){T(e.data),y(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return P(e,t),function(){e=!0,t.cancel("Cancelling request")}}),[]);var I=(new Date).getFullYear(),F=[];return A.forEach((function(e){e.depInfos.forEach((function(e){F.push(e)}))})),Object(u.jsxs)("div",{className:"FixedAsset Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsxs)("h1",{children:["Asset #",S]}),Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){v(!0)},children:"New Asset"})]}),A.map((function(e){var t;return Object(u.jsxs)("div",{className:"assetInfos",children:[Object(u.jsxs)("div",{className:"leftCorner",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Purchase Date:"})," ",Object(u.jsx)("span",{children:e.asset.purchaseDate})]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Asset Name:"})," ",Object(u.jsx)("span",{children:e.asset.assetName})]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Ref Number:"})," ",Object(u.jsx)("span",{children:e.asset.ref})]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Serial Number:"})," ",Object(u.jsx)("span",{children:e.asset.serialNumber})]})]}),Object(u.jsxs)("div",{className:"rightCorner",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Dep Rate:"})," ",Object(u.jsxs)("span",{children:[e.asset.depRate.toFixed(2),"%"]})]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Life Span:"})," ",Object(u.jsxs)("span",{children:[(100/e.asset.depRate).toFixed(1).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")," year(s)"]})]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Original Value:"})," ",Object(u.jsx)("span",{children:(null===(t=Number(e.asset.cost))||void 0===t?void 0:t.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Residual Value:"})," ",Object(u.jsx)("span",{children:Number(e.asset.residualValue).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]})]})})),Object(u.jsxs)("div",{className:"depSchedule",children:[Object(u.jsx)("h3",{children:"Depreciation Schedule"}),Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"assetDetail",children:"Years"}),Object(u.jsx)("th",{className:"assetDetail",children:"Dep Of Year"}),Object(u.jsxs)("th",{className:"assetDetail",children:["Acc Dep ",Object(u.jsx)("small",{children:"(Prev Year)"})]}),Object(u.jsxs)("th",{className:"assetDetail",children:["Acc Dep ",Object(u.jsx)("small",{children:"(Current Year)"})]}),Object(u.jsxs)("th",{className:"assetDetail",children:["Book Value ",Object(u.jsx)("small",{children:"(Current Year)"})]})]})}),Object(u.jsx)("tbody",{children:F.map((function(e){return Object(u.jsxs)("tr",{className:e.year===I?"assetDetailParentSelected":"assetDetailParent",children:[Object(u.jsx)("td",{className:"assetDetail",children:e.year}),Object(u.jsx)("td",{className:"assetDetail",children:e.endOfYearDep.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"assetDetail",children:e.previousAccDep.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"assetDetail",children:e.accDep.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"assetDetail",children:e.nbv.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})}))})]})]}),h&&Object(u.jsx)(ae,{onClick:function(){v(!1)},refetch:function(){d("Fixed Asset Added Successfully"),a(!0),setTimeout((function(){a(!1),d("")}),2e3)}}),g&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:n,message:l})]})};n(267);var oe=function(){var e=Object(c.useState)(!0),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),i=Object(r.a)(s,2),d=i[0],j=i[1],b=Object(c.useState)([]),h=Object(r.a)(b,2),v=h[0],f=h[1],N=Object(o.h)().serialNumber,g=Object(c.useState)(!1),y=Object(r.a)(g,2),S=y[0],D=y[1],k=Object(c.useState)(""),A=Object(r.a)(k,2),T=A[0],P=A[1],I=function(){var e=Object(O.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("/shareholders/".concat(N),{cancelToken:n.token}).then((function(e){f(e.data),a(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return I(e,t),function(){e=!0,t.cancel("Cancelling request")}}),[]);var F=[];return v.forEach((function(e){e.fixedAssets.forEach((function(e){F.push(e)}))})),Object(u.jsxs)("div",{className:"Shareholder Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsxs)("h1",{children:["Shareholder #",N]}),Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){j(!0)},children:"New Shareholder"})]}),v.map((function(e){return Object(u.jsxs)("div",{className:"shareholderDetail profileDetails",children:[Object(u.jsxs)("div",{className:"personalDetail leftDetails",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Date of Contribution:"})}),e.date]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Identification Number:"})}),e.serialNumber]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Shareholder Name:"})}),e.name]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Address:"})}),e.address]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Email:"})}),e.email]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Contact(tel):"})}),e.tel]})]}),Object(u.jsxs)("div",{className:"accountInfos rightDetails",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Total Contribution:"})}),e.totalContribution.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Total Cash Contribution:"})}),e.cash.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Total Bank Contribution:"})}),e.bank.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Total Mobile Money Contribution:"})}),e.mobileMoney.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Total Fixed Asset Contribution:"})}),e.fixedAssets.map((function(e){return e.cost})).reduce((function(e,t){return e+t}),0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})]})]},e._id)})),Object(u.jsxs)("div",{className:"fixedAssetsDetails depSchedule",children:[!n&&Object(u.jsx)("h3",{children:"Fixed asssets Details"}),Object(u.jsxs)("table",{children:[!n&&Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"assetDetail",children:"Asset Name"}),Object(u.jsx)("th",{className:"assetDetail",children:"Serial Number"}),Object(u.jsx)("th",{className:"assetDetail",children:"Cost"}),Object(u.jsx)("th",{className:"assetDetail",children:"Residual Value"}),Object(u.jsx)("th",{className:"assetDetail",children:"Dep Rate (%)"}),Object(u.jsx)("th",{className:"assetDetail",children:"Lifespan(Years)"})]})}),Object(u.jsx)("tbody",{children:F.map((function(e){var t,n;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"assetDetail",children:Object(u.jsx)(l.b,{to:"/assets/".concat(e.serialNumber),children:e.assetName})}),Object(u.jsx)("td",{className:"assetDetail",children:Object(u.jsx)(l.b,{to:"/assets/".concat(e.serialNumber),children:e.serialNumber})}),Object(u.jsx)("td",{className:"assetDetail",children:null===(t=e.cost)||void 0===t?void 0:t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"assetDetail",children:(null===(n=e.residualValue)||void 0===n?void 0:n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))||0}),Object(u.jsx)("td",{className:"assetDetail",children:e.depRate}),Object(u.jsx)("td",{className:"assetDetail",children:(100/e.depRate).toFixed(2)})]},e._id)}))})]})]}),d&&Object(u.jsx)(se,{onClick:function(){j(!1)},refetch:function(){P("Sahreholder Added Successfully"),D(!0),setTimeout((function(){D(!1),P("")}),2e3)}}),n&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:S,message:T})]})};n(268);var de=function(){var e,t,n,a=Object(c.useState)(!0),s=Object(r.a)(a,2),i=s[0],l=s[1],d=Object(c.useState)([]),j=Object(r.a)(d,2),b=j[0],h=j[1],v=Object(c.useState)(!1),f=Object(r.a)(v,2),N=f[0],g=f[1],y=Object(c.useState)(!1),S=Object(r.a)(y,2),D=S[0],k=S[1],A=Object(c.useState)(""),T=Object(r.a)(A,2),P=T[0],I=T[1],F=Object(o.h)().serialNumber,B=function(){var e=Object(O.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("/longtermLiability/".concat(F),{cancelToken:n.token}).then((function(e){h(e.data),l(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return B(e,t),function(){e=!0,t.cancel("Cancelling request")}}),[]);var E=new Date,R=E.getFullYear(),L=E.getMonth(),q=["Jan","Feb","Mar","Apr","May","June","Jul","Aug","Sept","Oct","Nov","Dec"],V=[];null===(e=b.amortizationData)||void 0===e||e.forEach((function(e){var t=e.data;V=t}));var M=null===(t=b.liabilityDetail)||void 0===t?void 0:t.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0),Y=V.filter((function(e){return e.month===q[L]&&e.year===R})).map((function(e){return e.balanceAtEnd})).reduce((function(e,t){return e+t}),0);return Object(u.jsxs)("div",{className:"Liability Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsxs)("h1",{children:["Liability #",F]}),Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){g(!0)},children:"New Shareholder"})]}),Object(u.jsxs)("div",{className:"profilesDetails",children:[null===(n=b.liabilityDetail)||void 0===n?void 0:n.map((function(e){return Object(u.jsxs)("div",{className:"profileDetails",children:[Object(u.jsxs)("div",{className:"leftDetails",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Identification Number:"})," ",Object(u.jsx)("span",{children:e.serialNumber})]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Source:"})," ",Object(u.jsx)("span",{children:e.name})]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Liability Name:"})," ",Object(u.jsx)("span",{children:e.liabilityName})]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Value:"})," ",Object(u.jsx)("span",{children:e.amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Duration(Years):"})," ",Object(u.jsx)("span",{children:e.duration})]})]}),Object(u.jsxs)("div",{className:"rightDetails",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Duration(Months):"})," ",Object(u.jsx)("span",{children:12*e.duration})]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Interest Rate:"})," ",Object(u.jsx)("span",{children:e.interestRate}),"%"]}),Object(u.jsxs)("p",{children:[Object(u.jsxs)("b",{children:["Yearly Interest ",Object(u.jsx)("small",{children:"(Interest after every 12months): "})]}),Object(u.jsx)("span",{children:(e.amount*e.interestRate/100).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Monthly Interest:"})," ",Object(u.jsx)("span",{children:(e.amount*e.interestRate/1200).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Balance as date:"})," ",Object(u.jsx)("span",{children:Y.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]})]},e._id)})),Object(u.jsxs)("div",{className:"amortizationTable",children:[!i&&Object(u.jsx)("h3",{children:"Repayment Schedule"}),Object(u.jsxs)("table",{children:[!i&&Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"amortization",children:"Period"}),Object(u.jsx)("th",{className:"amortization",children:"Debt At Start"}),Object(u.jsx)("th",{className:"amortization",children:"Interest"}),Object(u.jsx)("th",{className:"amortization",children:"Constant Amortization"}),Object(u.jsx)("th",{className:"amortization",children:"Annuity"}),Object(u.jsx)("th",{className:"amortization",children:"Balance Owing At End"})]})}),Object(u.jsx)("tbody",{children:V.map((function(e,t){return Object(u.jsxs)("tr",{className:q[L]==e.month&&R===e.year?"selected":"notSelected",children:[Object(u.jsx)("td",{className:"amortization",children:"".concat(e.month," ").concat(e.year)}),Object(u.jsx)("td",{className:"amortization",children:(M-e.constantMonthlyAmortization*t).toFixed(2)}),Object(u.jsx)("td",{className:"amortization",children:e.interest}),Object(u.jsx)("td",{className:"amortization",children:e.constantMonthlyAmortization}),Object(u.jsx)("td",{className:"amortization",children:e.annuity}),Object(u.jsx)("td",{className:"amortization",children:e.balanceAtEnd})]},e._id)}))})]})]})]}),i&&Object(u.jsx)(w,{}),N&&Object(u.jsx)(ie,{onClick:function(){g(!1)},refetch:function(){I("Liability Added Successfully"),k(!0),setTimeout((function(){k(!1),I("")}),2e3)}}),Object(u.jsx)(C,{alert:D,message:P})]})};n(269);var ue=function(){var e,t,n,a,s,i,l,o,d,j,b,h,v,f,N,g,y,S,C,D,k,A,T,P,I,F=Object(c.useState)(!0),B=Object(r.a)(F,2),E=B[0],R=B[1],L=Object(c.useState)(!0),q=Object(r.a)(L,2),V=q[0],M=q[1],Y=Object(c.useState)([]),H=Object(r.a)(Y,2),_=H[0],Q=H[1],G=function(){var e=Object(O.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("/",{cancelToken:n.token}).then((function(e){Q(e.data),R(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return G(e,t),function(){e=!0,t.cancel("Cancelling request")}}),[]);var U=(null===(e=_.sales)||void 0===e?void 0:e.filter((function(e){return"sales returns"!==e.saleType})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,W=(null===(t=_.sales)||void 0===t?void 0:t.filter((function(e){return"sales returns"===e.saleType})).map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}),0).toFixed(2))||0,J=(null===(n=_.purchases)||void 0===n?void 0:n.filter((function(e){return"purchase returns"!==e.purchaseType})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0))||0,z=(null===(a=_.purchases)||void 0===a?void 0:a.filter((function(e){return"purchase returns"===e.purchaseType})).map((function(e){return e.netPayable})).reduce((function(e,t){return e+t}),0))||0,K=(null===(s=_.purchaseExpenses)||void 0===s?void 0:s.map((function(e){return e.value})).reduce((function(e,t){return e+t}),0))||0,X=((null===(i=_.inventory)||void 0===i?void 0:i.filter((function(e){return"entry"===e.exitOrEntry})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0))||0)-((null===(l=_.inventory)||void 0===l?void 0:l.filter((function(e){return"exit"===e.exitOrEntry})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0))||0)||0,Z=J+K-z-X||0,$=U-W||0,ee=null===(o=_.discounts)||void 0===o?void 0:o.filter((function(e){return"received"===e.typeOfDiscount})),te=[],ne=[],ce=[];null===ee||void 0===ee||ee.forEach((function(e){0===e.tradeDiscount&&"0.00"===e.tradeDiscount||ce.push(e.tradeDiscount),0===e.cashDiscount&&"0.00"===e.cashDiscount||ne.push(e.cashDiscount),0===e.rebate&&"0.00"===e.rebate||te.push(e.rebate)}));var ae=null===(d=_.discounts)||void 0===d?void 0:d.filter((function(e){return"allowed"===e.typeOfDiscount})).map((function(e){return e.rebate+e.cashDiscount+e.tradeDiscount})).reduce((function(e,t){return e+t}),0),se=(null===(j=_.otherIncome)||void 0===j?void 0:j.map((function(e){return e.value})).reduce((function(e,t){return e+t}),0))||0,ie=(null===ee||void 0===ee?void 0:ee.map((function(e){return Number(e.rebate)+Number(e.cashDiscount)+Number(e.tradeDiscount)})).reduce((function(e,t){return e+t}),0))||0,re=_.expenses,le=(null===(b=_.expenses)||void 0===b?void 0:b.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0))+ae||0,oe=(new Date).getFullYear(),de=_.fixedAssets,ue=[];null===de||void 0===de||de.forEach((function(e){e.depInfos.forEach((function(t){t.assetName=e.asset.assetName,t.cost=e.asset.cost,t.year===oe&&ue.push(t)}))}));var je=ue.map((function(e){return e.cost})).reduce((function(e,t){return Number(e)+Number(t)}),0).toFixed(2)||0,be=ue.map((function(e){return e.nbv})).reduce((function(e,t){return Number(e)+Number(t)}),0).toFixed(2)||0,me=ue.map((function(e){return e.endOfYearDep})).reduce((function(e,t){return Number(e)+Number(t)}),0).toFixed(2)||0,Oe=$-Z||0,he=Oe+se+ie-le-me||0,xe=Oe+se+ie-le;console.log(ue);var pe=(null===_||void 0===_||null===(h=_.debtors)||void 0===h?void 0:h.map((function(e){return e.balanceDue})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,ve=(null===_||void 0===_||null===(v=_.suppliers)||void 0===v?void 0:v.map((function(e){return e.balanceDue})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,fe=(null===_||void 0===_||null===(f=_.meansOfPayment)||void 0===f?void 0:f.filter((function(e){return"cash"===e.meansOfPayment})).filter((function(e){return"in"===e.inOrOut})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,Ne=(null===_||void 0===_||null===(N=_.meansOfPayment)||void 0===N?void 0:N.filter((function(e){return"cash"===e.meansOfPayment})).filter((function(e){return"out"===e.inOrOut})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,ge=Number(fe)-Number(Ne),ye=(null===_||void 0===_||null===(g=_.meansOfPayment)||void 0===g?void 0:g.filter((function(e){return"bank"===e.meansOfPayment})).filter((function(e){return"in"===e.inOrOut})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,Se=(null===_||void 0===_||null===(y=_.meansOfPayment)||void 0===y?void 0:y.filter((function(e){return"bank"===e.meansOfPayment})).filter((function(e){return"out"===e.inOrOut})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,Ce=Number(ye)-Number(Se),De=(null===_||void 0===_||null===(S=_.meansOfPayment)||void 0===S?void 0:S.filter((function(e){return"mobileMoney"===e.meansOfPayment})).filter((function(e){return"in"===e.inOrOut})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,ke=(null===_||void 0===_||null===(C=_.meansOfPayment)||void 0===C?void 0:C.filter((function(e){return"mobileMoney"===e.meansOfPayment})).filter((function(e){return"out"===e.inOrOut})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,we=Number(De)-Number(ke),Ae=(null===_||void 0===_||null===(D=_.capital)||void 0===D?void 0:D.map((function(e){return e.totalContribution})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,Te=(null===_||void 0===_||null===(k=_.longtermLiabilities)||void 0===k?void 0:k.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,Pe=null===_||void 0===_?void 0:_.longtermLiabilities,Ie=null===(A=_.vat)||void 0===A?void 0:A.filter((function(e){return"invoiced"===e.vatType})).map((function(e){return e.value})).reduce((function(e,t){return Number(e)+Number(t)}),0),Fe=null===(T=_.vat)||void 0===T?void 0:T.filter((function(e){return"recoverable"===e.vatType})).map((function(e){return e.value})).reduce((function(e,t){return Number(e)+Number(t)}),0),Be=Number(Ie)-Number(Fe);return Object(u.jsxs)("div",{className:"Reports",children:[!E&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"salesTop"}),Object(u.jsxs)("div",{className:"selectView",children:[Object(u.jsx)("button",{className:"btn",onClick:function(){M(!V)},children:V?"View Balance Sheet":"View Income Statement"}),Object(u.jsx)("div",{})]}),V&&Object(u.jsxs)("div",{className:"incomeStatement",children:[Object(u.jsxs)("h2",{children:["Income Statement (Reflecting end of financial year ",oe,")"]}),Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"element firstElement",children:"Elements"}),Object(u.jsx)("th",{className:"element",children:"Calculations"}),Object(u.jsx)("th",{className:"element",children:"Amounts"})]})}),Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Sales"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:U.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Sales Returns"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:Object(u.jsxs)("u",{children:["(",W.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),")"]})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Net Sales"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("b",{children:$.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Cost Of Sales"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Opening Stock"}),Object(u.jsx)("td",{className:"element",children:0}),Object(u.jsx)("td",{className:"element"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Purchases"}),Object(u.jsx)("td",{className:"element",children:J.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Purchase Expenses"}),Object(u.jsx)("td",{className:"element",children:K.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Purchase Returns"}),Object(u.jsxs)("td",{className:"element",children:["(",z.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),")"]}),Object(u.jsx)("td",{className:"element"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Closing Stock"}),Object(u.jsx)("td",{className:"element",children:Object(u.jsxs)("u",{children:["(",Number(X).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),")"]})}),Object(u.jsx)("td",{className:"element"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Cost of Sales"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:Object(u.jsxs)("u",{children:["(",Number(Z).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),")"]})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Gross Profit"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("b",{children:Number(Oe).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Other Income"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("u",{})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Rebates Received"}),Object(u.jsx)("td",{className:"element",children:(null===te||void 0===te?void 0:te.reduce((function(e,t){return e+t}),0).toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("u",{})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Trade Discounts Received"}),Object(u.jsx)("td",{className:"element",children:(null===ce||void 0===ce?void 0:ce.reduce((function(e,t){return e+t}),0).toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("u",{})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Cash Discounts Received"}),Object(u.jsx)("td",{className:"element",children:(null===ne||void 0===ne?void 0:ne.reduce((function(e,t){return e+t}),0).toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("u",{})})]}),null===(P=_.otherIncome)||void 0===P?void 0:P.map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:e.name}),Object(u.jsx)("td",{className:"element",children:_.otherIncome.length-1===t?Object(u.jsx)("u",{children:Number(e.value).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}):Number(e.value).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("u",{})})]},e._id)})),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Total Other Income"})}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("u",{children:(Number(se)+Number(ie)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("u",{children:(Number(se)+Number(ie)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:(Number(se)+Number(ie)+Number(Oe)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Expenses"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Discounts Allowed"}),Object(u.jsx)("td",{className:"element",children:Number(ae).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element"})]}),null===re||void 0===re?void 0:re.map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:e.expName}),Object(u.jsx)("td",{className:"element",children:t===re.length-1?Object(u.jsx)("u",{children:e.amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}):e.amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element"})]},e._id)})),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Total Expenses"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsxs)("td",{className:"element",children:["(",Object(u.jsx)("u",{children:Number(le).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Earnings Before Depreciation, Interest And Taxes"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:Number(xe).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Depreciation"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element"})]}),null===ue||void 0===ue?void 0:ue.map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:e.assetName}),Object(u.jsx)("td",{className:"element",children:t===ue.length-1?Object(u.jsx)("u",{children:e.accDep.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}):e.accDep.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element"})]},e._id)})),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Total Depreciation"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsxs)("td",{className:"element",children:["(",Object(u.jsx)("u",{children:Number(me).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Earnings Before Interest And Taxes"})}),Object(u.jsx)("th",{className:"element"}),Object(u.jsx)("th",{className:"element",children:Number(he).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]})]})]}),!V&&Object(u.jsxs)("div",{className:"balanceSheet incomeStatement",children:[Object(u.jsxs)("h2",{children:["Balance Sheet as at Dec. ",oe]}),Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"element firstElement",children:"Elements"}),Object(u.jsx)("th",{className:"element"}),Object(u.jsx)("th",{className:"element",children:"Calculations"}),Object(u.jsx)("th",{className:"element",children:"Amount"})]})}),Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Fixed Assets"})}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("b",{children:"Cost"})}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("b",{children:"Acc Dep"})}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("b",{children:"Net Book Value"})})]}),ue.map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:e.assetName}),Object(u.jsx)("td",{className:"element",children:t===ue.length-1?Object(u.jsx)("u",{children:e.cost.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}):e.cost.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element",children:t===ue.length-1?Object(u.jsx)("u",{children:e.accDep.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}):e.accDep.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element",children:t===ue.length-1?Object(u.jsx)("u",{children:e.nbv.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}):e.nbv.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]},e._id)})),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Total Fixed Assets"})}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("b",{children:Object(u.jsx)("u",{children:Number(je).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("b",{children:Object(u.jsx)("u",{children:Number(me).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("b",{children:Number(be).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Current Assets"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Debtors"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:pe.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Closing Inventory"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:Number(X).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Cash"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:ge.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"bank"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:Ce.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Mobile Money"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:we.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Total Current Assets"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("u",{children:(Number(we)+Number(ge)+Number(Ce)+Number(X)+Number(pe)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Total Assets"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("b",{children:(Number(we)+Number(ge)+Number(Ce)+Number(X)+Number(pe)+Number(be)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Current Liabilities"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"VAT to be paid"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("u",{children:Number(Be).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})}),Object(u.jsx)("td",{className:"element"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Creditors"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("u",{children:Number(ve).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})}),Object(u.jsx)("td",{className:"element"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Total Current Liabilities"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("b",{children:Object(u.jsxs)("u",{children:["(",(Number(ve)+Number(Be)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),")"]})})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Longterm Liabilities"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element"})]}),null===Pe||void 0===Pe?void 0:Pe.map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"".concat(e.liabilityName,", ").concat(e.name)}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:t===Pe.length-1?Object(u.jsx)("u",{children:Number(e.amount).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}):Number(e.amount).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element"})]},e._id)})),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Total Longterm Liabilities"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:Object(u.jsxs)("b",{children:["(",Object(u.jsx)("u",{children:Te.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Net Assets"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("b",{children:(Number(we)+Number(ge)+Number(Ce)+Number(X)+Number(pe)+Number(be)-Number(ve)-Number(Be)-Number(Te)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Equity"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element"})]}),null===_||void 0===_||null===(I=_.capital)||void 0===I?void 0:I.map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:e.name}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:e.totalContribution.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{className:"element"})]},e._id)})),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:"Earnings Before Interests and Taxes"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("u",{children:(Number(xe)-Number(me)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})}),Object(u.jsx)("td",{className:"element"})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"element firstElement",children:Object(u.jsx)("b",{children:"Total Equity"})}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element"}),Object(u.jsx)("td",{className:"element",children:Object(u.jsx)("b",{children:(Number(Ae)+(Number(xe)-Number(me))).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]})]})]})]})]}),E&&Object(u.jsx)(w,{})]})};n(270);var je=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),i=Object(r.a)(s,2),l=i[0],o=i[1],d=function(){var e=Object(O.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("/reviews",{cancelToken:n.token}).then((function(e){a(e.data),o(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return d(e,t),function(){e=!0,t.cancel("Cancelling request")}}),[]),Object(u.jsxs)("div",{className:"ReviewsPage",children:[!l&&Object(u.jsx)("div",{className:"reviewsData",children:null===n||void 0===n?void 0:n.map((function(e){var t;return Object(u.jsxs)("div",{className:"reviewItem",children:[Object(u.jsx)("p",{className:"name itemDetailReview",children:e.name}),Object(u.jsx)("p",{className:"email itemDetailReview",children:e.email}),Object(u.jsx)("p",{className:"whatsApp itemDetailReview",children:e.whatsApp}),Object(u.jsx)("p",{className:"message itemDetailReview",children:null===(t=e.message)||void 0===t?void 0:t.substring(0,200)})]})}))}),l&&Object(u.jsx)(w,{})]})};var be=function(e){var t=e.onClick,n=e.refetch,a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],o=Object(c.useState)(!1),j=Object(r.a)(o,2),b=j[0],h=j[1],v=Object(c.useState)(!1),f=Object(r.a)(v,2),y=f[0],S=f[1],k=Object(c.useState)(!1),A=Object(r.a)(k,2),T=A[0],P=A[1],I=Object(c.useState)(!0),F=Object(r.a)(I,2),B=F[0],E=F[1],R=Object(c.useState)([]),L=Object(r.a)(R,2),q=L[0],V=L[1],M=Object(c.useState)([]),Y=Object(r.a)(M,2),H=Y[0],_=Y[1],Q=Object(c.useState)([]),G=Object(r.a)(Q,2),U=G[0],W=(G[1],Object(c.useState)(!1)),J=Object(r.a)(W,2),z=J[0],K=J[1],X=Object(c.useState)(""),Z=Object(r.a)(X,2),$=Z[0],ee=Z[1],te=Object(c.useState)({rebate:"",tradeDiscount:"",cashDiscount:"",valueAddedTax:""}),ne=Object(r.a)(te,2),ce=ne[0],ae=ne[1],se=Object(c.useState)(g),ie=Object(r.a)(se,2),re=ie[0],le=ie[1],oe=Object(c.useState)(""),de=Object(r.a)(oe,2),ue=de[0],je=de[1],be=new Date,me=be.getDate(),Oe=be.getMonth(),he=be.getFullYear(),xe=Object(c.useState)({name:"",email:"",billingAddress:{country:"",city:"",street:""},contact:{telephone:"",mobile:"",fax:""}}),pe=Object(r.a)(xe,2),ve=pe[0],fe=pe[1],Ne=Object(c.useState)(7.5),ge=Object(r.a)(Ne,2),ye=ge[0],Se=ge[1],Ce=ye>36?"100%":"".concat(ye,"rem");Object(c.useEffect)(Object(O.a)(m.a.mark((function e(){var t,n,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=x.a.CancelToken.source(),c=p.get("/products"),a=p.get("/customers"),e.next=6,x.a.all([c,a],{cancelToken:n.token}).then((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1];V(n.data),_(c.data.customers),E(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 6:return e.abrupt("return",(function(){t=!0,n.cancel("Cancelling request")}));case 7:case"end":return e.stop()}}),e)}))),[]);var De=function(e,t){return function(n){var c=re.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));le(c)}},ke=Object(c.useState)([{name:"",amount:""},{name:"",amount:""},{name:"",amount:""},{name:"",amount:""}]),we=Object(r.a)(ke,2),Ae=we[0],Te=we[1],Pe=function(e,t){return function(n){var c=Ae.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));Te(c)}},Ie=Object(c.useRef)(null),Fe=function(e){var t=e.target,n=t.name,c=t.value;ae((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},Be=Object(c.useState)({date:"".concat(me,"/").concat(Oe+1,"/").concat(he),noteNumber:"00".concat(U.length+1),customerName:""}),Ee=Object(r.a)(Be,2),Re=Ee[0],Le=Ee[1],qe=re.map((function(e){return e.amount(e.qty,e.up)})).reduce((function(e,t){return Number(e)+Number(t)}),0),Ve=(qe*(Number(ce.rebate)/100)).toFixed(2),Me=qe-Ve,Ye=(Me*(Number(ce.tradeDiscount)/100)).toFixed(2),He=Me-Ye,_e=(He*(Number(ce.cashDiscount)/100)).toFixed(2),Qe=He-_e,Ge=(Qe*(Number(ce.valueAddedTax)/100)).toFixed(2),Ue=Ae.map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}));function We(e){var t=Ie.current;t&&!t.contains(e.target)&&l(!1)}Object(c.useEffect)((function(){H.filter((function(e){return e.name===ue})).map((function(e){return fe(Object(d.a)({},e))}))}),[ue]),Object(c.useEffect)((function(){return document.addEventListener("mousedown",We),function(){document.removeEventListener("mousedown",We)}}),[]);var Je=re.filter((function(e){return""!==e.productName&&""!==e.qty&&""!==e.up})).map((function(e){return{productName:e.productName,description:e.description,qty:e.qty,up:e.up,amount:e.qty*e.up}})),ze=Ae.filter((function(e){return""!==e.name&&""!==e.amount})),Ke={noteInput:Re,customerDetails:ve,data:Je,additionsAndSubtractions:ce,discountsAndVat:{rebateValue:Ve,tradeDiscountValue:Ye,cashDiscountValue:_e,valueAddedTax:Ge},otherAdditions:ze,grossAmount:qe,netPayable:(Qe+Number(Ge)+Ue).toFixed(2)},Xe=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""!==ve.name&&Je.length>0?(setTimeout((function(){E(!0)}),500),p.post("/debitNote",Ke).then((function(e){console.log(e.data),t(),n(),E(!1)}))):(ee("Please select a customer and add at least one product"),K(!0),setTimeout((function(){K(!1)}),3e3));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"Quotation",children:[Object(u.jsx)("div",{className:"close",onClick:t,children:Object(u.jsx)("i",{className:"fas fa-times fa-lg"})}),Object(u.jsx)("h3",{children:"New Debit Note"}),Object(u.jsx)("div",{className:"formContainer",children:Object(u.jsxs)("form",{action:"",method:"post",children:[Object(u.jsxs)("div",{className:"quotationTop",children:[Object(u.jsxs)("div",{className:"date",children:[Object(u.jsx)("label",{htmlFor:"date",children:"Date:"}),Object(u.jsx)("input",{type:"text",name:"date",value:Re.date,id:"date",contentEditable:!1,readOnly:!0})]}),Object(u.jsxs)("div",{className:"noteNumber",children:[Object(u.jsx)("label",{htmlFor:"quoteNumber",children:"Note Number:"}),Object(u.jsx)("input",{type:"text",name:"quoteNumber",id:"quoteNumber",value:Re.quoteNumber,readOnly:!0})]})]}),Object(u.jsxs)("div",{className:"customerDetails",children:[Object(u.jsxs)("div",{ref:Ie,className:"customerName",children:[Object(u.jsx)("label",{htmlFor:"customerName",children:"Receiver: "}),Object(u.jsx)("input",{type:"text",value:ue,onChange:function(e){je(e.target.value)},onClick:function(){l(!i)},name:"customerName",className:"autoListItemInput",id:"customerName",placeholder:"Select Customer"}),i&&Object(u.jsxs)("div",{className:"autoCompleteContainer",children:[Object(u.jsx)("button",{type:"button",onClick:function(){P(!0)},children:"Add New Customer"}),H.filter((function(e){var t;return!ue||(!!(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===ue||void 0===ue?void 0:ue.toLowerCase()))||void 0)})).map((function(e,t){return Object(u.jsx)("div",{className:"autoListItem",onClick:function(){je(e.name),l(!1)},tabIndex:"0",children:Object(u.jsx)("p",{children:e.name})},t)}))]})]}),Object(u.jsx)("div",{className:"customerEmail",children:Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Email: "}),null===ve||void 0===ve?void 0:ve.email]})}),Object(u.jsxs)("div",{className:"deliveryAdress",children:[Object(u.jsx)("h4",{children:"Delivery Address & Contact"}),Object(u.jsxs)("div",{className:"addressInfo",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Country: "}),null===ve||void 0===ve?void 0:ve.country]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"City: "}),null===ve||void 0===ve?void 0:ve.city]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Street: "}),null===ve||void 0===ve?void 0:ve.street]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Tel: "}),null===ve||void 0===ve?void 0:ve.telephone]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Mobile: "}),null===ve||void 0===ve?void 0:ve.mobile]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Fax: "}),null===ve||void 0===ve?void 0:ve.fax]})]})]})]}),Object(u.jsxs)("div",{className:"additionalInfo",children:[Object(u.jsx)("div",{className:"textArea",children:Object(u.jsx)("textarea",{name:"additionalInfo",id:"additionalInfo",cols:"60",rows:"6",value:Re.additonalInfo,onChange:function(e){var t=e.target,n=t.name,c=t.value;Le((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},placeholder:"Add additional information to receiver",className:"textArea"})}),Object(u.jsx)("div",{className:"amount",children:Object(u.jsxs)("h3",{children:["Net to your debit: ",(Qe+Number(Ge)+Ue).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})})]}),Object(u.jsxs)("div",{className:"itemsContainer",children:[Object(u.jsx)("ul",{children:Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsx)("span",{className:"listTitle",children:"Product Name"}),Object(u.jsx)("span",{className:"listTitle",children:"Description"}),Object(u.jsx)("span",{className:"listTitle",children:"Quantity"}),Object(u.jsx)("span",{className:"listTitle",children:"Unit Price"}),Object(u.jsx)("span",{className:"listTitle",children:"Amount"})]})}),Object(u.jsx)("ul",{style:{height:"".concat(Ce),overflow:"hidden"},className:"items",children:re.map((function(e,t){var n;return Object(u.jsxs)("li",{className:"listItem",children:[Object(u.jsxs)("select",(n={name:"productName",id:"productName",value:e.productName,onChange:De("productName")},Object(N.a)(n,"onChange",De("productName",t)),Object(N.a)(n,"children",[Object(u.jsx)("option",{children:" "}),q.map((function(e){return Object(u.jsx)("option",{value:e.productName,children:e.productName})}))]),n)),Object(u.jsx)("input",{type:"text",name:"description",value:e.description,onChange:De("description",t)}),Object(u.jsx)("input",{type:"number",name:"qty",value:e.qty,onChange:De("qty",t)}),Object(u.jsx)("input",{type:"number",name:"up",value:e.up,onChange:De("up",t)}),Object(u.jsx)("input",{type:"number",name:"amount",value:e.amount(e.qty,e.up),readOnly:!0})]},t)}))})]}),Object(u.jsxs)("div",{className:"summation",children:[Object(u.jsx)("button",{onClick:function(){Se((function(e){return e+7.3})),"100%"===Ce&&(ee("Cannot Add more rows"),K(!0),setTimeout((function(){K(!1)}),3e3))},type:"button",className:"addRows btn",children:"Add Rows"}),Object(u.jsxs)("h3",{className:"amount",children:["Gross Amount: ",qe.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")]})]}),Object(u.jsxs)("div",{className:"deductionsAndAdditions",children:[Object(u.jsx)("h5",{children:"Deductions"}),Object(u.jsxs)("div",{className:"deductions",children:[Object(u.jsx)("button",{onClick:function(){S(!y)},type:"button",children:y?"Shrink Deductions":"Collapse Deductions"}),y&&Object(u.jsxs)("ul",{className:"deductions",children:[Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{className:"elements",children:"Elements"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Rate"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Amount"})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Rebate"}),Object(u.jsx)("input",{type:"number",name:"rebate",id:"rebate",onChange:function(e){Fe(e)},value:ce.rebate}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Ve.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Commercial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:Me.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Trade Discount"}),Object(u.jsx)("input",{type:"number",name:"tradeDiscount",id:"tradeDiscount",onChange:function(e){Fe(e)},value:ce.tradeDiscount}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:Ye.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Commercial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:He.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:"Cash Discount"}),Object(u.jsx)("input",{type:"number",name:"cashDiscount",id:"cashDiscount",onChange:function(e){Fe(e)},value:ce.cashDiscount}),Object(u.jsxs)("u",{children:["(",Object(u.jsx)("span",{children:_e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),")"]})]}),Object(u.jsxs)("li",{className:"deductItem",children:[Object(u.jsx)("span",{className:"elements",children:Object(u.jsx)("b",{children:"Financial Net"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:Qe.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]})]})]}),Object(u.jsxs)("div",{className:"additions",children:[Object(u.jsx)("h5",{children:"Additions"}),Object(u.jsx)("button",{onClick:function(){h(!b)},type:"button",children:b?"Shrink Additions":"Collapse All"}),Object(u.jsxs)("ul",{className:"otherAdditions",children:[Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("li",{className:"additionItem",children:[Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Element"})}),Object(u.jsx)("b",{children:Object(u.jsx)("span",{children:"Amount"})})]})}),Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("li",{className:"deductItem additionItem",children:[Object(u.jsx)("span",{children:"Tax (VAT) Rate"}),Object(u.jsx)("input",{type:"number",name:"valueAddedTax",id:"valueAddedTax",onChange:function(e){Fe(e)},value:ce.valueAddedTax}),Object(u.jsx)("span",{children:Ge.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})}),b&&Object(u.jsx)("div",{className:"otherAdditions",children:Ae.map((function(e,t){return Object(u.jsxs)("li",{className:"additionItem",children:[Object(u.jsx)("input",{type:"text",value:e.name,onChange:Pe("name",t),name:"name"}),Object(u.jsx)("input",{type:"number",value:e.amount,onChange:Pe("amount",t),name:"amount"})]},t)}))}),Object(u.jsx)("div",{className:"otherAdditions",children:Object(u.jsxs)("div",{className:"additionItem",children:[Object(u.jsx)("h5",{children:"Total Additions"}),Object(u.jsx)("h5",{children:(Number(Ge)+Ue).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})})]})]}),Object(u.jsxs)("div",{className:"netPay",children:[Object(u.jsx)("h3",{children:"Net To Your Debit"}),Object(u.jsx)("h3",{children:(Qe+Number(Ge)+Ue).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]}),Object(u.jsxs)("div",{className:"saveOptions",children:[Object(u.jsx)("button",{onClick:t,type:"button",className:"addRows btn",children:"Cancel"}),Object(u.jsx)("button",{onClick:function(){Xe(),console.log("Save Button Clicked")},type:"button",className:"addRows btn",children:"Save"}),Object(u.jsx)("button",{onClick:function(){Xe(),console.log("Save and send Button Clicked")},type:"button",className:"addRows btn",children:"Save and Send"})]})]})}),T&&Object(u.jsx)(D,{onClick:function(){P(!1)}}),B&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:z,message:$})]})};n(271);var me=function(e){var t=e.fontawesome,n=e.title,c=e.onClick;return Object(u.jsxs)("div",{className:"SalesOptionsItem",onClick:c,children:[t,Object(u.jsx)("p",{children:n})]})};var Oe=function(e){var t=e.newQuotation,n=e.newInvoice,a=e.newCreditNote,s=e.newReceipt,i=e.newReceivePayment,r=e.newPurchaseInvoice,l=e.newMakePayment,o=e.newDebitNote,d=e.newPurchaseReturns,j=e.newPurchaseOrder,b=e.newExpense,m=e.newCashPurchase,O=e.onClick,h=Object(c.useRef)(),x=function(e){var t=h.current;t&&!t.contains(e.target)&&O()};return Object(c.useEffect)((function(){return document.addEventListener("mousedown",x),function(){document.removeEventListener("mousedown",x)}}),[]),Object(u.jsxs)("div",{className:"salesAndPurchases",ref:h,children:[Object(u.jsxs)("div",{className:"salesAndPurchases",children:[Object(u.jsx)("h3",{children:"Sales:"}),Object(u.jsxs)("div",{className:"SalesOptions",children:[Object(u.jsx)(me,{fontawesome:Object(u.jsx)("i",{className:"fas fa-file-alt fa-3x"}),title:"New Quotation",onClick:t}),Object(u.jsx)(me,{fontawesome:Object(u.jsx)("i",{className:"fas fa-file-invoice fa-3x"}),title:"New Invoice",onClick:n}),Object(u.jsx)(me,{fontawesome:Object(u.jsx)("i",{className:"fas fa-receipt fa-3x"}),title:"Sales Receipt",onClick:s}),Object(u.jsx)(me,{fontawesome:Object(u.jsx)("i",{className:"fas fa-money-check-alt fa-3x"}),title:"Receive Payment",onClick:i}),Object(u.jsx)(me,{fontawesome:Object(u.jsx)("i",{className:"fas fa-file-invoice fa-3x"}),title:"Sales Returns",onClick:a}),Object(u.jsx)(me,{fontawesome:Object(u.jsx)("i",{className:"fas fa-file-invoice fa-3x"}),title:"Debit Note",onClick:o})]})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:"Purchases and Expenses:"}),Object(u.jsxs)("div",{className:"PurchaseOptions",children:[Object(u.jsx)(me,{fontawesome:Object(u.jsx)("i",{className:"fas fa-file-alt fa-3x"}),title:"Letter of Enquiry"}),Object(u.jsx)(me,{fontawesome:Object(u.jsx)("i",{className:"fas fa-file-invoice fa-3x"}),title:"Purchase Order",onClick:j}),Object(u.jsx)(me,{fontawesome:Object(u.jsx)("i",{className:"fas fa-file-invoice fa-3x"}),title:"New Purchase Invoice",onClick:r}),Object(u.jsx)(me,{fontawesome:Object(u.jsx)("i",{className:"fas fa-receipt fa-3x"}),title:"Cash Purchase",onClick:m}),Object(u.jsx)(me,{fontawesome:Object(u.jsx)("i",{className:"fas fa-money-check-alt fa-3x"}),title:"Make Payment",onClick:l}),Object(u.jsx)(me,{fontawesome:Object(u.jsx)("i",{className:"fas fa-file-alt fa-3x"}),title:"New Expense",onClick:b}),Object(u.jsx)(me,{fontawesome:Object(u.jsx)("i",{className:"fas fa-file-invoice fa-3x"}),title:"Purchase Returns",onClick:d})]})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:"Others"}),Object(u.jsxs)("div",{className:"PurchaseOptions",children:[Object(u.jsx)("button",{className:"btn",children:"Customer"}),Object(u.jsx)("button",{className:"btn",children:"Supplier"}),Object(u.jsx)("button",{className:"btn",children:"Inventory Item"}),Object(u.jsx)("button",{className:"btn",children:"Fixed Asset"}),Object(u.jsx)("button",{className:"btn",children:"Longterm Liability"}),Object(u.jsx)("button",{className:"btn",children:"Shareholder"}),Object(u.jsx)("button",{className:"btn",children:"Employee"})]})]})]})};n(21),n(272);var he=function(e){var t=e.totalDebt,n=e.totalPaid,c=e.balance,a=e.inputValue,s=e.handleChange,i=e.cancel,r=e.submit;return Object(u.jsxs)("div",{className:"SinglePay",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Receive Payment from Customer"})}),Object(u.jsxs)("div",{className:"overViewDetails",children:[Object(u.jsxs)("div",{className:"Element",children:[Object(u.jsx)("p",{className:"ElementName",children:"Total Debt"}),Object(u.jsx)("p",{className:"ElementValue",children:t})]}),Object(u.jsxs)("div",{className:"Element",children:[Object(u.jsx)("p",{className:"ElementName",children:"Total Paid"}),Object(u.jsx)("p",{className:"ElementValue",children:n})]}),Object(u.jsxs)("div",{className:"Element",children:[Object(u.jsx)("p",{className:"ElementName",children:"Balance"}),Object(u.jsx)("p",{className:"ElementValue",children:c})]})]}),Object(u.jsxs)("div",{className:"amountToPay",children:[Object(u.jsx)("input",{type:"number",name:"amountToPay",id:"amountToPay",value:a.amountToPay,onChange:s,placeholder:"Enter amount to pay"}),Object(u.jsxs)("select",{name:"meansOfPayment",id:"meansOfPayment",value:a.meansOfPayment,onChange:s,children:[Object(u.jsx)("option",{value:"cash",children:"Cash (Default)"}),Object(u.jsx)("option",{value:"bank",children:"Bank"}),Object(u.jsx)("option",{value:"mobileMoney",children:"Mobile Money"})]})]}),Object(u.jsxs)("div",{className:"optionButtons",children:[Object(u.jsx)("button",{className:"btn",onClick:i,children:"Cancel"}),Object(u.jsx)("button",{className:"btn",onClick:r,children:"Submit"})]})]})};var xe=function(){var e=Object(o.f)(),t=Object(c.useState)(!1),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),l=Object(r.a)(i,2),j=l[0],b=l[1],h=Object(c.useState)(!1),v=Object(r.a)(h,2),f=v[0],g=v[1],y=Object(c.useRef)(null),S=Object(c.useState)(!1),D=Object(r.a)(S,2),k=D[0],T=D[1],P=Object(c.useState)(""),I=Object(r.a)(P,2),F=I[0],B=I[1],E=Object(c.useState)([]),R=Object(r.a)(E,2),L=R[0],q=R[1],V=Object(c.useState)({}),M=Object(r.a)(V,2),Y=M[0],H=M[1],_=Object(c.useState)({}),Q=Object(r.a)(_,2),G=Q[0],U=Q[1],W=Object(c.useState)({amountToPay:"",meansOfPayment:"cash"}),J=Object(r.a)(W,2),z=J[0],K=J[1],X=function(e){var t=e.target,n=t.name,c=t.value;H((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},Z=function(){var e=Object(O.a)(m.a.mark((function e(t,n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,p.get("/invoices",{cancelToken:t.token});case 4:c=e.sent,q(c.data),b(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n||(x.a.isCancel(e.t0)?console.log("Request Cancelled"):console.log("Something went wrong"));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e=x.a.CancelToken.source(),t=!1;return Z(e,t),function(){t=!0,e.cancel("Cancelling request")}}),[]);var $=L.invoices,ee=L.debtors,te=[],ne=[],ce=new Date,ae=ce.getFullYear(),se=ce.getMonth(),ie=ce.getDate(),re=null===$||void 0===$?void 0:$.map((function(e){return e.grossAmount})).reduce((function(e,t){return Number(e)+Number(t)}),0),le=(null===ee||void 0===ee?void 0:ee.map((function(e){return e.balanceDue})).reduce((function(e,t){return Number(e)+Number(t)}),0))||0,oe=(le/re*360).toFixed(2)||0;null===$||void 0===$||$.forEach((function(e){var t=new Date(null===e||void 0===e?void 0:e.dueDate),n=t.getFullYear(),c=t.getMonth(),a=t.getDate();n===ae&&(c<se&&te.push(e),c===se&&a<ie&&te.push(e)),c===se&&ne.push(e)}));var de=(null===te||void 0===te?void 0:te.map((function(e){return e.balanceDue})).reduce((function(e,t){return Number(e)+Number(t)}),0))||0,ue=(null===ne||void 0===ne?void 0:ne.map((function(e){return e.balanceDue})).reduce((function(e,t){return Number(e)+Number(t)}),0))||0,je=function(t){e.push(t)};function be(e){var t=y.current;t&&!t.contains(e.target)&&g(!1)}Object(c.useEffect)((function(){return document.addEventListener("mousedown",be),function(){document.removeEventListener("mousedown",be)}}),[]);var me={source:"receive payment",template:[Object(d.a)(Object(d.a)({},G),{},{date:(new Date).toDateString(),amountToPay:""===z.amountToPay?0:Number(z.amountToPay),meansOfPayment:z.meansOfPayment})],totalToPay:""===z.amountToPay?0:Number(z.amountToPay)},Oe=function(){B("Function coming soon."),T(!0),setTimeout((function(){T(!1)}),3e3)};return Object(u.jsxs)("div",{className:"Invoices",children:[!j&&Object(u.jsxs)("div",{className:"Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsx)("h1",{children:"Invoices"}),Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){s(!0)},children:"New Invoice"})]}),Object(u.jsxs)("div",{className:"overDueInvoices",children:[Object(u.jsxs)("div",{className:"overDue",children:[Object(u.jsx)("p",{className:"title",children:"Total Overdue"}),Object(u.jsx)("p",{children:Number(de).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"dueInDays",children:[Object(u.jsx)("p",{className:"title",children:"Due this Month"}),Object(u.jsx)("p",{children:Number(ue).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"collectionDays",children:[Object(u.jsx)("p",{className:"title",children:"Average Collection Days"}),Object(u.jsxs)("p",{children:[oe," days"]})]}),Object(u.jsxs)("div",{className:"totalDebt",children:[Object(u.jsx)("p",{className:"title",children:"Total Outstanding Debtors"}),Object(u.jsx)("p",{children:Number(le).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]}),Object(u.jsxs)("div",{className:"invoiceFilters",children:[Object(u.jsx)("div",{className:"nameFilter",children:Object(u.jsx)("input",{type:"text",name:"nameFilter",value:Y.nameFilter,onChange:X,className:"filterInput",placeholder:"Filter by customer name"})}),Object(u.jsx)("div",{className:"amountFilter",children:Object(u.jsx)("input",{type:"text",name:"amountFilter",value:Y.amountFilter,onChange:X,className:"filterInput",placeholder:"Filter by amount"})})]}),Object(u.jsx)("div",{className:"allDebtorsContainer",children:Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Customer Name"}),Object(u.jsx)("th",{children:"Invoice Number"}),Object(u.jsx)("th",{children:"Due Date"}),Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Net Amount"}),Object(u.jsx)("th",{children:"Total Paid"}),Object(u.jsx)("th",{children:"Balance Due"}),Object(u.jsx)("th",{children:"Status"})]})}),Object(u.jsx)("tbody",{children:null===$||void 0===$?void 0:$.filter((function(e){return e.netPayable>e.totalPaid})).sort((function(e,t){return new Date(t.invoiceInput.date)-new Date(e.invoiceInput.date)})).filter((function(e){var t,n,c;return!Y.nameFilter&&!Y.amountFilter||(!Y.amountFilter&&!Y.nameFilter||(!!(null===(t=e.customerDetails.name)||void 0===t?void 0:t.toLowerCase().includes(null===(n=Y.nameFilter)||void 0===n?void 0:n.toLowerCase()))||(!!(null===(c=e.netPayable)||void 0===c?void 0:c.toString().includes(Y.amountFilter))||void 0)))})).map((function(e){return Object(u.jsxs)("tr",{className:"invoiceDetail",children:[Object(u.jsx)("td",{onClick:function(){je("/invoices/".concat(e._id))},children:e.customerDetails.name}),Object(u.jsx)("td",{onClick:function(){je("/invoices/".concat(e._id))},children:e.invoiceInput.invoiceNumber}),Object(u.jsx)("td",{onClick:function(){je("/invoices/".concat(e._id))},children:new Date(e.dueDate).toLocaleDateString()}),Object(u.jsx)("td",{onClick:function(){je("/invoices/".concat(e._id))},children:new Date(e.invoiceInput.date).toLocaleDateString()}),Object(u.jsx)("td",{onClick:function(){je("/invoices/".concat(e._id))},children:Number(e.netPayable).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{onClick:function(){je("/invoices/".concat(e._id))},children:Number(e.totalPaid).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{onClick:function(){je("/invoices/".concat(e._id))},children:Number(e.balanceDue).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{onClick:function(){je("/invoices/".concat(e._id))},children:Number(e.netPayable)>Number(e.totalPaid)?"Owing":e.netPayable===e.totalPaid?"Paid":"Over Paid"}),Object(u.jsxs)("td",{className:"sendInvoice",children:[Object(u.jsxs)("span",{onClick:function(){U(e),g(!0)},children:[Object(u.jsx)("i",{class:"fas fa-file-alt fa-sm"}),Object(u.jsx)("small",{style:{display:"block"},children:"Pay"})]}),Object(u.jsxs)("span",{onClick:Oe,children:[Object(u.jsx)("i",{className:"fas fa-share fa-sm"}),Object(u.jsx)("small",{style:{display:"block"},children:"Send"})]})]})]},e._id)}))})]})}),a&&Object(u.jsx)(A,{onClick:function(){s(!1)},refetch:function(){var e=x.a.CancelToken.source();T(!0),B("Invoice Added Successfully"),setTimeout((function(){T(!1),B("")}),2e3),Z(e,!1)}}),Object(u.jsx)("div",{ref:y,children:f&&Object(u.jsx)(he,{totalDebt:G.netPayable?Number(null===G||void 0===G?void 0:G.netPayable).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"",totalPaid:G.netPayable?Number(null===G||void 0===G?void 0:G.totalPaid).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"",balance:G.netPayable?Number(null===G||void 0===G?void 0:G.balanceDue).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"",inputValue:z,handleChange:function(e){!function(e){var t=e.target,n=t.name,c=t.value;K((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))}(e)},cancel:function(){g(!1)},submit:function(){var e=x.a.CancelToken.source();""===z.amountToPay?(B("Please add amount to pay"),T(!0),setTimeout((function(){T(!1)}),3e3)):(b(!0),p.post("/receivePayment",me).then((function(){Z(e,false),g(!1),b(!1)})))}})})]}),j&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:k,message:F})]})},pe=n(11),ve=n.n(pe);n(22),n(60);var fe=function(e){var t,n,c,a,s,i,r,l,o,d,j=e.data,b=null===(t=j.otherAdditions)||void 0===t?void 0:t.filter((function(e){return""!==e.name})).map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}),0),m=(Number(null===(n=j.discountsAndVat)||void 0===n?void 0:n.rebateValue)+Number(null===(c=j.discountsAndVat)||void 0===c?void 0:c.tradeDiscountValue)+Number(null===(a=j.discountsAndVat)||void 0===a?void 0:a.cashDiscountValue)).toFixed(2);return Object(u.jsx)("div",{className:"InvoiceTemplate",id:"invoiceTemplate",children:Object(u.jsxs)("div",{className:"invoiceContainer",id:"invoiceContainer",children:[Object(u.jsxs)("div",{className:"invoiceTop",children:[Object(u.jsxs)("div",{className:"logoSection",children:[Object(u.jsx)("div",{className:"logo"}),Object(u.jsxs)("div",{className:"companyDetails",children:[Object(u.jsx)("h4",{children:"@HK Solutions Ltd"}),Object(u.jsx)("p",{children:"al salam street Abu Dhabi, UAE"}),Object(u.jsx)("p",{children:"amahkudi@gmail.com"})]})]}),Object(u.jsxs)("div",{className:"invoiceDetailsSection",children:[Object(u.jsxs)("h4",{children:["Invoice Number: ",null===j||void 0===j?void 0:j.invoiceInput.invoiceNumber]}),Object(u.jsxs)("p",{children:["Date: ",j.invoiceInput.date]}),Object(u.jsxs)("p",{children:["Due Date: ",j.dueDate]}),Object(u.jsxs)("p",{children:["Due In: ",j.selectInvoiceTerm," days"]})]})]}),Object(u.jsxs)("div",{className:"customerDetails",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"heading",children:Object(u.jsx)("h3",{children:"Bill To:"})}),Object(u.jsxs)("div",{className:"addressInfos",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Customer Name:"})," ",null===(s=j.customerDetails)||void 0===s?void 0:s.name]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Email:"})," ",null===(i=j.customerDetails)||void 0===i?void 0:i.email]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Country:"})," ",null===(r=j.customerDetails.billingAddress)||void 0===r?void 0:r.country]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"City:"})," ",null===(l=j.customerDetails.billingAddress)||void 0===l?void 0:l.city]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"P.O Box:"})," ",null===(o=j.customerDetails.contact)||void 0===o?void 0:o.fax]})]})]}),Object(u.jsx)("div",{})]}),Object(u.jsxs)("table",{className:"itemsBought",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"itemHeading",children:[Object(u.jsx)("th",{children:"Elements"}),Object(u.jsx)("th",{children:"Quantity"}),Object(u.jsx)("th",{children:"Unit Price"}),Object(u.jsx)("th",{children:"Amount"})]})}),Object(u.jsx)("tbody",{children:null===(d=j.data)||void 0===d?void 0:d.filter((function(e){return""!==e.productName&&""!==e.qty&&""!==e.up})).map((function(e){return Object(u.jsxs)("tr",{className:"item",children:[Object(u.jsxs)("td",{children:[" ",e.productName," "]}),Object(u.jsxs)("td",{children:[" ",Number(e.qty).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")," "]}),Object(u.jsx)("td",{children:Number(e.up).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:(e.qty*e.up).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]},e._id)}))})]}),Object(u.jsxs)("div",{className:"discountsAndAdditions",children:[Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{className:"element",children:Object(u.jsx)("b",{children:"Gross Amount"})}),Object(u.jsx)("div",{className:"value",children:Object(u.jsx)("b",{children:Number(j.grossAmount).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{className:"element",children:"Total Discounts"}),Object(u.jsxs)("div",{className:"value",children:["(",m.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),")"]}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{className:"element",children:Object(u.jsx)("b",{children:" Financial Net"})}),Object(u.jsx)("div",{className:"value",children:Object(u.jsx)("b",{children:(Number(j.grossAmount)-m).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsxs)("div",{className:"element",children:["VAT (",j.additionsAndSubtractions.valueAddedTax,"%)"]}),Object(u.jsx)("div",{className:"value",children:Number(j.discountsAndVat.valueAddedTax).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{className:"element",children:"Other Additions"}),Object(u.jsx)("div",{className:"value",children:b.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"netPayable",children:[Object(u.jsx)("div",{className:"element",children:Object(u.jsx)("b",{children:"Net Payable"})}),Object(u.jsx)("div",{className:"value",style:{marginRight:"2rem"},children:Object(u.jsx)("b",{children:Number(j.netPayable).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("p",{className:"signature",children:[Object(u.jsx)("b",{children:"Sign........."}),Object(u.jsx)("br",{}),"Sales Manager"]})]})})};var Ne=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useRef)(null),i=Object(c.useState)(!1),j=Object(r.a)(i,2),b=j[0],h=j[1],v=Object(c.useState)(""),f=Object(r.a)(v,2),g=f[0],y=f[1],S=Object(c.useState)({}),D=Object(r.a)(S,2),k=D[0],T=D[1],P=Object(c.useState)({amountToPay:"",meansOfPayment:"cash"}),I=Object(r.a)(P,2),F=I[0],B=I[1],E=Object(c.useRef)(null),R=Object(o.h)().invoiceNumber,L=Object(c.useState)(!1),q=Object(r.a)(L,2),V=q[0],M=q[1],Y=Object(c.useState)(!1),H=Object(r.a)(Y,2),_=H[0],Q=H[1],G=Object(c.useState)(!1),U=Object(r.a)(G,2),W=U[0],J=U[1],z=Object(c.useState)([]),K=Object(r.a)(z,2),X=K[0],Z=K[1],$=Object(c.useState)({color:"white",backgroundColor:"blue",borderRadius:"0.5rem 2rem",width:"max-content",padding:"1rem",textAlign:"left"}),ee=Object(r.a)($,2),te=ee[0],ne=(ee[1],Object(c.useState)({transform:"translateY(-5rem)",visibility:"hidden"})),ce=Object(r.a)(ne,2),ae=ce[0],se=ce[1],ie={width:"100%",position:"absolute",color:"gray",fontWeight:"550",padding:"1rem",backgroundColor:"#ffffff",borderRadius:"1rem",transform:ae.transform,visibility:ae.visibility,transition:"transform 0.5s ease"};function re(e){var t=E.current;t&&!t.contains(e.target)&&se({transform:"translateY(-5rem)",visibility:"hidden"})}Object(c.useEffect)((function(){return document.addEventListener("mousedown",re),function(){document.removeEventListener("mousedown",re)}}),[]),Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return le(t,e),function(){e=!0,t.cancel("Cancelling request")}}),[]);var le=function(){var e=Object(O.a)(m.a.mark((function e(t,n){var c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,J(!0),e.next=4,p.get("/invoices/".concat(R),{cancelToken:t.token});case 4:return c=e.sent,e.next=7,c.data;case 7:a=e.sent,Z(a),J(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),n||(x.a.isCancel(e.t0)?console.log("Request Cancelled"):console.log("Something went wrong"));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),oe=new Date(null===X||void 0===X?void 0:X.map((function(e){return e.dueDate}))),de=oe.getDate(),ue=oe.getMonth(),je=oe.getFullYear(),be=new Date,me=be.getDate(),Oe=be.getMonth(),xe=be.getFullYear(),pe="",Ne="";function ge(e){var t=s.current;t&&!t.contains(e.target)&&a(!1)}xe===je?(Oe<ue&&(pe="Not Due",Ne="rgba(0, 0, 255, 0.5)"),Oe===ue&&(me===de&&(pe="Due Today",Ne="rgba(0, 0, 255, 0.5)"),me<de&&(pe="Due in ".concat(de-me," days"),Ne="rgba(0, 0, 255, 0.5)"),me>de&&(pe="Overdue ".concat(me-de," days"),Ne="rgba(255, 0, 0, 0.7)")),Oe>ue&&(pe="Overdue",Ne="rgba(255, 0, 0, 0.7)")):xe<je?(pe="Not Due",Ne="rgba(0, 0, 255, 0.5)"):(pe="Overdue",Ne="rgba(255, 0, 0, 0.7)"),Object(c.useEffect)((function(){return document.addEventListener("mousedown",ge),function(){document.removeEventListener("mousedown",ge)}}),[]);var ye={source:"receive payment",template:[Object(d.a)(Object(d.a)({},k),{},{date:(new Date).toDateString(),amountToPay:""===F.amountToPay?0:Number(F.amountToPay),meansOfPayment:F.meansOfPayment})],totalToPay:""===F.amountToPay?0:Number(F.amountToPay)},Se=function(){y("Function coming soon."),h(!0),setTimeout((function(){h(!1)}),3e3)};return Object(u.jsxs)("div",{className:"Invoices",children:[!W&&Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsxs)("h1",{children:["Invoice #",null===X||void 0===X?void 0:X.map((function(e){return e.invoiceInput.invoiceNumber}))]}),Object(u.jsxs)("div",{className:"invoiceDetailOptions invoicesHeading moreOptions",children:[Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){T(X[0]),a(!0)},children:"Receive Payment"}),Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){M(!0)},children:"New Invoice"}),Object(u.jsxs)("div",{className:"moreOptions invoicesHeading",ref:E,children:[Object(u.jsxs)("button",{className:"invoiceButton",onClick:function(){"hidden"===ae.visibility?se({transform:"translateY(0)",visibility:"visible"}):se({transform:"translateY(-5rem)",visibility:"hidden"})},children:["More Options ",Object(u.jsx)("i",{className:"fas fa-sort-down"})]}),Object(u.jsxs)("div",{className:"moreOptionsCont",style:Object(d.a)({},ie),children:[Object(u.jsx)("p",{className:"option",onClick:function(){Q(!0),setTimeout((function(){Q(!1),ve()({printable:"invoiceTemplate",type:"html",targetStyles:["*"],maxWidth:"120%",documentTitle:"@HK Solutions"})}),1e3)},children:"Print Invoice"}),Object(u.jsx)("p",{className:"option",onClick:Se,children:"Export PDF"}),Object(u.jsx)("p",{className:"option",onClick:Se,children:"Send Invoice"})]})]})]})]}),null===X||void 0===X?void 0:X.map((function(e){return!W&&Object(u.jsxs)("div",{className:"customerQuickDetails",children:[Object(u.jsxs)("div",{className:"leftDetail",children:[Object(u.jsxs)("div",{className:"status",style:Object(d.a)(Object(d.a)({},te),{},{backgroundColor:Ne}),children:[Object(u.jsx)("p",{children:"Status"}),Object(u.jsx)("p",{children:pe})]}),Object(u.jsxs)("div",{className:"customer specificItem",children:[Object(u.jsx)("p",{children:"Customer Name"}),Object(u.jsx)("p",{children:Object(u.jsxs)(l.b,{to:"/customers/".concat(e.customerDetails.name),className:"custName",children:[e.customerDetails.name.slice(0,25),"..."]})})]})]}),Object(u.jsxs)("div",{className:"rightDetail",children:[Object(u.jsxs)("div",{className:"totalDebt specificItem",children:[Object(u.jsx)("p",{children:"Total Debt"}),Object(u.jsx)("p",{children:Number(e.netPayable).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"totalDebt specificItem",children:[Object(u.jsx)("p",{children:"Total Paid"}),Object(u.jsx)("p",{children:Number(e.totalPaid).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"amountOwing specificItem",children:[Object(u.jsx)("p",{children:"Balance"}),Object(u.jsx)("p",{children:Number(e.balanceDue).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]})]})})),null===X||void 0===X?void 0:X.map((function(e){return Object(u.jsx)(fe,{data:e})})),V&&Object(u.jsx)(A,{onClick:function(){M(!1)},refetch:function(){h(!0),y("Invoice Added Successfully"),setTimeout((function(){h(!1),y("")}),2e3)}}),_&&Object(u.jsx)(w,{}),W&&Object(u.jsx)(w,{}),Object(u.jsx)("div",{ref:s,children:n&&Object(u.jsx)(he,{totalDebt:k.netPayable?Number(null===k||void 0===k?void 0:k.netPayable).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"",totalPaid:k.netPayable?Number(null===k||void 0===k?void 0:k.totalPaid).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"",balance:k.netPayable?Number(null===k||void 0===k?void 0:k.balanceDue).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"",inputValue:F,handleChange:function(e){!function(e){var t=e.target,n=t.name,c=t.value;B((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))}(e)},cancel:function(){a(!1)},submit:function(){""===F.amountToPay?(y("Please add amount to pay"),h(!0),setTimeout((function(){h(!1)}),3e3)):(Q(!0),p.post("/receivePayment",ye).then((function(){a(!1),Q(!1)})))}})}),Object(u.jsx)(C,{alert:b,message:g})]})};var ge=function(){var e=Object(o.f)(),t=Object(c.useState)(!1),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),l=Object(r.a)(i,2),j=l[0],b=l[1],h=Object(c.useState)(!1),v=Object(r.a)(h,2),f=v[0],g=v[1],y=Object(c.useState)(""),S=Object(r.a)(y,2),D=S[0],k=S[1],A=Object(c.useState)([]),P=Object(r.a)(A,2),I=P[0],F=P[1],B=Object(c.useState)({}),E=Object(r.a)(B,2),R=E[0],L=E[1],q=function(e){var t=e.target,n=t.name,c=t.value;L((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},V=function(){var e=Object(O.a)(m.a.mark((function e(t,n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,p.get("/receipts",{cancelToken:t.token});case 4:c=e.sent,F(c.data),b(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n||(x.a.isCancel(e.t0)?console.log("Request Cancelled"):console.log("Something went wrong"));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e=x.a.CancelToken.source(),t=!1;return V(e,t),function(){t=!0,e.cancel("Cancelling request")}}),[]);var M=I;return Object(u.jsxs)("div",{className:"Invoices",children:[!j&&Object(u.jsxs)("div",{className:"Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsx)("h1",{children:"Receipts"}),Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){s(!0)},children:"New Receipt"})]}),Object(u.jsxs)("div",{className:"invoiceFilters",children:[Object(u.jsx)("div",{className:"nameFilter",children:Object(u.jsx)("input",{type:"text",name:"nameFilter",value:R.nameFilter,onChange:q,className:"filterInput",placeholder:"Filter by customer name"})}),Object(u.jsx)("div",{className:"amountFilter",children:Object(u.jsx)("input",{type:"text",name:"amountFilter",value:R.amountFilter,onChange:q,className:"filterInput",placeholder:"Filter by amount"})})]}),Object(u.jsx)("div",{className:"allDebtorsContainer",children:Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Customer Name"}),Object(u.jsx)("th",{children:"Receipt Number"}),Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Net Amount"}),Object(u.jsx)("th",{children:"Total Discounts"}),Object(u.jsx)("th",{children:"Total Other Additions"}),Object(u.jsx)("th",{children:"VAT"})]})}),Object(u.jsx)("tbody",{children:null===M||void 0===M?void 0:M.sort((function(e,t){return new Date(t.receiptInput.date)-new Date(e.receiptInput.date)})).filter((function(e){var t,n,c;return!R.nameFilter&&!R.amountFilter||(!R.amountFilter&&!R.nameFilter||(!!(null===(t=e.customerDetails.name)||void 0===t?void 0:t.toLowerCase().includes(null===(n=R.nameFilter)||void 0===n?void 0:n.toLowerCase()))||(!!(null===(c=e.netPayable)||void 0===c?void 0:c.toString().includes(R.amountFilter))||void 0)))})).map((function(t,n){var c;return Object(u.jsxs)("tr",{onClick:function(){var n;n="/receipts/".concat(t._id),e.push(n)},className:"invoiceDetail",children:[Object(u.jsx)("td",{children:t.customerDetails.name}),Object(u.jsx)("td",{children:t.receiptInput.receiptNumber}),Object(u.jsx)("td",{children:new Date(t.receiptInput.date).toLocaleDateString()}),Object(u.jsx)("td",{children:Number(t.netPayable).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:Number(t.discountsAndVat.rebateValue)+Number(t.discountsAndVat.tradeDiscountValue)+Number(t.discountsAndVat.cashDiscountValue)}),Object(u.jsx)("td",{children:null===(c=t.otherAdditions)||void 0===c?void 0:c.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0)}),Object(u.jsx)("td",{children:Number(t.discountsAndVat.valueAddedTax).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]},t._id)}))})]})}),a&&Object(u.jsx)(T,{onClick:function(){s(!1)},refetch:function(){var e=x.a.cancelToken.source();g(!0),k("Receipt Added Successfully"),setTimeout((function(){g(!1),k("")}),2e3),V(e,!1)}})]}),f&&Object(u.jsx)(C,{alert:f,message:D}),j&&Object(u.jsx)(w,{})]})};var ye=function(e){var t,n,c,a,s,i,r,l,o,d,j=e.data,b=null===(t=j.otherAdditions)||void 0===t?void 0:t.filter((function(e){return""!==e.name})).map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}),0),m=(Number(null===(n=j.discountsAndVat)||void 0===n?void 0:n.rebateValue)+Number(null===(c=j.discountsAndVat)||void 0===c?void 0:c.tradeDiscountValue)+Number(null===(a=j.discountsAndVat)||void 0===a?void 0:a.cashDiscountValue)).toFixed(2);return Object(u.jsx)("div",{className:"ReceiptTemplate",id:"ReceiptTemplate",children:Object(u.jsxs)("div",{className:"invoiceContainer",id:"invoiceContainer",children:[Object(u.jsxs)("div",{className:"invoiceTop",children:[Object(u.jsxs)("div",{className:"logoSection",children:[Object(u.jsx)("div",{className:"logo"}),Object(u.jsxs)("div",{className:"companyDetails",children:[Object(u.jsx)("h4",{children:"@HK Solutions Ltd"}),Object(u.jsx)("p",{children:"al salam street Abu Dhabi, UAE"}),Object(u.jsx)("p",{children:"amahkudi@gmail.com"})]})]}),Object(u.jsxs)("div",{className:"invoiceDetailsSection",children:[Object(u.jsxs)("h4",{children:["Receipt Number: ",null===j||void 0===j?void 0:j.receiptInput.receiptNumber]}),Object(u.jsxs)("p",{children:["Date: ",j.receiptInput.date]})]})]}),Object(u.jsxs)("div",{className:"customerDetails",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"heading",children:Object(u.jsx)("h3",{children:"Bill To:"})}),Object(u.jsxs)("div",{className:"addressInfos",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Customer Name:"})," ",null===(s=j.customerDetails)||void 0===s?void 0:s.name]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Email:"})," ",null===(i=j.customerDetails)||void 0===i?void 0:i.email]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Country:"})," ",null===(r=j.customerDetails.billingAddress)||void 0===r?void 0:r.country]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"City:"})," ",null===(l=j.customerDetails.billingAddress)||void 0===l?void 0:l.city]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"P.O Box:"})," ",null===(o=j.customerDetails.contact)||void 0===o?void 0:o.fax]})]})]}),Object(u.jsx)("div",{})]}),Object(u.jsxs)("table",{className:"itemsBought",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"itemHeading",children:[Object(u.jsx)("th",{children:"Elements"}),Object(u.jsx)("th",{children:"Quantity"}),Object(u.jsx)("th",{children:"Unit Price"}),Object(u.jsx)("th",{children:"Amount"})]})}),Object(u.jsx)("tbody",{children:null===(d=j.data)||void 0===d?void 0:d.filter((function(e){return""!==e.productName&&""!==e.qty&&""!==e.up})).map((function(e){return Object(u.jsxs)("tr",{className:"item",children:[Object(u.jsxs)("td",{children:[" ",e.productName," "]}),Object(u.jsxs)("td",{children:[" ",Number(e.qty).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")," "]}),Object(u.jsx)("td",{children:Number(e.up).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:(e.qty*e.up).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})}))})]}),Object(u.jsxs)("div",{className:"discountsAndAdditions",children:[Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{className:"element",children:Object(u.jsx)("b",{children:"Gross Amount"})}),Object(u.jsx)("div",{className:"value",children:Object(u.jsx)("b",{children:Number(j.grossAmount).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{className:"element",children:"Total Discounts"}),Object(u.jsxs)("div",{className:"value",children:["(",m.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),")"]}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{className:"element",children:Object(u.jsx)("b",{children:" Financial Net"})}),Object(u.jsx)("div",{className:"value",children:Object(u.jsx)("b",{children:(Number(j.grossAmount)-m).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsxs)("div",{className:"element",children:["VAT (",j.additionsAndSubtractions.valueAddedTax,"%)"]}),Object(u.jsx)("div",{className:"value",children:Number(j.discountsAndVat.valueAddedTax).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{className:"element",children:"Other Additions"}),Object(u.jsx)("div",{className:"value",children:b.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"netPayable",children:[Object(u.jsx)("div",{className:"element",children:Object(u.jsx)("b",{children:"Net Payable"})}),Object(u.jsx)("div",{className:"value",style:{marginRight:"2rem"},children:Object(u.jsx)("b",{children:Number(j.netPayable).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("p",{className:"signature",children:[Object(u.jsx)("b",{children:"Sign........."}),Object(u.jsx)("br",{}),"Sales Manager"]})]})})};var Se=function(){var e=Object(c.useRef)(null),t=Object(o.h)().receiptNumber,n=Object(c.useState)(!1),a=Object(r.a)(n,2),s=a[0],i=a[1],l=Object(c.useState)(!1),j=Object(r.a)(l,2),b=j[0],h=j[1],v=Object(c.useState)(!1),f=Object(r.a)(v,2),N=f[0],g=f[1],y=Object(c.useState)([]),S=Object(r.a)(y,2),D=S[0],k=S[1],A=Object(c.useState)(!1),P=Object(r.a)(A,2),I=P[0],F=P[1],B=Object(c.useState)(""),E=Object(r.a)(B,2),R=E[0],L=E[1],q=Object(c.useState)({transform:"translateY(-5rem)",visibility:"hidden"}),V=Object(r.a)(q,2),M=V[0],Y=V[1],H={width:"100%",position:"absolute",color:"gray",fontWeight:"550",padding:"1rem",backgroundColor:"#ffffff",borderRadius:"1rem",transform:M.transform,visibility:M.visibility,transition:"transform 0.5s ease"};function _(t){var n=e.current;n&&!n.contains(t.target)&&Y({transform:"translateY(-5rem)",visibility:"hidden"})}Object(c.useEffect)((function(){return document.addEventListener("mousedown",_),function(){document.removeEventListener("mousedown",_)}}),[]),Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return Q(t,e),function(){e=!0,t.cancel("Cancelling request")}}),[]);var Q=function(){var e=Object(O.a)(m.a.mark((function e(n,c){var a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,p.get("/receipts/".concat(t),{cancelToken:n.token});case 4:return a=e.sent,e.next=7,a.data;case 7:s=e.sent,k(s),g(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),c||(x.a.isCancel(e.t0)?console.log("Request Cancelled"):console.log("Something went wrong"));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"Invoices",children:[!N&&Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsxs)("h1",{children:["Receipt #",null===D||void 0===D?void 0:D.map((function(e){return e.receiptInput.receiptNumber}))]}),Object(u.jsxs)("div",{className:"invoiceDetailOptions invoicesHeading moreOptions",children:[Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){i(!0)},children:"New Receipt"}),Object(u.jsxs)("div",{className:"moreOptions invoicesHeading",ref:e,children:[Object(u.jsxs)("button",{className:"invoiceButton",onClick:function(){"hidden"===M.visibility?Y({transform:"translateY(0)",visibility:"visible"}):Y({transform:"translateY(-5rem)",visibility:"hidden"})},children:["More Options ",Object(u.jsx)("i",{className:"fas fa-sort-down"})]}),Object(u.jsxs)("div",{className:"moreOptionsCont",style:Object(d.a)({},H),children:[Object(u.jsx)("p",{className:"option",onClick:function(){h(!0),setTimeout((function(){h(!1),ve()({printable:"ReceiptTemplate",type:"html",targetStyles:["*"],maxWidth:"120%",documentTitle:"@HK Solutions"})}),1e3)},children:"Print Receipt"}),Object(u.jsx)("p",{className:"option",onClick:function(){L("Function yet to come, do not forget"),F(!0),setTimeout((function(){L(""),F(!1)}),2e3)},children:"Export PDF"}),Object(u.jsx)("p",{className:"option",onClick:function(){L("Function yet to come, do not forget"),F(!0),setTimeout((function(){L(""),F(!1)}),2e3)},children:"Send Receipt"})]})]})]})]}),null===D||void 0===D?void 0:D.map((function(e){return Object(u.jsx)(ye,{data:e})})),s&&Object(u.jsx)(T,{onClick:function(){i(!1)},refetch:function(){F(!0),L("Receipt Added Successfully"),setTimeout((function(){F(!1),L("")}),2e3)}}),b&&Object(u.jsx)(w,{}),N&&Object(u.jsx)(w,{}),I&&Object(u.jsx)(C,{alert:I,message:R})]})};var Ce=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(r.a)(s,2),l=i[0],j=i[1],b=Object(o.f)(),h=Object(c.useState)(!1),v=Object(r.a)(h,2),f=v[0],g=v[1],y=Object(c.useState)(!1),S=Object(r.a)(y,2),D=S[0],k=S[1],A=Object(c.useState)([]),T=Object(r.a)(A,2),P=T[0],I=T[1],B=Object(c.useState)({}),E=Object(r.a)(B,2),R=E[0],L=E[1],q=function(e){var t=e.target,n=t.name,c=t.value;L((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},V=function(){var e=Object(O.a)(m.a.mark((function e(t,n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),e.next=4,p.get("/creditNotes",{cancelToken:t.token});case 4:c=e.sent,I(c.data),k(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n||(x.a.isCancel(e.t0)?console.log("Request Cancelled"):console.log("Something went wrong"));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e=x.a.CancelToken.source(),t=!1;return V(e,t),function(){t=!0,e.cancel("Cancelling request")}}),[]);var M=P;return Object(u.jsxs)("div",{className:"Invoices",children:[!D&&Object(u.jsxs)("div",{className:"Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsx)("h1",{children:"Sales Returns"}),Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){g(!0)},children:"New Sales Returns"})]}),Object(u.jsxs)("div",{className:"invoiceFilters",children:[Object(u.jsx)("div",{className:"nameFilter",children:Object(u.jsx)("input",{type:"text",name:"nameFilter",value:R.nameFilter,onChange:q,className:"filterInput",placeholder:"Filter by customer name"})}),Object(u.jsx)("div",{className:"amountFilter",children:Object(u.jsx)("input",{type:"text",name:"amountFilter",value:R.amountFilter,onChange:q,className:"filterInput",placeholder:"Filter by amount"})})]}),Object(u.jsx)("div",{className:"allDebtorsContainer",children:Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Customer Name"}),Object(u.jsx)("th",{children:"Return Number"}),Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Net Amount"}),Object(u.jsx)("th",{children:"Total Discounts"}),Object(u.jsx)("th",{children:"Total Other Additions"}),Object(u.jsx)("th",{children:"VAT"})]})}),Object(u.jsx)("tbody",{children:null===M||void 0===M?void 0:M.sort((function(e,t){return new Date(t.noteInput.date)-new Date(e.noteInput.date)})).filter((function(e){var t,n,c;return!R.nameFilter&&!R.amountFilter||(!R.amountFilter&&!R.nameFilter||(!!(null===(t=e.customerDetails.name)||void 0===t?void 0:t.toLowerCase().includes(null===(n=R.nameFilter)||void 0===n?void 0:n.toLowerCase()))||(!!(null===(c=e.netPayable)||void 0===c?void 0:c.toString().includes(R.amountFilter))||void 0)))})).map((function(e,t){var n;return Object(u.jsxs)("tr",{onClick:function(){var t;t="/credit-notes/".concat(e._id),b.push(t)},className:"invoiceDetail",children:[Object(u.jsx)("td",{children:e.customerDetails.name}),Object(u.jsx)("td",{children:e.noteInput.noteNumber}),Object(u.jsx)("td",{children:new Date(e.noteInput.date).toLocaleDateString()}),Object(u.jsx)("td",{children:Number(e.netPayable).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:Number(e.discountsAndVat.rebateValue)+Number(e.discountsAndVat.tradeDiscountValue)+Number(e.discountsAndVat.cashDiscountValue)}),Object(u.jsx)("td",{children:null===(n=e.otherAdditions)||void 0===n?void 0:n.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0)}),Object(u.jsx)("td",{children:Number(e.discountsAndVat.valueAddedTax).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]},e._id)}))})]})}),f&&Object(u.jsx)(F,{onClick:function(){g(!1)},refetch:function(){a(!0),j("Sales Returns Added Successfully"),setTimeout((function(){a(!1),j("")}),2e3)}})]}),D&&Object(u.jsx)(w,{}),n&&Object(u.jsx)(C,{alert:n,message:l})]})};var De=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(r.a)(s,2),l=i[0],j=i[1],b=Object(c.useRef)(null),h=Object(o.h)().noteNumber,v=Object(c.useState)(!1),f=Object(r.a)(v,2),N=f[0],g=f[1],y=Object(c.useState)(!1),S=Object(r.a)(y,2),D=S[0],k=S[1],A=Object(c.useState)(!1),T=Object(r.a)(A,2),P=T[0],I=T[1],B=Object(c.useState)([]),E=Object(r.a)(B,2),R=E[0],L=E[1],q=Object(c.useState)({transform:"translateY(-5rem)",visibility:"hidden"}),V=Object(r.a)(q,2),M=V[0],Y=V[1],H={width:"100%",position:"absolute",color:"gray",fontWeight:"550",padding:"1rem",backgroundColor:"#ffffff",borderRadius:"1rem",transform:M.transform,visibility:M.visibility,transition:"transform 0.5s ease"};function _(e){var t=b.current;t&&!t.contains(e.target)&&Y({transform:"translateY(-5rem)",visibility:"hidden"})}Object(c.useEffect)((function(){return document.addEventListener("mousedown",_),function(){document.removeEventListener("mousedown",_)}}),[]),Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return Q(t,e),function(){e=!0,t.cancel("Cancelling request")}}),[]);var Q=function(){var e=Object(O.a)(m.a.mark((function e(t,n){var c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(!0),e.next=4,p.get("/creditNotes/".concat(h),{cancelToken:t.token});case 4:return c=e.sent,e.next=7,c.data;case 7:a=e.sent,L(a),I(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),n||(x.a.isCancel(e.t0)?console.log("Request Cancelled"):console.log("Something went wrong"));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),G=null===R||void 0===R?void 0:R.map((function(e){return{receiptInput:{date:e.noteInput.date,receiptNumber:e.noteInput.noteNumber,customerName:e.noteInput.customerName,additionalInfo:e.noteInput.additionalInfos},customerDetails:e.customerDetails,data:e.data,additionsAndSubtractions:e.additionsAndSubtractions,discountsAndVat:e.discountsAndVat,otherAdditions:e.otherAdditions,grossAmount:e.grossAmount,netPayable:e.netPayable}}));return Object(u.jsxs)("div",{className:"Invoices",children:[!P&&Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsxs)("h1",{children:["Return #",null===R||void 0===R?void 0:R.map((function(e){return e.noteInput.noteNumber}))]}),Object(u.jsxs)("div",{className:"invoiceDetailOptions invoicesHeading moreOptions",children:[Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){g(!0)},children:"New Return"}),Object(u.jsxs)("div",{className:"moreOptions invoicesHeading",ref:b,children:[Object(u.jsxs)("button",{className:"invoiceButton",onClick:function(){"hidden"===M.visibility?Y({transform:"translateY(0)",visibility:"visible"}):Y({transform:"translateY(-5rem)",visibility:"hidden"})},children:["More Options ",Object(u.jsx)("i",{className:"fas fa-sort-down"})]}),Object(u.jsxs)("div",{className:"moreOptionsCont",style:Object(d.a)({},H),children:[Object(u.jsx)("p",{className:"option",onClick:function(){k(!0),setTimeout((function(){k(!1),ve()({printable:"ReceiptTemplate",type:"html",targetStyles:["*"],maxWidth:"120%",documentTitle:"@HK Solutions"})}),1e3)},children:"Print Credit Note"}),Object(u.jsx)("p",{className:"option",onClick:function(){a(!0),j("function coming soon"),setTimeout((function(){a(!1),j("")}),2e3)},children:"Export PDF"})]})]})]})]}),null===G||void 0===G?void 0:G.map((function(e){return Object(u.jsx)(ye,{data:e})})),N&&Object(u.jsx)(F,{onClick:function(){g(!1)},refetch:function(){a(!0),j("Sales Returns Added Successfully"),setTimeout((function(){a(!1),j("")}),2e3)}}),D&&Object(u.jsx)(w,{}),P&&Object(u.jsx)(w,{}),n&&Object(u.jsx)(C,{alert:n,message:l})]})};var ke=function(){var e,t,n=Object(o.f)(),a=Object(c.useState)(!1),s=Object(r.a)(a,2),i=s[0],l=s[1],j=Object(c.useState)(!1),b=Object(r.a)(j,2),h=b[0],v=b[1],f=Object(c.useState)(!1),g=Object(r.a)(f,2),y=g[0],S=g[1],D=Object(c.useState)(""),k=Object(r.a)(D,2),A=k[0],T=k[1],P=Object(c.useState)([]),F=Object(r.a)(P,2),B=F[0],E=F[1],R=Object(c.useState)({}),L=Object(r.a)(R,2),q=L[0],V=L[1],M=Object(c.useState)({}),Y=Object(r.a)(M,2),H=Y[0],_=Y[1],Q=Object(c.useState)(!1),G=Object(r.a)(Q,2),U=G[0],W=G[1],J=Object(c.useState)({valueAddedTax:"",cashDiscount:"",tradeDiscount:"",rebate:"",selectInvoiceTerm:15}),z=Object(r.a)(J,2),K=z[0],X=z[1],Z=Object(c.useState)([{name:"",amount:""},{name:"",amount:""},{name:"",amount:""},{name:"",amount:""}]),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ne=Object(c.useRef)(null),ce=function(e){var t=e.target,n=t.name,c=t.value;V((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},ae=function(){var e=Object(O.a)(m.a.mark((function e(t,n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),e.next=4,p.get("/quotations",{cancelToken:t.token});case 4:c=e.sent,E(c.data),v(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n||(x.a.isCancel(e.t0)?console.log("Request Cancelled"):console.log("Something went wrong"));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e=x.a.CancelToken.source(),t=!1;return ae(e,t),function(){t=!0,e.cancel("Cancelling request")}}),[]);var se=[];B.forEach((function(e){e.data.forEach((function(t){se.push(Object(d.a)(Object(d.a)({},t),{},{name:e.customerDetails.name,number:e.quoteInput.quoteNumber,date:e.quoteInput.date,id:e._id}))}))}));var ie=function(e){n.push(e)},re=function(e){var t=e.target,n=t.name,c=t.value;X((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},le=function(e,t){return function(n){var c=ee.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));te(c)}};function oe(e){var t=ne.current;t&&!t.contains(e.target)&&W(!1)}Object(c.useEffect)((function(){return document.addEventListener("mousedown",oe),function(){document.removeEventListener("mousedown",oe)}}),[]);var de=(new Date).toDateString(),ue=function(e){var t=new Date;return new Date(t.setDate(t.getDate()+Number(e))).toDateString()},je=null===H||void 0===H?void 0:H.amount,be=(je*(Number(null===K||void 0===K?void 0:K.rebate)/100)).toFixed(2)||0,me=je-be,Oe=(me*(Number(null===K||void 0===K?void 0:K.tradeDiscount)/100)).toFixed(2)||0,he=me-Oe,xe=(he*(Number(null===K||void 0===K?void 0:K.cashDiscount)/100)).toFixed(2)||0,pe=he-xe,ve=(pe*(Number(null===K||void 0===K?void 0:K.valueAddedTax)/100)).toFixed(2)||0,fe=ee.map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)})),Ne=ee.filter((function(e){return""!==e.name&&""!==e.amount})),ge={invoiceInput:{date:de,invoiceNumber:null===(e=H.quoteInput)||void 0===e?void 0:e.quoteNumber,customerName:null===(t=H.quoteInput)||void 0===t?void 0:t.customerName,dueDate:ue(K.selectInvoiceTerm)},selectInvoiceTerm:K.selectInvoiceTerm,customerDetails:null===H||void 0===H?void 0:H.customerDetails,data:[H],additionsAndSubtractions:K,discountsAndVat:{rebateValue:be,tradeDiscountValue:Oe,cashDiscountValue:xe,valueAddedTax:ve},otherAdditions:Ne,grossAmount:je,netPayable:pe+Number(ve)+fe,totalPaid:0,balanceDue:pe+Number(ve)+fe,dueDate:ue(K.selectInvoiceTerm)},ye=function(){S(!0),T("function yet to come!!!"),setTimeout((function(){S(!1),T("")}),2e3)};return Object(u.jsxs)("div",{className:"Invoices",children:[!h&&Object(u.jsxs)("div",{className:"Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsx)("h1",{children:"Quotations"}),Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){l(!0)},children:"New Quotation"})]}),Object(u.jsxs)("div",{className:"invoiceFilters",children:[Object(u.jsx)("div",{className:"nameFilter",children:Object(u.jsx)("input",{type:"text",name:"nameFilter",value:q.nameFilter,onChange:ce,className:"filterInput",placeholder:"Filter by customer name"})}),Object(u.jsx)("div",{className:"amountFilter",children:Object(u.jsx)("input",{type:"text",name:"amountFilter",value:q.amountFilter,onChange:ce,className:"filterInput",placeholder:"Filter by amount"})})]}),Object(u.jsx)("div",{className:"allDebtorsContainer",children:Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Customer Name"}),Object(u.jsx)("th",{children:"Quote Number"}),Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Qty"}),Object(u.jsx)("th",{children:"UP"}),Object(u.jsx)("th",{children:"Amount"})]})}),Object(u.jsx)("tbody",{children:null===se||void 0===se?void 0:se.sort((function(e,t){return new Date(t.date)-new Date(e.date)})).filter((function(e){var t,n,c;return!q.nameFilter&&!q.amountFilter||(!q.amountFilter&&!q.nameFilter||(!!(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===(n=q.nameFilter)||void 0===n?void 0:n.toLowerCase()))||(!!(null===(c=e.amount)||void 0===c?void 0:c.toString().includes(q.amountFilter))||void 0)))})).map((function(e,t){return Object(u.jsxs)("tr",{className:"invoiceDetail",children:[Object(u.jsx)("td",{onClick:function(){ie("/quotes/".concat(e.id))},children:e.name}),Object(u.jsx)("td",{onClick:function(){ie("/quotes/".concat(e.id))},children:e.number}),Object(u.jsx)("td",{onClick:function(){ie("/quotes/".concat(e.id))},children:new Date(e.date).toLocaleDateString()}),Object(u.jsx)("td",{onClick:function(){ie("/quotes/".concat(e.id))},children:Number(e.qty).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{onClick:function(){ie("/quotes/".concat(e.id))},children:Number(e.up).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{onClick:function(){ie("/quotes/".concat(e.id))},children:Number(e.amount).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsxs)("td",{className:"sendInvoice",children:[Object(u.jsxs)("span",{onClick:ye,children:[Object(u.jsx)("i",{className:"fas fa-share fa-sm"}),Object(u.jsx)("small",{style:{display:"block"},children:"Send"})]}),Object(u.jsxs)("span",{onClick:function(){_(Object(d.a)(Object(d.a)({},e),{},{customerDetails:B[t].customerDetails})),W(!0)},children:[Object(u.jsx)("i",{className:"fas fa-file-alt fa-sm"}),Object(u.jsx)("small",{style:{display:"block"},children:"New"})]})]})]},e.id)}))})]})}),i&&Object(u.jsx)(I,{onClick:function(){l(!1)},refetch:function(){var e=x.a.cancelToken.source();S(!0),T("Quotation Added Successfully"),setTimeout((function(){S(!1),T("")}),2e3),ae(e,!1)}})]}),U&&Object(u.jsxs)("div",{className:"upDateQuoteToInvoice",ref:ne,children:[Object(u.jsx)("h3",{children:"Convert Quotation to Invoice"}),Object(u.jsxs)("div",{className:"discountsAndVatSection",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"VAT and Other Discounts"})}),Object(u.jsxs)("div",{className:"vatAndOtherDiscounts",children:[Object(u.jsx)("span",{children:"VAT(%)"}),Object(u.jsx)("input",{type:"number",name:"valueAddedTax",value:K.valueAddedTax,onChange:re})]}),Object(u.jsxs)("div",{className:"vatAndOtherDiscounts",children:[Object(u.jsx)("span",{children:"Rebate(%)"}),Object(u.jsx)("input",{type:"number",name:"rebate",value:K.rebate,onChange:re})]}),Object(u.jsxs)("div",{className:"vatAndOtherDiscounts",children:[Object(u.jsx)("span",{children:"Trade Discount(%)"}),Object(u.jsx)("input",{type:"number",name:"tradeDiscount",value:K.tradeDiscount,onChange:re})]}),Object(u.jsxs)("div",{className:"vatAndOtherDiscounts",children:[Object(u.jsx)("span",{children:"Cash Discount(%)"}),Object(u.jsx)("input",{type:"number",name:"cashDiscount",value:K.cashDiscount,onChange:re})]}),Object(u.jsxs)("div",{className:"vatAndOtherDiscounts",children:[Object(u.jsx)("span",{children:"Due In"}),Object(u.jsxs)("select",{name:"selectInvoiceTerm",id:"selectInvoiceTerm",value:K.selectInvoiceTerm,onChange:re,style:{width:"48%"},children:[Object(u.jsx)("option",{value:15,children:"15 Days (Default)"}),Object(u.jsx)("option",{value:30,children:"30 Days"}),Object(u.jsx)("option",{value:45,children:"45 Days"}),Object(u.jsx)("option",{value:60,children:"60 Days"}),Object(u.jsx)("option",{value:75,children:"75 Days"}),Object(u.jsx)("option",{value:90,children:"90 Days"})]})]})]}),Object(u.jsxs)("div",{className:"otherAdditionsSection",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Other Additons"})}),Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Element"}),Object(u.jsx)("th",{children:"Amount"})]})}),Object(u.jsx)("tbody",{children:ee.map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("input",{type:"text",name:"name",value:e.name,onChange:le("name",t)})}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{type:"number",name:"amount",value:e.amount,onChange:le("amount",t)})})]})}))})]}),Object(u.jsx)("button",{className:"btn",onClick:function(){W(!1)},children:"Cancel"}),Object(u.jsx)("button",{className:"btn",onClick:function(){p.post("/invoices",ge).then((function(e){W(!1),v(!1),S(!0),T("Invoice Added Successfully"),setTimeout((function(){S(!1),T("")}),2e3)}))},children:"Submit"})]})]}),h&&Object(u.jsx)(w,{}),y&&Object(u.jsx)(C,{alert:y,message:A})]})};var we=function(e){var t,n,c,a,s,i,r=e.data;return Object(u.jsx)("div",{className:"ReceiptTemplate",id:"ReceiptTemplate",children:Object(u.jsxs)("div",{className:"invoiceContainer",id:"invoiceContainer",children:[Object(u.jsxs)("div",{className:"invoiceTop",children:[Object(u.jsxs)("div",{className:"logoSection",children:[Object(u.jsx)("div",{className:"logo"}),Object(u.jsxs)("div",{className:"companyDetails",children:[Object(u.jsx)("h4",{children:"@HK Solutions Ltd"}),Object(u.jsx)("p",{children:"al salam street Abu Dhabi, UAE"}),Object(u.jsx)("p",{children:"amahkudi@gmail.com"})]})]}),Object(u.jsxs)("div",{className:"invoiceDetailsSection",children:[Object(u.jsxs)("h4",{children:["Receipt Number: ",null===r||void 0===r?void 0:r.quoteInput.quoteNumber]}),Object(u.jsxs)("p",{children:["Date: ",r.quoteInput.date]})]})]}),Object(u.jsxs)("div",{className:"customerDetails",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"heading",children:Object(u.jsx)("h3",{children:"Bill To:"})}),Object(u.jsxs)("div",{className:"addressInfos",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Customer Name:"})," ",null===(t=r.customerDetails)||void 0===t?void 0:t.name]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Email:"})," ",null===(n=r.customerDetails)||void 0===n?void 0:n.email]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Country:"})," ",null===(c=r.customerDetails.billingAddress)||void 0===c?void 0:c.country]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"City:"})," ",null===(a=r.customerDetails.billingAddress)||void 0===a?void 0:a.city]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"P.O Box:"})," ",null===(s=r.customerDetails.contact)||void 0===s?void 0:s.fax]})]})]}),Object(u.jsx)("div",{})]}),Object(u.jsxs)("table",{className:"itemsBought",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{className:"itemHeading",children:[Object(u.jsx)("th",{children:"Elements"}),Object(u.jsx)("th",{children:"Quantity"}),Object(u.jsx)("th",{children:"Unit Price"}),Object(u.jsx)("th",{children:"Amount"})]})}),Object(u.jsx)("tbody",{children:null===(i=r.data)||void 0===i?void 0:i.filter((function(e){return""!==e.productName&&""!==e.qty&&""!==e.up})).map((function(e){return Object(u.jsxs)("tr",{className:"item",children:[Object(u.jsxs)("td",{children:[" ",e.productName," "]}),Object(u.jsxs)("td",{children:[" ",Number(e.qty).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")," "]}),Object(u.jsx)("td",{children:Number(e.up).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:(e.qty*e.up).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})}))})]}),Object(u.jsxs)("p",{className:"signature",children:[Object(u.jsx)("b",{children:"Sign........."}),Object(u.jsx)("br",{}),"Sales Manager"]})]})})};var Ae=function(){var e,t,n=Object(c.useRef)(null),a=Object(o.h)().quoteNumber,s=Object(c.useState)(!1),i=Object(r.a)(s,2),l=i[0],j=i[1],b=Object(c.useState)(!1),h=Object(r.a)(b,2),v=h[0],f=h[1],g=Object(c.useState)(!1),y=Object(r.a)(g,2),S=y[0],D=y[1],k=Object(c.useState)(!1),A=Object(r.a)(k,2),T=A[0],P=A[1],F=Object(c.useState)(""),B=Object(r.a)(F,2),E=B[0],R=B[1],L=Object(c.useState)([]),q=Object(r.a)(L,2),V=q[0],M=q[1],Y=Object(c.useState)({transform:"translateY(-5rem)",visibility:"hidden"}),H=Object(r.a)(Y,2),_=H[0],Q=H[1],G={width:"100%",position:"absolute",color:"gray",fontWeight:"550",padding:"1rem",backgroundColor:"#ffffff",borderRadius:"1rem",transform:_.transform,visibility:_.visibility,transition:"transform 0.5s ease"},U=Object(c.useState)({data:[]}),W=Object(r.a)(U,2),J=W[0],z=W[1],K=Object(c.useState)(!1),X=Object(r.a)(K,2),Z=X[0],$=X[1],ee=Object(c.useState)({valueAddedTax:"",cashDiscount:"",tradeDiscount:"",rebate:"",selectInvoiceTerm:15}),te=Object(r.a)(ee,2),ne=te[0],ce=te[1],ae=Object(c.useState)([{name:"",amount:""},{name:"",amount:""},{name:"",amount:""},{name:"",amount:""}]),se=Object(r.a)(ae,2),ie=se[0],re=se[1],le=Object(c.useRef)(null);function oe(e){var t=n.current;t&&!t.contains(e.target)&&Q({transform:"translateY(-5rem)",visibility:"hidden"})}Object(c.useEffect)((function(){return document.addEventListener("mousedown",oe),function(){document.removeEventListener("mousedown",oe)}}),[]),Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return de(t,e),function(){e=!0,t.cancel("Cancelling request")}}),[]);var de=function(){var e=Object(O.a)(m.a.mark((function e(t,n){var c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(!0),e.next=4,p.get("/quotations/".concat(a),{cancelToken:t.token});case 4:return c=e.sent,e.next=7,c.data;case 7:s=e.sent,M(s),D(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),n||(x.a.isCancel(e.t0)?console.log("Request Cancelled"):console.log("Something went wrong"));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(e){var t=e.target,n=t.name,c=t.value;ce((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},je=function(e,t){return function(n){var c=ie.map((function(c,a){return t===a?Object(d.a)(Object(d.a)({},c),{},Object(N.a)({},e,n.target.value)):c}));re(c)}};function be(e){var t=le.current;t&&!t.contains(e.target)&&$(!1)}Object(c.useEffect)((function(){return document.addEventListener("mousedown",be),function(){document.removeEventListener("mousedown",be)}}),[]);var me=(new Date).toDateString(),Oe=function(e){var t=new Date;return new Date(t.setDate(t.getDate()+Number(e))).toDateString()},he=J?null===(e=J.data)||void 0===e?void 0:e.map((function(e){return e.qty*e.up})).reduce((function(e,t){return Number(e)+Number(t)}),0):0,xe=(he*(Number(null===ne||void 0===ne?void 0:ne.rebate)/100)).toFixed(2)||0,pe=he-xe,fe=(pe*(Number(null===ne||void 0===ne?void 0:ne.tradeDiscount)/100)).toFixed(2)||0,Ne=pe-fe,ge=(Ne*(Number(null===ne||void 0===ne?void 0:ne.cashDiscount)/100)).toFixed(2)||0,ye=Ne-ge,Se=(ye*(Number(null===ne||void 0===ne?void 0:ne.valueAddedTax)/100)).toFixed(2)||0,Ce=ie.map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)})),De=ie.filter((function(e){return""!==e.name&&""!==e.amount})),ke={invoiceInput:{date:me,invoiceNumber:1,customerName:null===(t=J.quoteInput)||void 0===t?void 0:t.customerName,dueDate:Oe(ne.selectInvoiceTerm)},selectInvoiceTerm:ne.selectInvoiceTerm,customerDetails:null===J||void 0===J?void 0:J.customerDetails,data:[null===J||void 0===J?void 0:J.data],additionsAndSubtractions:ne,discountsAndVat:{rebateValue:xe,tradeDiscountValue:fe,cashDiscountValue:ge,valueAddedTax:Se},otherAdditions:De,grossAmount:he,netPayable:ye+Number(Se)+Ce,totalPaid:0,balanceDue:ye+Number(Se)+Ce,dueDate:Oe(ne.selectInvoiceTerm)};return Object(u.jsxs)("div",{className:"Invoices",children:[!S&&Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsxs)("h1",{children:["Quotation #",null===V||void 0===V?void 0:V.map((function(e){return e.quoteInput.quoteNumber}))]}),Object(u.jsxs)("div",{className:"invoiceDetailOptions invoicesHeading moreOptions",children:[Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){j(!0)},children:"New Quotation"}),Object(u.jsxs)("div",{className:"moreOptions invoicesHeading",ref:n,children:[Object(u.jsxs)("button",{className:"invoiceButton",onClick:function(){"hidden"===_.visibility?Q({transform:"translateY(0)",visibility:"visible"}):Q({transform:"translateY(-5rem)",visibility:"hidden"})},children:["More Options ",Object(u.jsx)("i",{className:"fas fa-sort-down"})]}),Object(u.jsxs)("div",{className:"moreOptionsCont",style:Object(d.a)({},G),children:[Object(u.jsx)("p",{className:"option",onClick:function(){f(!0),setTimeout((function(){f(!1),ve()({printable:"ReceiptTemplate",type:"html",targetStyles:["*"],maxWidth:"120%",documentTitle:"@HK Solutions"})}),1e3)},children:"Print Quotation"}),Object(u.jsx)("p",{className:"option",onClick:function(){z(V[0]),$(!0)},children:"Convert To Invoice"}),Object(u.jsx)("p",{className:"option",onClick:function(){R("Function yet to come, dont forget"),P(!0),setTimeout((function(){P(!1),R("")}),2e3)},children:"Export PDF"}),Object(u.jsx)("p",{className:"option",onClick:function(){R("Function yet to come, dont forget"),P(!0),setTimeout((function(){P(!1),R("")}),2e3)},children:"Send Quotation"})]})]})]})]}),Z&&Object(u.jsxs)("div",{className:"upDateQuoteToInvoice",ref:le,children:[Object(u.jsx)("h3",{children:"Convert Quotation to Invoice"}),Object(u.jsxs)("div",{className:"discountsAndVatSection",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"VAT and Other Discounts"})}),Object(u.jsxs)("div",{className:"vatAndOtherDiscounts",children:[Object(u.jsx)("span",{children:"VAT(%)"}),Object(u.jsx)("input",{type:"number",name:"valueAddedTax",value:ne.valueAddedTax,onChange:ue})]}),Object(u.jsxs)("div",{className:"vatAndOtherDiscounts",children:[Object(u.jsx)("span",{children:"Rebate(%)"}),Object(u.jsx)("input",{type:"number",name:"rebate",value:ne.rebate,onChange:ue})]}),Object(u.jsxs)("div",{className:"vatAndOtherDiscounts",children:[Object(u.jsx)("span",{children:"Trade Discount(%)"}),Object(u.jsx)("input",{type:"number",name:"tradeDiscount",value:ne.tradeDiscount,onChange:ue})]}),Object(u.jsxs)("div",{className:"vatAndOtherDiscounts",children:[Object(u.jsx)("span",{children:"Cash Discount(%)"}),Object(u.jsx)("input",{type:"number",name:"cashDiscount",value:ne.cashDiscount,onChange:ue})]}),Object(u.jsxs)("div",{className:"vatAndOtherDiscounts",children:[Object(u.jsx)("span",{children:"Due In"}),Object(u.jsxs)("select",{name:"selectInvoiceTerm",id:"selectInvoiceTerm",value:ne.selectInvoiceTerm,onChange:ue,style:{width:"48%"},children:[Object(u.jsx)("option",{value:15,children:"15 Days (Default)"}),Object(u.jsx)("option",{value:30,children:"30 Days"}),Object(u.jsx)("option",{value:45,children:"45 Days"}),Object(u.jsx)("option",{value:60,children:"60 Days"}),Object(u.jsx)("option",{value:75,children:"75 Days"}),Object(u.jsx)("option",{value:90,children:"90 Days"})]})]})]}),Object(u.jsxs)("div",{className:"otherAdditionsSection",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Other Additons"})}),Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Element"}),Object(u.jsx)("th",{children:"Amount"})]})}),Object(u.jsx)("tbody",{children:ie.map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("input",{type:"text",name:"name",value:e.name,onChange:je("name",t)})}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{type:"number",name:"amount",value:e.amount,onChange:je("amount",t)})})]})}))})]}),Object(u.jsx)("button",{className:"btn",onClick:function(){$(!1)},children:"Cancel"}),Object(u.jsx)("button",{className:"btn",onClick:function(){p.post("/invoices",ke).then((function(e){console.log(e.data),$(!1),D(!1),P(!0),R("Invoice Added Successfully"),setTimeout((function(){P(!1),R("")}),2e3)}))},children:"Submit"})]})]}),null===V||void 0===V?void 0:V.map((function(e){return Object(u.jsx)(we,{data:e})})),l&&Object(u.jsx)(I,{onClick:function(){j(!1)},refetch:function(){P(!0),R("Quotation Added Successfully"),setTimeout((function(){P(!1),R("")}),2e3)}}),v&&Object(u.jsx)(w,{}),S&&Object(u.jsx)(w,{}),T&&Object(u.jsx)(C,{alert:T,message:E})]})};var Te=function(){var e=Object(o.f)(),t=Object(c.useState)(!1),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),l=Object(r.a)(i,2),j=l[0],b=l[1],h=Object(c.useState)(!1),v=Object(r.a)(h,2),f=v[0],g=v[1],y=Object(c.useRef)(null),S=Object(c.useState)(!1),D=Object(r.a)(S,2),k=D[0],A=D[1],T=Object(c.useState)(""),P=Object(r.a)(T,2),I=P[0],F=P[1],B=Object(c.useState)([]),E=Object(r.a)(B,2),R=E[0],L=E[1],V=Object(c.useState)({}),M=Object(r.a)(V,2),Y=M[0],H=M[1],_=Object(c.useState)({}),Q=Object(r.a)(_,2),G=Q[0],U=Q[1],W=Object(c.useState)({amountToPay:"",meansOfPayment:"cash"}),J=Object(r.a)(W,2),z=J[0],K=J[1],X=function(e){var t=e.target,n=t.name,c=t.value;H((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},Z=function(){var e=Object(O.a)(m.a.mark((function e(t,n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,p.get("/purchaseInvoices",{cancelToken:t.token});case 4:c=e.sent,L(c.data),b(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n||(x.a.isCancel(e.t0)?console.log("Request Cancelled"):console.log("Something went wrong"));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e=x.a.CancelToken.source(),t=!1;return Z(e,t),function(){t=!0,e.cancel("Cancelling request")}}),[]);var $=R.purchaseInvoices,ee=R.creditors,te=[],ne=[],ce=new Date,ae=ce.getFullYear(),se=ce.getMonth(),ie=ce.getDate(),re=null===$||void 0===$?void 0:$.map((function(e){return e.grossAmount})).reduce((function(e,t){return Number(e)+Number(t)}),0),le=(null===ee||void 0===ee?void 0:ee.map((function(e){return e.balanceDue})).reduce((function(e,t){return Number(e)+Number(t)}),0))||0,oe=(le/re*360).toFixed(2)||0,de=(null===te||void 0===te?void 0:te.map((function(e){return e.netPayable})).reduce((function(e,t){return Number(e)+Number(t)}),0))||0,ue=(null===ne||void 0===ne?void 0:ne.map((function(e){return e.netPayable})).reduce((function(e,t){return Number(e)+Number(t)}),0))||0;null===$||void 0===$||$.forEach((function(e){new Date(null===e||void 0===e?void 0:e.invoiceInput.date);var t=new Date(null===e||void 0===e?void 0:e.invoiceInput.dueDate),n=t.getFullYear(),c=t.getMonth(),a=t.getDate();if(n===ae&&c===se&&a<ie)te.push(e);else{var s=new Date(ce.setDate(ce.getDate()+15)),i=s.getFullYear(),r=s.getMonth(),l=s.getDate();i>=n&&r>=c&&l<=a&&!(l-ie<0)&&ne.push(e)}}));var je=function(t){e.push(t)};function be(e){var t=y.current;t&&!t.contains(e.target)&&g(!1)}Object(c.useEffect)((function(){return document.addEventListener("mousedown",be),function(){document.removeEventListener("mousedown",be)}}),[]);var me={source:"make payment",template:[Object(d.a)(Object(d.a)({},G),{},{date:(new Date).toDateString(),amountToPay:""===z.amountToPay?0:Number(z.amountToPay),meansOfPayment:z.meansOfPayment})],totalToPay:""===z.amountToPay?0:Number(z.amountToPay)};console.log($);var Oe=function(){F("Function coming soon."),A(!0),setTimeout((function(){A(!1)}),3e3)};return Object(u.jsxs)("div",{className:"Invoices",children:[!j&&Object(u.jsxs)("div",{className:"Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsx)("h1",{children:"Purchase Invoices"}),Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){s(!0)},children:"New Invoice"})]}),Object(u.jsxs)("div",{className:"overDueInvoices",children:[Object(u.jsxs)("div",{className:"overDue",children:[Object(u.jsx)("p",{className:"title",children:"Total Overdue"}),Object(u.jsx)("p",{children:Number(de).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"dueInDays",children:[Object(u.jsx)("p",{className:"title",children:"Due in 15 Days"}),Object(u.jsx)("p",{children:Number(ue).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"collectionDays",children:[Object(u.jsx)("p",{className:"title",children:"Average Collection Days"}),Object(u.jsxs)("p",{children:[oe," days"]})]}),Object(u.jsxs)("div",{className:"totalDebt",children:[Object(u.jsx)("p",{className:"title",children:"Total Outstanding Creditors"}),Object(u.jsx)("p",{children:Number(le).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]}),Object(u.jsxs)("div",{className:"invoiceFilters",children:[Object(u.jsx)("div",{className:"nameFilter",children:Object(u.jsx)("input",{type:"text",name:"nameFilter",value:Y.nameFilter,onChange:X,className:"filterInput",placeholder:"Filter by customer name"})}),Object(u.jsx)("div",{className:"amountFilter",children:Object(u.jsx)("input",{type:"text",name:"amountFilter",value:Y.amountFilter,onChange:X,className:"filterInput",placeholder:"Filter by amount"})})]}),Object(u.jsx)("div",{className:"allDebtorsContainer",children:Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Supplier Name"}),Object(u.jsx)("th",{children:"Invoice Number"}),Object(u.jsx)("th",{children:"Due Date"}),Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Net Amount"}),Object(u.jsx)("th",{children:"Total Paid"}),Object(u.jsx)("th",{children:"Balance Due"}),Object(u.jsx)("th",{children:"Status"})]})}),Object(u.jsx)("tbody",{children:null===$||void 0===$?void 0:$.filter((function(e){return e.netPayable>e.totalPaid})).sort((function(e,t){return new Date(t.invoiceInput.date)-new Date(e.invoiceInput.date)})).filter((function(e){var t,n,c;return!Y.nameFilter&&!Y.amountFilter||(!Y.amountFilter&&!Y.nameFilter||(!!(null===(t=e.supplierDetails.name)||void 0===t?void 0:t.toLowerCase().includes(null===(n=Y.nameFilter)||void 0===n?void 0:n.toLowerCase()))||(!!(null===(c=e.netPayable)||void 0===c?void 0:c.toString().includes(Y.amountFilter))||void 0)))})).map((function(e){return Object(u.jsxs)("tr",{className:"invoiceDetail",children:[Object(u.jsx)("td",{onClick:function(){je("/purchase-invoices/".concat(e._id))},children:e.supplierDetails.name}),Object(u.jsx)("td",{onClick:function(){je("/purchase-invoices/".concat(e._id))},children:e.invoiceInput.invoiceNumber}),Object(u.jsx)("td",{onClick:function(){je("/purchase-invoices/".concat(e._id))},children:new Date(e.dueDate).toLocaleDateString()}),Object(u.jsx)("td",{onClick:function(){je("/purchase-invoices/".concat(e._id))},children:new Date(e.invoiceInput.date).toLocaleDateString()}),Object(u.jsx)("td",{onClick:function(){je("/purchase-invoices/".concat(e._id))},children:Number(e.netPayable).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{onClick:function(){je("/purchase-invoices/".concat(e._id))},children:Number(e.totalPaid).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{onClick:function(){je("/purchase-invoices/".concat(e._id))},children:Number(e.balanceDue).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{onClick:function(){je("/purchase-invoices/".concat(e._id))},children:Number(e.netPayable)>Number(e.totalPaid)?"Owing":e.netPayable===e.totalPaid?"Paid":"Over Paid"}),Object(u.jsxs)("td",{className:"sendInvoice",children:[Object(u.jsxs)("span",{onClick:function(){U(e),g(!0)},children:[Object(u.jsx)("i",{class:"fas fa-file-alt fa-sm"}),Object(u.jsx)("small",{style:{display:"block"},children:"Pay"})]}),Object(u.jsxs)("span",{onClick:Oe,children:[Object(u.jsx)("i",{className:"fas fa-share fa-sm"}),Object(u.jsx)("small",{style:{display:"block"},children:"Send"})]})]})]},e._id)}))})]})}),a&&Object(u.jsx)(q,{onClick:function(){s(!1)},refetch:function(){A(!0),F("Purchase Invoice Added Successfully"),setTimeout((function(){A(!1),F("")}),2e3)}}),Object(u.jsx)("div",{ref:y,children:f&&Object(u.jsx)(he,{totalDebt:G.netPayable?Number(null===G||void 0===G?void 0:G.netPayable).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"",totalPaid:G.netPayable?Number(null===G||void 0===G?void 0:G.totalPaid).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"",balance:G.netPayable?Number(null===G||void 0===G?void 0:G.balanceDue).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"",inputValue:z,handleChange:function(e){!function(e){var t=e.target,n=t.name,c=t.value;K((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))}(e)},cancel:function(){g(!1)},submit:function(){""===z.amountToPay?(F("Please add amount to pay"),A(!0),setTimeout((function(){A(!1)}),3e3)):(b(!0),p.post("/makePayment",me).then((function(){g(!1),b(!1)})))}})})]}),j&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:k,message:I})]})};var Pe=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useRef)(null),i=Object(c.useState)(!1),j=Object(r.a)(i,2),b=j[0],h=j[1],v=Object(c.useState)(""),f=Object(r.a)(v,2),g=f[0],y=f[1],S=Object(c.useState)({}),D=Object(r.a)(S,2),k=D[0],A=D[1],T=Object(c.useState)({amountToPay:"",meansOfPayment:"cash"}),P=Object(r.a)(T,2),I=P[0],F=P[1],B=Object(c.useRef)(null),E=Object(o.h)().invoiceNumber,R=Object(c.useState)(!1),L=Object(r.a)(R,2),V=L[0],M=L[1],Y=Object(c.useState)(!1),H=Object(r.a)(Y,2),_=H[0],Q=H[1],G=Object(c.useState)(!1),U=Object(r.a)(G,2),W=U[0],J=U[1],z=Object(c.useState)([]),K=Object(r.a)(z,2),X=K[0],Z=K[1],$=Object(c.useState)({color:"white",backgroundColor:"blue",borderRadius:"0.5rem 2rem",width:"max-content",padding:"1rem",textAlign:"left"}),ee=Object(r.a)($,2),te=ee[0],ne=(ee[1],Object(c.useState)({transform:"translateY(-5rem)",visibility:"hidden"})),ce=Object(r.a)(ne,2),ae=ce[0],se=ce[1],ie={width:"100%",position:"absolute",color:"gray",fontWeight:"550",padding:"1rem",backgroundColor:"#ffffff",borderRadius:"1rem",transform:ae.transform,visibility:ae.visibility,transition:"transform 0.5s ease"};function re(e){var t=B.current;t&&!t.contains(e.target)&&se({transform:"translateY(-5rem)",visibility:"hidden"})}Object(c.useEffect)((function(){return document.addEventListener("mousedown",re),function(){document.removeEventListener("mousedown",re)}}),[]),Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return le(t,e),function(){e=!0,t.cancel("Cancelling request")}}),[]);var le=function(){var e=Object(O.a)(m.a.mark((function e(t,n){var c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,J(!0),e.next=4,p.get("/purchaseInvoices/".concat(E),{cancelToken:t.token});case 4:return c=e.sent,e.next=7,c.data;case 7:a=e.sent,Z(a),J(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),n||(x.a.isCancel(e.t0)?console.log("Request Cancelled"):console.log("Something went wrong"));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),oe=new Date(null===X||void 0===X?void 0:X.map((function(e){return e.dueDate}))),de=oe.getDate(),ue=oe.getMonth(),je=oe.getFullYear(),be=new Date,me=be.getDate(),Oe=be.getMonth(),xe=be.getFullYear(),pe="",Ne="";function ge(e){var t=s.current;t&&!t.contains(e.target)&&a(!1)}xe===je?(Oe<ue&&(pe="Not Due",Ne="rgba(0, 0, 255, 0.5)"),Oe===ue&&(me===de&&(pe="Due Today",Ne="rgba(0, 0, 255, 0.5)"),me<de&&(pe="Due in ".concat(de-me," days"),Ne="rgba(0, 0, 255, 0.5)"),me>de&&(pe="Overdue ".concat(me-de," days"),Ne="rgba(255, 0, 0, 0.7)")),Oe>ue&&(pe="Overdue",Ne="rgba(255, 0, 0, 0.7)")):xe<je?(pe="Not Due",Ne="rgba(0, 0, 255, 0.5)"):(pe="Overdue",Ne="rgba(255, 0, 0, 0.7)"),Object(c.useEffect)((function(){return document.addEventListener("mousedown",ge),function(){document.removeEventListener("mousedown",ge)}}),[]);var ye={source:"make payment",template:[Object(d.a)(Object(d.a)({},k),{},{date:(new Date).toDateString(),amountToPay:""===I.amountToPay?0:Number(I.amountToPay),meansOfPayment:I.meansOfPayment})],totalToPay:""===I.amountToPay?0:Number(I.amountToPay)},Se=function(){y("Function coming soon."),h(!0),setTimeout((function(){h(!1)}),3e3)},Ce=null===X||void 0===X?void 0:X.map((function(e){return{invoiceInput:{date:e.invoiceInput.date,invoiceNumber:e.invoiceInput.invoiceNumber,customerName:e.invoiceInput.supplierName,dueDate:e.dueDate},selectInvoiceTerm:e.selectInvoiceTerm,customerDetails:e.supplierDetails,data:e.data,additionsAndSubtractions:e.additionsAndSubtractions,discountsAndVat:{rebateValue:e.discountsAndVat.rebateValue,tradeDiscountValue:e.discountsAndVat.tradeDiscountValue,cashDiscountValue:e.discountsAndVat.cashDiscountValue,valueAddedTax:e.discountsAndVat.valueAddedTax},otherAdditions:e.otherAdditions,grossAmount:e.grossAmount,netPayable:e.netPayable,totalPaid:e.totalPaid,balanceDue:e.balanceDue,dueDate:e.dueDate}}));return console.log(Ce),Object(u.jsxs)("div",{className:"Invoices",children:[!W&&Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsxs)("h1",{children:["Invoice #",null===X||void 0===X?void 0:X.map((function(e){return e.invoiceInput.invoiceNumber}))]}),Object(u.jsxs)("div",{className:"invoiceDetailOptions invoicesHeading moreOptions",children:[Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){A(X[0]),a(!0)},children:"Make Payment"}),Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){M(!0)},children:"New Invoice"}),Object(u.jsxs)("div",{className:"moreOptions invoicesHeading",ref:B,children:[Object(u.jsxs)("button",{className:"invoiceButton",onClick:function(){"hidden"===ae.visibility?se({transform:"translateY(0)",visibility:"visible"}):se({transform:"translateY(-5rem)",visibility:"hidden"})},children:["More Options ",Object(u.jsx)("i",{className:"fas fa-sort-down"})]}),Object(u.jsxs)("div",{className:"moreOptionsCont",style:Object(d.a)({},ie),children:[Object(u.jsx)("p",{className:"option",onClick:function(){Q(!0),setTimeout((function(){Q(!1),ve()({printable:"invoiceTemplate",type:"html",targetStyles:["*"],maxWidth:"120%",documentTitle:"@HK Solutions"})}),1e3)},children:"Print Invoice"}),Object(u.jsx)("p",{className:"option",onClick:Se,children:"Export PDF"}),Object(u.jsx)("p",{className:"option",onClick:Se,children:"Send Invoice"})]})]})]})]}),null===X||void 0===X?void 0:X.map((function(e){return!W&&Object(u.jsxs)("div",{className:"customerQuickDetails",children:[Object(u.jsxs)("div",{className:"leftDetail",children:[Object(u.jsxs)("div",{className:"status",style:Object(d.a)(Object(d.a)({},te),{},{backgroundColor:Ne}),children:[Object(u.jsx)("p",{children:"Status"}),Object(u.jsx)("p",{children:pe})]}),Object(u.jsxs)("div",{className:"customer specificItem",children:[Object(u.jsx)("p",{children:"Supplier Name"}),Object(u.jsx)("p",{children:Object(u.jsxs)(l.b,{to:"/suppliers/".concat(e.supplierDetails.name),className:"custName",children:[e.supplierDetails.name.slice(0,25),"..."]})})]})]}),Object(u.jsxs)("div",{className:"rightDetail",children:[Object(u.jsxs)("div",{className:"totalDebt specificItem",children:[Object(u.jsx)("p",{children:"Total Debt"}),Object(u.jsx)("p",{children:Number(e.netPayable).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"totalDebt specificItem",children:[Object(u.jsx)("p",{children:"Total Paid"}),Object(u.jsx)("p",{children:Number(e.totalPaid).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"amountOwing specificItem",children:[Object(u.jsx)("p",{children:"Balance"}),Object(u.jsx)("p",{children:Number(e.balanceDue).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]})]})})),null===Ce||void 0===Ce?void 0:Ce.map((function(e){return Object(u.jsx)(fe,{data:e})})),V&&Object(u.jsx)(q,{onClick:function(){M(!1)},refetch:function(){h(!0),y("Purchase Invoice Added Successfully"),setTimeout((function(){h(!1),y("")}),2e3)}}),_&&Object(u.jsx)(w,{}),W&&Object(u.jsx)(w,{}),Object(u.jsx)("div",{ref:s,children:n&&Object(u.jsx)(he,{totalDebt:k.netPayable?Number(null===k||void 0===k?void 0:k.netPayable).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"",totalPaid:k.netPayable?Number(null===k||void 0===k?void 0:k.totalPaid).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"",balance:k.netPayable?Number(null===k||void 0===k?void 0:k.balanceDue).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"",inputValue:I,handleChange:function(e){!function(e){var t=e.target,n=t.name,c=t.value;F((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))}(e)},cancel:function(){a(!1)},submit:function(){""===I.amountToPay?(y("Please add amount to pay"),h(!0),setTimeout((function(){h(!1)}),3e3)):(Q(!0),p.post("/makePayment",ye).then((function(){a(!1),Q(!1)})))}})}),Object(u.jsx)(C,{alert:b,message:g})]})};var Ie=function(){var e=Object(o.f)(),t=Object(c.useState)(!1),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),l=Object(r.a)(i,2),j=l[0],b=l[1],h=Object(c.useState)(!1),v=Object(r.a)(h,2),f=v[0],g=v[1],y=Object(c.useState)(""),S=Object(r.a)(y,2),D=S[0],k=S[1],A=Object(c.useState)([]),T=Object(r.a)(A,2),P=T[0],I=T[1],F=Object(c.useState)({}),B=Object(r.a)(F,2),E=B[0],R=B[1],L=function(e){var t=e.target,n=t.name,c=t.value;R((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},q=function(){var e=Object(O.a)(m.a.mark((function e(t,n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,p.get("/purchaseReceipts",{cancelToken:t.token});case 4:c=e.sent,I(c.data),b(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n||(x.a.isCancel(e.t0)?console.log("Request Cancelled"):console.log("Something went wrong"));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e=x.a.CancelToken.source(),t=!1;return q(e,t),function(){t=!0,e.cancel("Cancelling request")}}),[]);var M=P;return null===M||void 0===M||M.map((function(e){return Number(e.discountsAndVat.rebateValue)+Number(e.discountsAndVat.tradeDiscountValue)+Number(e.discountsAndVat.cashDiscountValue)})),Object(u.jsxs)("div",{className:"Invoices",children:[!j&&Object(u.jsxs)("div",{className:"Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsx)("h1",{children:"Purchase Receipts"}),Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){s(!0)},children:"New Receipt"})]}),Object(u.jsxs)("div",{className:"invoiceFilters",children:[Object(u.jsx)("div",{className:"nameFilter",children:Object(u.jsx)("input",{type:"text",name:"nameFilter",value:E.nameFilter,onChange:L,className:"filterInput",placeholder:"Filter by customer name"})}),Object(u.jsx)("div",{className:"amountFilter",children:Object(u.jsx)("input",{type:"text",name:"amountFilter",value:E.amountFilter,onChange:L,className:"filterInput",placeholder:"Filter by amount"})})]}),Object(u.jsx)("div",{className:"allDebtorsContainer",children:Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Supplier Name"}),Object(u.jsx)("th",{children:"Receipt Number"}),Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Net Amount"}),Object(u.jsx)("th",{children:"Total Discounts"}),Object(u.jsx)("th",{children:"Total Other Additions"}),Object(u.jsx)("th",{children:"VAT"})]})}),Object(u.jsx)("tbody",{children:null===M||void 0===M?void 0:M.sort((function(e,t){return new Date(t.receiptInput.date)-new Date(e.receiptInput.date)})).filter((function(e){var t,n,c;return!E.nameFilter&&!E.amountFilter||(!E.amountFilter&&!E.nameFilter||(!!(null===(t=e.customerDetails.name)||void 0===t?void 0:t.toLowerCase().includes(null===(n=E.nameFilter)||void 0===n?void 0:n.toLowerCase()))||(!!(null===(c=e.netPayable)||void 0===c?void 0:c.toString().includes(E.amountFilter))||void 0)))})).map((function(t,n){var c;return Object(u.jsxs)("tr",{onClick:function(){var n;n="/purchase-receipts/".concat(t._id),e.push(n)},className:"invoiceDetail",children:[Object(u.jsx)("td",{children:t.supplierDetails.name}),Object(u.jsx)("td",{children:t.receiptInput.receiptNumber}),Object(u.jsx)("td",{children:new Date(t.receiptInput.date).toLocaleDateString()}),Object(u.jsx)("td",{children:Number(t.netPayable).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:Number(t.discountsAndVat.rebateValue)+Number(t.discountsAndVat.tradeDiscountValue)+Number(t.discountsAndVat.cashDiscountValue)}),Object(u.jsx)("td",{children:null===(c=t.otherAdditions)||void 0===c?void 0:c.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0)}),Object(u.jsx)("td",{children:Number(t.discountsAndVat.valueAddedTax).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]},t._id)}))})]})}),a&&Object(u.jsx)(V,{onClick:function(){s(!1)},refetch:function(){g(!0),k("Purchase Receipt Added Successfully"),setTimeout((function(){g(!1),k("")}),2e3)}})]}),j&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:f,message:D})]})};var Fe=function(){var e=Object(c.useRef)(null),t=Object(o.h)().receiptNumber,n=Object(c.useState)(!1),a=Object(r.a)(n,2),s=a[0],i=a[1],l=Object(c.useState)(!1),j=Object(r.a)(l,2),b=j[0],h=j[1],v=Object(c.useState)(!1),f=Object(r.a)(v,2),N=f[0],g=f[1],y=Object(c.useState)([]),S=Object(r.a)(y,2),D=S[0],k=S[1],A=Object(c.useState)(!1),T=Object(r.a)(A,2),P=T[0],I=T[1],F=Object(c.useState)(""),B=Object(r.a)(F,2),E=B[0],R=B[1],L=Object(c.useState)({transform:"translateY(-5rem)",visibility:"hidden"}),q=Object(r.a)(L,2),M=q[0],Y=q[1],H={width:"100%",position:"absolute",color:"gray",fontWeight:"550",padding:"1rem",backgroundColor:"#ffffff",borderRadius:"1rem",transform:M.transform,visibility:M.visibility,transition:"transform 0.5s ease"};function _(t){var n=e.current;n&&!n.contains(t.target)&&Y({transform:"translateY(-5rem)",visibility:"hidden"})}Object(c.useEffect)((function(){return document.addEventListener("mousedown",_),function(){document.removeEventListener("mousedown",_)}}),[]),Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return Q(t,e),function(){e=!0,t.cancel("Cancelling request")}}),[]);var Q=function(){var e=Object(O.a)(m.a.mark((function e(n,c){var a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,p.get("/purchaseReceipts/".concat(t),{cancelToken:n.token});case 4:return a=e.sent,e.next=7,a.data;case 7:s=e.sent,k(s),g(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),c||(x.a.isCancel(e.t0)?console.log("Request Cancelled"):console.log("Something went wrong"));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),G=null===D||void 0===D?void 0:D.map((function(e){return{source:"cash purchases",receiptInput:e.receiptInput,customerDetails:e.supplierDetails,data:e.data,additionsAndSubtractions:e.additionsAndSubtractions,discountsAndVat:e.discountsAndVat,otherAdditions:e.otherAdditions,grossAmount:e.grossAmount,netPayable:e.netPayable}}));return Object(u.jsxs)("div",{className:"Invoices",children:[!N&&Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsxs)("h1",{children:["Receipt #",null===D||void 0===D?void 0:D.map((function(e){return e.receiptInput.receiptNumber}))]}),Object(u.jsxs)("div",{className:"invoiceDetailOptions invoicesHeading moreOptions",children:[Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){i(!0)},children:"New Receipt"}),Object(u.jsxs)("div",{className:"moreOptions invoicesHeading",ref:e,children:[Object(u.jsxs)("button",{className:"invoiceButton",onClick:function(){"hidden"===M.visibility?Y({transform:"translateY(0)",visibility:"visible"}):Y({transform:"translateY(-5rem)",visibility:"hidden"})},children:["More Options ",Object(u.jsx)("i",{className:"fas fa-sort-down"})]}),Object(u.jsxs)("div",{className:"moreOptionsCont",style:Object(d.a)({},H),children:[Object(u.jsx)("p",{className:"option",onClick:function(){h(!0),setTimeout((function(){h(!1),ve()({printable:"ReceiptTemplate",type:"html",targetStyles:["*"],maxWidth:"120%",documentTitle:"@HK Solutions"})}),1e3)},children:"Print Receipt"}),Object(u.jsx)("p",{className:"option",onClick:function(){I(!0),R("Function coming soon!!!"),setTimeout((function(){I(!1),R("")}),2e3)},children:"Export PDF"}),Object(u.jsx)("p",{className:"option",onClick:function(){I(!0),R("Function coming soon!!!"),setTimeout((function(){I(!1),R("")}),2e3)},children:"Send Receipt"})]})]})]})]}),null===G||void 0===G?void 0:G.map((function(e){return Object(u.jsx)(ye,{data:e})})),s&&Object(u.jsx)(V,{onClick:function(){i(!1)},refetch:function(){I(!0),R("Purchase Receipt Added Successfully"),setTimeout((function(){I(!1),R("")}),2e3)}}),b&&Object(u.jsx)(w,{}),N&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:P,message:E})]})};n(273);var Be=function(e){var t=e.message,n=e.submit;return Object(u.jsxs)("div",{className:"ConfirmMessageBox",children:[Object(u.jsx)("div",{className:"messageContent",children:Object(u.jsx)("p",{children:t})}),Object(u.jsx)("div",{className:"submitButton",children:Object(u.jsx)("button",{className:"btn",onClick:n,children:"Submit"})})]})};var Ee=function(){var e,t,n,a=Object(o.f)(),s=Object(c.useState)(!1),i=Object(r.a)(s,2),l=i[0],j=i[1],b=Object(c.useState)(!1),h=Object(r.a)(b,2),v=h[0],f=h[1],g=Object(c.useState)(!1),y=Object(r.a)(g,2),S=y[0],D=y[1],k=Object(c.useState)(""),A=Object(r.a)(k,2),T=A[0],P=A[1],I=Object(c.useState)([]),F=Object(r.a)(I,2),B=F[0],E=F[1],R=Object(c.useState)({}),L=Object(r.a)(R,2),q=L[0],V=L[1],M=Object(c.useState)({}),H=Object(r.a)(M,2),_=H[0],Q=H[1],G=Object(c.useState)(!1),U=Object(r.a)(G,2),W=U[0],J=U[1],z=Object(c.useState)({valueAddedTax:"",cashDiscount:"",tradeDiscount:"",rebate:"",selectInvoiceTerm:15}),K=Object(r.a)(z,2),X=K[0],Z=(K[1],Object(c.useState)([{name:"",amount:""},{name:"",amount:""},{name:"",amount:""},{name:"",amount:""}])),$=Object(r.a)(Z,2),ee=$[0],te=($[1],Object(c.useRef)(null)),ne=function(e){var t=e.target,n=t.name,c=t.value;V((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},ce=function(){var e=Object(O.a)(m.a.mark((function e(t,n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,p.get("/purchaseOrders",{cancelToken:t.token});case 4:c=e.sent,E(c.data),f(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n||(x.a.isCancel(e.t0)?console.log("Request Cancelled"):console.log("Something went wrong"));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e=x.a.CancelToken.source(),t=!1;return ce(e,t),function(){t=!0,e.cancel("Cancelling request")}}),[]);var ae=function(e){a.push(e)};function se(e){var t=te.current;t&&!t.contains(e.target)&&J(!1)}Object(c.useEffect)((function(){return document.addEventListener("mousedown",se),function(){document.removeEventListener("mousedown",se)}}),[]),(new Date).toDateString();var ie=null===_||void 0===_?void 0:_.amount,re=ie-((ie*(Number(null===X||void 0===X?void 0:X.rebate)/100)).toFixed(2)||0),le=re-((re*(Number(null===X||void 0===X?void 0:X.tradeDiscount)/100)).toFixed(2)||0),oe=(((le-((le*(Number(null===X||void 0===X?void 0:X.cashDiscount)/100)).toFixed(2)||0))*(Number(null===X||void 0===X?void 0:X.valueAddedTax)/100)).toFixed(2),ee.map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)})),ee.filter((function(e){return""!==e.name&&""!==e.amount})),{invoiceInput:{date:null===(e=_.orderInput)||void 0===e?void 0:e.date,invoiceNumber:null===(t=_.orderInput)||void 0===t?void 0:t.orderNumber,supplierName:null===(n=_.orderInput)||void 0===n?void 0:n.supplierName,dueDate:null===_||void 0===_?void 0:_.dueDate},selectInvoiceTerm:_.selectInvoiceTerm,supplierDetails:null===_||void 0===_?void 0:_.supplierDetails,data:_.data,additionsAndSubtractions:_.additionsAndSubtractions,discountsAndVat:_.discountsAndVat,otherAdditions:_.otherAdditions,grossAmount:_.grossAmount,netPayable:_.netPayable,totalPaid:0,balanceDue:_.netPayable,dueDate:_.dueDate}),de=function(){D(!0),P("function coming soon!!!"),setTimeout((function(){D(!1),P("")}),2e3)};return Object(u.jsxs)("div",{className:"Invoices",children:[!v&&Object(u.jsxs)("div",{className:"Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsx)("h1",{children:"Purchase Orders"}),Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){j(!0)},children:"New Order"})]}),Object(u.jsxs)("div",{className:"invoiceFilters",children:[Object(u.jsx)("div",{className:"nameFilter",children:Object(u.jsx)("input",{type:"text",name:"nameFilter",value:q.nameFilter,onChange:ne,className:"filterInput",placeholder:"Filter by customer name"})}),Object(u.jsx)("div",{className:"amountFilter",children:Object(u.jsx)("input",{type:"text",name:"amountFilter",value:q.amountFilter,onChange:ne,className:"filterInput",placeholder:"Filter by amount"})})]}),Object(u.jsx)("div",{className:"allDebtorsContainer",children:Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Supplier Name"}),Object(u.jsx)("th",{children:"Order Number"}),Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Due Date"}),Object(u.jsx)("th",{children:"Gross Amoount"}),Object(u.jsx)("th",{children:"Net Amount"})]})}),Object(u.jsx)("tbody",{children:null===B||void 0===B?void 0:B.sort((function(e,t){return new Date(t.orderInput.date)-new Date(e.orderInput.date)})).filter((function(e){var t,n,c;return!q.nameFilter&&!q.amountFilter||(!q.amountFilter&&!q.nameFilter||(!!(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===(n=q.nameFilter)||void 0===n?void 0:n.toLowerCase()))||(!!(null===(c=e.amount)||void 0===c?void 0:c.toString().includes(q.amountFilter))||void 0)))})).map((function(e,t){return Object(u.jsxs)("tr",{className:"invoiceDetail",children:[Object(u.jsx)("td",{onClick:function(){ae("/purchase-orders/".concat(e._id))},children:e.supplierDetails.name}),Object(u.jsx)("td",{onClick:function(){ae("/purchase-orders/".concat(e._id))},children:e.orderInput.orderNumber}),Object(u.jsx)("td",{onClick:function(){ae("/purchase-orders/".concat(e._id))},children:new Date(e.orderInput.date).toLocaleDateString()}),Object(u.jsx)("td",{onClick:function(){ae("/purchase-orders/".concat(e._id))},children:e.dueDate}),Object(u.jsx)("td",{onClick:function(){ae("/purchase-orders/".concat(e._id))},children:Number(e.grossAmount).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{onClick:function(){ae("/purchase-orders/".concat(e._id))},children:Number(e.netPayable).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsxs)("td",{className:"sendInvoice",children:[Object(u.jsxs)("span",{onClick:de,children:[Object(u.jsx)("i",{className:"fas fa-share fa-sm"}),Object(u.jsx)("small",{style:{display:"block"},children:"Send"})]}),Object(u.jsxs)("span",{onClick:function(){Q(Object(d.a)(Object(d.a)({},e),{},{totalPaid:0,balanceDue:e.netPayable})),J(!0)},children:[Object(u.jsx)("i",{className:"fas fa-file-alt fa-sm"}),Object(u.jsx)("small",{style:{display:"block"},children:"New"})]})]})]},e.__id)}))})]})}),l&&Object(u.jsx)(Y,{onClick:function(){j(!1)},fetching:function(){D(!0),P("Purchase Order Added Successfully"),setTimeout((function(){D(!1),P("")}),2e3)}})]}),W&&Object(u.jsx)("div",{ref:te,children:Object(u.jsx)(Be,{message:"Confirm Update Order to Invoice??",submit:function(){p.post("/purchaseInvoice",oe).then((function(){J(!1),f(!1),D(!0),P("Updated To Invoice Successfully"),setTimeout((function(){D(!1),P("")}),2e3)}))}})}),v&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:S,message:T})]})};var Re=function(){var e=Object(c.useRef)(null),t=Object(o.h)().orderNumber,n=Object(c.useState)(!1),a=Object(r.a)(n,2),s=a[0],i=a[1],l=Object(c.useState)(!1),j=Object(r.a)(l,2),b=j[0],h=j[1],v=Object(c.useState)(!1),f=Object(r.a)(v,2),N=f[0],g=f[1],y=Object(c.useState)([]),S=Object(r.a)(y,2),D=S[0],k=S[1],A=Object(c.useState)(!1),T=Object(r.a)(A,2),P=T[0],I=T[1],F=Object(c.useState)(""),B=Object(r.a)(F,2),E=B[0],R=B[1],L=Object(c.useState)({transform:"translateY(-5rem)",visibility:"hidden"}),q=Object(r.a)(L,2),V=q[0],M=q[1],H={width:"100%",position:"absolute",color:"gray",fontWeight:"550",padding:"1rem",backgroundColor:"#ffffff",borderRadius:"1rem",transform:V.transform,visibility:V.visibility,transition:"transform 0.5s ease"},_=Object(c.useState)(!1),Q=Object(r.a)(_,2),G=Q[0],U=Q[1],W=Object(c.useRef)(null);function J(t){var n=e.current;n&&!n.contains(t.target)&&M({transform:"translateY(-5rem)",visibility:"hidden"})}Object(c.useEffect)((function(){return document.addEventListener("mousedown",J),function(){document.removeEventListener("mousedown",J)}}),[]),Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return z(t,e),function(){e=!0,t.cancel("Cancelling request")}}),[]);var z=function(){var e=Object(O.a)(m.a.mark((function e(n,c){var a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,p.get("/purchaseOrders/".concat(t),{cancelToken:n.token});case 4:return a=e.sent,e.next=7,a.data;case 7:s=e.sent,k(s),g(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),c||(x.a.isCancel(e.t0)?console.log("Request Cancelled"):console.log("Something went wrong"));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}();function K(e){var t=W.current;t&&!t.contains(e.target)&&U(!1)}Object(c.useEffect)((function(){return document.addEventListener("mousedown",K),function(){document.removeEventListener("mousedown",K)}}),[]);var X=null===D||void 0===D?void 0:D.map((function(e){return{invoiceInput:null===e||void 0===e?void 0:e.orderInput,selectInvoiceTerm:null===e||void 0===e?void 0:e.selectInvoiceTerm,supplierDetails:null===e||void 0===e?void 0:e.supplierDetails,data:null===e||void 0===e?void 0:e.data,additionsAndSubtractions:null===e||void 0===e?void 0:e.additionsAndSubtractions,discountsAndVat:null===e||void 0===e?void 0:e.discountsAndVat,otherAdditions:null===e||void 0===e?void 0:e.otherAdditions,grossAmount:null===e||void 0===e?void 0:e.grossAmount,netPayable:null===e||void 0===e?void 0:e.netPayable,totalPaid:null===e||void 0===e?void 0:e.totalPaid,balanceDue:null===e||void 0===e?void 0:e.balanceDue,dueDate:null===e||void 0===e?void 0:e.dueDate}})),Z=null===D||void 0===D?void 0:D.map((function(e){return{invoiceInput:{date:e.orderInput.date,customerName:e.orderInput.supplierName,dueDate:null===e||void 0===e?void 0:e.orderInput.dueDate},selectInvoiceTerm:null===e||void 0===e?void 0:e.selectInvoiceTerm,customerDetails:null===e||void 0===e?void 0:e.supplierDetails,data:null===e||void 0===e?void 0:e.data,additionsAndSubtractions:null===e||void 0===e?void 0:e.additionsAndSubtractions,discountsAndVat:null===e||void 0===e?void 0:e.discountsAndVat,otherAdditions:null===e||void 0===e?void 0:e.otherAdditions,grossAmount:null===e||void 0===e?void 0:e.grossAmount,netPayable:null===e||void 0===e?void 0:e.netPayable,totalPaid:null===e||void 0===e?void 0:e.totalPaid,balanceDue:null===e||void 0===e?void 0:e.balanceDue,dueDate:null===e||void 0===e?void 0:e.dueDate}}));return Object(u.jsxs)("div",{className:"Invoices",children:[!N&&Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsxs)("h1",{children:["Order #",null===D||void 0===D?void 0:D.map((function(e){return e.orderInput.orderNumber}))]}),Object(u.jsxs)("div",{className:"invoiceDetailOptions invoicesHeading moreOptions",children:[Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){i(!0)},children:"Place New Order"}),Object(u.jsxs)("div",{className:"moreOptions invoicesHeading",ref:e,children:[Object(u.jsxs)("button",{className:"invoiceButton",onClick:function(){"hidden"===V.visibility?M({transform:"translateY(0)",visibility:"visible"}):M({transform:"translateY(-5rem)",visibility:"hidden"})},children:["More Options ",Object(u.jsx)("i",{className:"fas fa-sort-down"})]}),Object(u.jsxs)("div",{className:"moreOptionsCont",style:Object(d.a)({},H),children:[Object(u.jsx)("p",{className:"option",onClick:function(){h(!0),setTimeout((function(){h(!1),ve()({printable:"invoiceTemplate",type:"html",targetStyles:["*"],maxWidth:"120%",documentTitle:"@HK Solutions"})}),1e3)},children:"Print Order"}),Object(u.jsx)("p",{className:"option",onClick:function(){U(!0)},children:"Convert To Invoice"}),Object(u.jsx)("p",{className:"option",onClick:function(){I(!0),R("function coming soon!!!"),setTimeout((function(){I(!1),R("")}),2e3)},children:"Export PDF"})]})]})]})]}),G&&Object(u.jsx)("div",{className:"upDateQuoteToInvoice",ref:W,children:Object(u.jsx)(Be,{message:"Confirm Update Order to Invoice??",submit:function(){p.post("/purchaseInvoice",X[0]).then((function(e){console.log(e.data),U(!1),g(!1),I(!0),R("Updated To Invoice Successfully"),setTimeout((function(){I(!1),R("")}),2e3)}))}})}),null===Z||void 0===Z?void 0:Z.map((function(e,t){return Object(u.jsx)(fe,{data:e},e.i)})),s&&Object(u.jsx)(Y,{onClick:function(){i(!1)},fetching:function(){I(!0),R("Order Added Successfully"),setTimeout((function(){I(!1),R("")}),2e3)}}),b&&Object(u.jsx)(w,{}),N&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:P,message:E})]})};var Le=function(){var e=Object(o.f)(),t=Object(c.useState)(!1),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),l=Object(r.a)(i,2),j=l[0],b=l[1],h=Object(c.useState)(!1),v=Object(r.a)(h,2),f=v[0],g=v[1],y=Object(c.useState)(""),S=Object(r.a)(y,2),D=S[0],k=S[1],A=Object(c.useState)([]),T=Object(r.a)(A,2),P=T[0],I=T[1],F=Object(c.useState)({}),B=Object(r.a)(F,2),E=B[0],R=B[1],L=function(e){var t=e.target,n=t.name,c=t.value;R((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(N.a)({},n,c))}))},q=function(){var e=Object(O.a)(m.a.mark((function e(t,n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,p.get("/purchaseReturns",{cancelToken:t.token});case 4:c=e.sent,I(c.data),b(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n||(x.a.isCancel(e.t0)?console.log("Request Cancelled"):console.log("Something went wrong"));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e=x.a.CancelToken.source(),t=!1;return q(e,t),function(){t=!0,e.cancel("Cancelling request")}}),[]);var V=P;return Object(u.jsxs)("div",{className:"Invoices",children:[!j&&Object(u.jsxs)("div",{className:"Invoices",children:[Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsx)("h1",{children:"Purchase Returns"}),Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){s(!0)},children:"New Purchase Returns"})]}),Object(u.jsxs)("div",{className:"invoiceFilters",children:[Object(u.jsx)("div",{className:"nameFilter",children:Object(u.jsx)("input",{type:"text",name:"nameFilter",value:E.nameFilter,onChange:L,className:"filterInput",placeholder:"Filter by customer name"})}),Object(u.jsx)("div",{className:"amountFilter",children:Object(u.jsx)("input",{type:"text",name:"amountFilter",value:E.amountFilter,onChange:L,className:"filterInput",placeholder:"Filter by amount"})})]}),Object(u.jsx)("div",{className:"allDebtorsContainer",children:Object(u.jsxs)("table",{className:"allDebtorsTable",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Supplier Name"}),Object(u.jsx)("th",{children:"Return Number"}),Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Net Amount"}),Object(u.jsx)("th",{children:"Total Discounts"}),Object(u.jsx)("th",{children:"Total Other Additions"}),Object(u.jsx)("th",{children:"VAT"})]})}),Object(u.jsx)("tbody",{children:null===V||void 0===V?void 0:V.sort((function(e,t){return new Date(t.returnInput.date)-new Date(e.returnInput.date)})).filter((function(e){var t,n,c;return!E.nameFilter&&!E.amountFilter||(!E.amountFilter&&!E.nameFilter||(!!(null===(t=e.supplierDetails.name)||void 0===t?void 0:t.toLowerCase().includes(null===(n=E.nameFilter)||void 0===n?void 0:n.toLowerCase()))||(!!(null===(c=e.netPayable)||void 0===c?void 0:c.toString().includes(E.amountFilter))||void 0)))})).map((function(t,n){var c;return Object(u.jsxs)("tr",{onClick:function(){var n;n="/purchase-returns/".concat(t._id),e.push(n)},className:"invoiceDetail",children:[Object(u.jsx)("td",{children:t.supplierDetails.name}),Object(u.jsx)("td",{children:t.returnsInput.returnNumber}),Object(u.jsx)("td",{children:new Date(t.returnsInput.date).toLocaleDateString()}),Object(u.jsx)("td",{children:Number(t.netPayable).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{children:Number(t.discountsAndVat.rebateValue)+Number(t.discountsAndVat.tradeDiscountValue)+Number(t.discountsAndVat.cashDiscountValue)}),Object(u.jsx)("td",{children:null===(c=t.otherAdditions)||void 0===c?void 0:c.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0)}),Object(u.jsx)("td",{children:Number(t.discountsAndVat.valueAddedTax).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]},t._id)}))})]})}),a&&Object(u.jsx)(H,{onClick:function(){s(!1)},refetch:function(){k("Purchases Return Added Successfully"),g(!0),setTimeout((function(){g(!1),k("")}))}})]}),j&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:f,message:D})]})};var qe=function(){var e=Object(c.useRef)(null),t=Object(o.h)().returnNumber,n=Object(c.useState)(!1),a=Object(r.a)(n,2),s=a[0],i=a[1],l=Object(c.useState)(!1),j=Object(r.a)(l,2),b=j[0],h=j[1],v=Object(c.useState)(!1),f=Object(r.a)(v,2),N=f[0],g=f[1],y=Object(c.useState)([]),S=Object(r.a)(y,2),D=S[0],k=S[1],A=Object(c.useState)(!1),T=Object(r.a)(A,2),P=T[0],I=T[1],F=Object(c.useState)(""),B=Object(r.a)(F,2),E=B[0],R=B[1],L=Object(c.useState)({transform:"translateY(-5rem)",visibility:"hidden"}),q=Object(r.a)(L,2),V=q[0],M=q[1],Y={width:"100%",position:"absolute",color:"gray",fontWeight:"550",padding:"1rem",backgroundColor:"#ffffff",borderRadius:"1rem",transform:V.transform,visibility:V.visibility,transition:"transform 0.5s ease"};function _(t){var n=e.current;n&&!n.contains(t.target)&&M({transform:"translateY(-5rem)",visibility:"hidden"})}Object(c.useEffect)((function(){return document.addEventListener("mousedown",_),function(){document.removeEventListener("mousedown",_)}}),[]),Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return Q(t,e),function(){e=!0,t.cancel("Cancelling request")}}),[]);var Q=function(){var e=Object(O.a)(m.a.mark((function e(n,c){var a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,p.get("/purchaseReturns/".concat(t),{cancelToken:n.token});case 4:return a=e.sent,e.next=7,a.data;case 7:s=e.sent,k(s),g(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),c||(x.a.isCancel(e.t0)?console.log("Request Cancelled"):console.log("Something went wrong"));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),G=null===D||void 0===D?void 0:D.map((function(e){return{receiptInput:{date:e.returnsInput.date,receiptNumber:e.returnsInput.returnNumber,customerName:e.returnsInput.customerName,additionalInfo:e.returnsInput.additionalInfos},customerDetails:e.supplierDetails,data:e.data,additionsAndSubtractions:e.additionsAndSubtractions,discountsAndVat:e.discountsAndVat,otherAdditions:e.otherAdditions,grossAmount:e.grossAmount,netPayable:e.netPayable}}));return Object(u.jsxs)("div",{className:"Invoices",children:[!N&&Object(u.jsxs)("div",{className:"invoicesHeading",children:[Object(u.jsxs)("h1",{children:["Return #",null===D||void 0===D?void 0:D.map((function(e){return e.returnsInput.returnNumber}))]}),Object(u.jsxs)("div",{className:"invoiceDetailOptions invoicesHeading moreOptions",children:[Object(u.jsx)("button",{className:"invoiceButton",onClick:function(){i(!0)},children:"New Return"}),Object(u.jsxs)("div",{className:"moreOptions invoicesHeading",ref:e,children:[Object(u.jsxs)("button",{className:"invoiceButton",onClick:function(){"hidden"===V.visibility?M({transform:"translateY(0)",visibility:"visible"}):M({transform:"translateY(-5rem)",visibility:"hidden"})},children:["More Options ",Object(u.jsx)("i",{className:"fas fa-sort-down"})]}),Object(u.jsxs)("div",{className:"moreOptionsCont",style:Object(d.a)({},Y),children:[Object(u.jsx)("p",{className:"option",onClick:function(){h(!0),setTimeout((function(){h(!1),ve()({printable:"ReceiptTemplate",type:"html",targetStyles:["*"],maxWidth:"120%",documentTitle:"@HK Solutions"})}),1e3)},children:"Print Return Statement"}),Object(u.jsx)("p",{className:"option",onClick:function(){I(!0),R("Function Coming Soon!!!"),setTimeout((function(){I(!1),R("")}),2e3)},children:"Export PDF"})]})]})]})]}),null===G||void 0===G?void 0:G.map((function(e){return Object(u.jsx)(ye,{data:e})})),s&&Object(u.jsx)(H,{onClick:function(){i(!1)},refetch:function(){I(!0),R("Purchase Return Added Successfully"),setTimeout((function(){I(!1),R("")}),2e3)}}),b&&Object(u.jsx)(w,{}),N&&Object(u.jsx)(w,{}),Object(u.jsx)(C,{alert:P,message:E})]})};n(274);n(275);var Ve=function(e){var t=e.labels,n=e.data1,c=e.data2,a=e.data3,s=e.tooltip1,i=e.tooltip2,r=e.tooltip3;return Object(u.jsx)("div",{className:"Barchart",children:Object(u.jsx)(v.c,{width:200,height:"70%",data:{labels:t,datasets:[{label:s,data:n,backgroundColor:"#B336D6"},{label:i,data:c,backgroundColor:"#37D636"},{label:r,data:a,backgroundColor:"#598A07"}]},options:{maintainAspectRatio:!0}})})};var Me=function(e){var t=e.labels,n=e.data,c=e.tooltip;return Object(u.jsx)("div",{className:"Barchart Doughnut",children:Object(u.jsx)(v.b,{width:"100%",height:"100%",data:{labels:t,datasets:[{label:c,data:n,backgroundColor:["#B336D6","#37D636","#F332D1"]}]},options:{maintainAspectRatio:!1}})})};var Ye=function(e){var t=e.labels,n=e.tooltip,c=e.backgroundColors,a=e.data;return Object(u.jsx)("div",{className:"Barchart",children:Object(u.jsx)(v.a,{width:"100%",height:"50%",data:{labels:t,datasets:[{label:n,data:a,backgroundColor:c}]},options:{maintainAspectRatio:!0}})})};var He=function(){var e,t,n,a,s,i,l,d,j,b,h,v,f,N,g,y,S,C,D,k,A,T,P,I,F,B,E,R,L,q,V,M,Y,H,_,Q,G,U,W,J,z,K,X,Z,$,ee,te,ne,ce,ae,se,ie,re,le,oe,de,ue,je=Object(o.f)(),be=Object(c.useState)(!0),me=Object(r.a)(be,2),Oe=me[0],he=me[1],xe=Object(c.useState)([]),pe=Object(r.a)(xe,2),ve=pe[0],fe=pe[1],Ne=function(){var e=Object(O.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("/",{cancelToken:n.token}).then((function(e){fe(e.data),he(!1)})).catch((function(e){t||(x.a.isCancel(e)?console.log("Request Cancelled"):console.log("Something went wrong"))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e=!1,t=x.a.CancelToken.source();return Ne(e,t),function(){e=!0,t.cancel("Cancelling request")}}),[]);var ge=[],ye=[],Se=[],Ce=[],De=[],ke=[],we=[],Ae=[],Te=[],Pe=[],Ie=[],Fe=[],Be=[],Ee=[],Re=[],Le=[],qe=[],He=[],_e=[],Qe=[],Ge=[],Ue=[],We=[],Je=[],ze=[],Ke=[],Xe=[],Ze=[],$e=[],et=[],tt=[],nt=[],ct=[],at=[],st=[],it=[],rt=[],lt=[],ot=[],dt=[],ut=[],jt=[],bt=[],mt=[],Ot=[],ht=[],xt=[],pt=[],vt=[],ft=[],Nt=[],gt=[],yt=[],St=[],Ct=[],Dt=[],kt=[],wt=[],At=[],Tt=[],Pt=[],It=[],Ft=[],Bt=[],Et=[],Rt=[],Lt=[],qt=[],Vt=[],Mt=[],Yt=[],Ht=[],_t=[],Qt=[],Gt=[],Ut=[],Wt=[],Jt=[],zt=[],Kt=[],Xt=[],Zt=[],$t=[],en=[],tn=function(e,t,n,c,a,s,i,r,l,o,d,u,j,b){switch(e){case 0:t.push(b);break;case 1:n.push(b);break;case 2:c.push(b);break;case 3:a.push(b);break;case 4:s.push(b);break;case 5:i.push(b);break;case 6:r.push(b);break;case 7:l.push(b);break;case 8:o.push(b);break;case 9:d.push(b);break;case 10:u.push(b);break;case 11:j.push(b);break;default:return null}},nn=function(e){return e.reduce((function(e,t){return Number(e)+Number(t)}),0)};null===ve||void 0===ve||null===(e=ve.sales)||void 0===e||e.filter((function(e){return"sales returns"!==e.saleType})).map((function(e){var t=new Date(e.date).getMonth(),n=e.amount;tn(t,ge,ye,Se,Ce,De,ke,we,Ae,Te,Pe,Ie,Fe,n)})),null===ve||void 0===ve||null===(t=ve.sales)||void 0===t||t.filter((function(e){return"sales returns"===e.saleType})).map((function(e){var t=new Date(e.date).getMonth(),n=e.amount;tn(t,Be,Ee,Re,Le,qe,He,_e,Qe,Ge,Ue,We,Je,n)}));var cn=nn(ge)-nn(Be),an=nn(ye)-nn(Ee),sn=nn(Se)-nn(Re),rn=nn(Ce)-nn(Le),ln=nn(De)-nn(qe),on=nn(ke)-nn(He),dn=nn(we)-nn(_e),un=nn(Ae)-nn(Qe),jn=nn(Te)-nn(Ge),bn=nn(Pe)-nn(Ue),mn=nn(Ie)-nn(We),On=nn(Fe)-nn(Je);null===ve||void 0===ve||null===(n=ve.purchases)||void 0===n||n.filter((function(e){return"purchase returns"!==e.purchaseType})).map((function(e){var t=new Date(e.date).getMonth(),n=e.amount;tn(t,ze,Ke,Xe,Ze,$e,et,tt,nt,ct,at,st,it,n)})),null===ve||void 0===ve||null===(a=ve.purchases)||void 0===a||a.filter((function(e){return"purchase returns"===e.purchaseType})).map((function(e){var t=new Date(e.date).getMonth(),n=e.amount;tn(t,rt,lt,ot,dt,ut,jt,bt,mt,Ot,ht,xt,pt,n)}));var hn=nn(ze)-nn(rt),xn=nn(Ke)-nn(lt),pn=nn(Xe)-nn(ot),vn=nn(Ze)-nn(dt),fn=nn($e)-nn(ut),Nn=nn(et)-nn(jt),gn=nn(tt)-nn(bt),yn=nn(nt)-nn(mt),Sn=nn(ct)-nn(Ot),Cn=nn(at)-nn(ht),Dn=nn(st)-nn(xt),kn=nn(it)-nn(pt);null===ve||void 0===ve||null===(s=ve.purchaseExpenses)||void 0===s||s.map((function(e){var t=new Date(e.date).getMonth(),n=e.value;tn(t,vt,ft,Nt,gt,yt,St,Ct,Dt,kt,wt,At,Tt,n)}));var wn=nn(vt),An=nn(ft),Tn=nn(Nt),Pn=nn(gt),In=nn(yt),Fn=nn(St),Bn=nn(Ct),En=nn(Dt),Rn=nn(kt),Ln=nn(wt),qn=nn(At),Vn=nn(Tt);null===ve||void 0===ve||null===(i=ve.inventory)||void 0===i||i.filter((function(e){return"entry"===e.exitOrEntry})).map((function(e){var t=new Date(e.date).getMonth(),n=e.amount;tn(t,Pt,It,Ft,Bt,Et,Rt,Lt,qt,Vt,Mt,Yt,Ht,n)}));var Mn=nn(Pt),Yn=nn(It),Hn=nn(Ft),_n=nn(Bt),Qn=nn(Et),Gn=nn(Rt),Un=nn(Lt),Wn=nn(qt),Jn=nn(Vt),zn=nn(Mt),Kn=nn(Yt),Xn=nn(Ht);null===ve||void 0===ve||null===(l=ve.inventory)||void 0===l||l.filter((function(e){return"exit"===e.exitOrEntry})).map((function(e){var t=new Date(e.date).getMonth(),n=e.amount;tn(t,_t,Qt,Gt,Ut,Wt,Jt,zt,Kt,Xt,Zt,$t,en,n)}));var Zn=hn+wn-(Mn-nn(_t)),$n=xn+An-(Yn-nn(Qt)),ec=pn+Tn-(Hn-nn(Gt)),tc=vn+Pn-(_n-nn(Ut)),nc=fn+In-(Qn-nn(Wt)),cc=Nn+Fn-(Gn-nn(Jt)),ac=gn+Bn-(Un-nn(zt)),sc=yn+En-(Wn-nn(Kt)),ic=Sn+Rn-(Jn-nn(Xt)),rc=Cn+Ln-(zn-nn(Zt)),lc=Dn+qn-(Kn-nn($t)),oc=kn+Vn-(Xn-nn(en)),dc=cn-Zn,uc=an-$n,jc=sn-ec,bc=rn-tc,mc=ln-nc,Oc=on-cc,hc=dn-ac,xc=un-sc,pc=jn-ic,vc=bn-rc,fc=mn-lc,Nc=On-oc,gc=(null===(d=ve.sales)||void 0===d?void 0:d.filter((function(e){return"sales returns"!==e.saleType})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,yc=(null===(j=ve.sales)||void 0===j?void 0:j.filter((function(e){return"credit"===e.saleType})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,Sc=(null===(b=ve.sales)||void 0===b?void 0:b.filter((function(e){return"sales returns"===e.saleType})).map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}),0).toFixed(2))||0,Cc=(null===(h=ve.purchases)||void 0===h?void 0:h.filter((function(e){return"purchase returns"!==e.purchaseType})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0))||0,Dc=(null===(v=ve.purchases)||void 0===v?void 0:v.filter((function(e){return"purchase returns"===e.purchaseType})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0))||0,kc=(null===(f=ve.purchases)||void 0===f?void 0:f.filter((function(e){return"credit"===e.purchaseType})).map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}),0))||0,wc=(null===(N=ve.purchaseExpenses)||void 0===N?void 0:N.map((function(e){return e.value})).reduce((function(e,t){return e+t}),0))||0,Ac=((null===(g=ve.inventory)||void 0===g?void 0:g.filter((function(e){return"entry"===e.exitOrEntry})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0))||0)-((null===(y=ve.inventory)||void 0===y?void 0:y.filter((function(e){return"exit"===e.exitOrEntry})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0))||0)||0,Tc=Cc+wc-Dc-Ac||0,Pc=gc-Sc||0,Ic=null===(S=ve.discounts)||void 0===S?void 0:S.filter((function(e){return"received"===e.typeOfDiscount})),Fc=[],Bc=[],Ec=[];null===Ic||void 0===Ic||Ic.forEach((function(e){0===e.tradeDiscount&&"0.00"===e.tradeDiscount||Ec.push(e.tradeDiscount),0===e.cashDiscount&&"0.00"===e.cashDiscount||Bc.push(e.cashDiscount),0===e.rebate&&"0.00"===e.rebate||Fc.push(e.rebate)}));var Rc=null===(C=ve.discounts)||void 0===C?void 0:C.filter((function(e){return"allowed"===e.typeOfDiscount})).map((function(e){return e.rebate+e.cashDiscount+e.tradeDiscount})).reduce((function(e,t){return e+t}),0),Lc=(null===(D=ve.otherIncome)||void 0===D?void 0:D.map((function(e){return e.value})).reduce((function(e,t){return e+t}),0))||0,qc=(null===Ic||void 0===Ic?void 0:Ic.map((function(e){return Number(e.rebate)+Number(e.cashDiscount)+Number(e.tradeDiscount)})).reduce((function(e,t){return e+t}),0))||0,Vc=ve.expenses,Mc=(null===(k=ve.expenses)||void 0===k?void 0:k.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0))+Rc||0,Yc=(null===Vc||void 0===Vc?void 0:Vc.filter((function(e){return"administration"===e.category})).map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}),0))||0,Hc=(null===Vc||void 0===Vc?void 0:Vc.filter((function(e){return"distribution"===e.category})).map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}),0))||0,_c=(null===Vc||void 0===Vc?void 0:Vc.filter((function(e){return"other"===e.category})).map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}),0))||0,Qc=new Date,Gc=Qc.getFullYear(),Uc=Qc.getDate(),Wc=Qc.getMonth(),Jc=ve.fixedAssets,zc=[];null===Jc||void 0===Jc||Jc.forEach((function(e){e.depInfos.forEach((function(t){t.assetName=e.asset.assetName,t.cost=e.asset.cost,t.year===Gc&&zc.push(t)}))})),zc.map((function(e){return e.cost})).reduce((function(e,t){return Number(e)+Number(t)}),0).toFixed(2);var Kc=zc.map((function(e){return e.nbv})).reduce((function(e,t){return Number(e)+Number(t)}),0).toFixed(2)||0,Xc=zc.map((function(e){return e.endOfYearDep})).reduce((function(e,t){return Number(e)+Number(t)}),0).toFixed(2)||0,Zc=Pc-Tc||0,$c=Zc+Lc+qc-Mc-Xc||0,ea=Zc+Lc+qc-Mc,ta=(Number(Zc)/Number(gc)*100).toFixed(2)||0,na=(Number($c)/Number(gc)*100).toFixed(2)||0,ca=(null===ve||void 0===ve||null===(A=ve.debtors)||void 0===A?void 0:A.map((function(e){return e.balanceDue})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,aa=(ca/yc*360).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")||0,sa=(null===ve||void 0===ve||null===(T=ve.suppliers)||void 0===T?void 0:T.map((function(e){return e.balanceDue})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,ia=(sa/kc*360).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")||0,ra=(null===ve||void 0===ve||null===(P=ve.meansOfPayment)||void 0===P?void 0:P.filter((function(e){return"cash"===e.meansOfPayment})).filter((function(e){return"in"===e.inOrOut})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,la=(null===ve||void 0===ve||null===(I=ve.meansOfPayment)||void 0===I?void 0:I.filter((function(e){return"cash"===e.meansOfPayment})).filter((function(e){return"out"===e.inOrOut})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,oa=Number(ra)-Number(la),da=(null===ve||void 0===ve||null===(F=ve.meansOfPayment)||void 0===F?void 0:F.filter((function(e){return"bank"===e.meansOfPayment})).filter((function(e){return"in"===e.inOrOut})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,ua=(null===ve||void 0===ve||null===(B=ve.meansOfPayment)||void 0===B?void 0:B.filter((function(e){return"bank"===e.meansOfPayment})).filter((function(e){return"out"===e.inOrOut})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,ja=Number(da)-Number(ua),ba=(null===ve||void 0===ve||null===(E=ve.meansOfPayment)||void 0===E?void 0:E.filter((function(e){return"mobileMoney"===e.meansOfPayment})).filter((function(e){return"in"===e.inOrOut})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,ma=(null===ve||void 0===ve||null===(R=ve.meansOfPayment)||void 0===R?void 0:R.filter((function(e){return"mobileMoney"===e.meansOfPayment})).filter((function(e){return"out"===e.inOrOut})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,Oa=Number(ba)-Number(ma),ha=(null===ve||void 0===ve||null===(L=ve.capital)||void 0===L?void 0:L.map((function(e){return e.totalContribution})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,xa=(null===ve||void 0===ve||null===(q=ve.longtermLiabilities)||void 0===q?void 0:q.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2))||0,pa=(null===ve||void 0===ve||ve.longtermLiabilities,null===(V=ve.vat)||void 0===V?void 0:V.filter((function(e){return"invoiced"===e.vatType})).map((function(e){return e.value})).reduce((function(e,t){return Number(e)+Number(t)}),0)),va=null===(M=ve.vat)||void 0===M?void 0:M.filter((function(e){return"recoverable"===e.vatType})).map((function(e){return e.value})).reduce((function(e,t){return Number(e)+Number(t)}),0),fa=Number(pa)-Number(va),Na=(null===ve||void 0===ve||null===(Y=ve.salesInvoices)||void 0===Y||Y.filter((function(e){return Number(e.netPayable)===Number(e.totalPaid)})),null===ve||void 0===ve||null===(H=ve.salesInvoices)||void 0===H?void 0:H.filter((function(e){return Number(e.netPayable)>Number(e.totalPaid)}))),ga=null===ve||void 0===ve||null===(_=ve.purchaseInvoices)||void 0===_?void 0:_.filter((function(e){return Number(e.netPayable)>Number(e.totalPaid)})),ya=[],Sa=[],Ca=[],Da=[];null===Na||void 0===Na||Na.forEach((function(e){var t=new Date(e.dueDate),n=t.getMonth(),c=t.getFullYear(),a=t.getDate();c===Gc&&(n<Wc&&ya.push(e),n===Wc&&(a<Uc&&ya.push(e),a>=Uc&&Sa.push(e)),n>Wc&&Ca.push(e))})),null===ga||void 0===ga||ga.forEach((function(e){var t=new Date(e.dueDate),n=t.getMonth();t.getFullYear()===Gc&&n===Wc&&Da.push(e)}));var ka=null===ya||void 0===ya?void 0:ya.map((function(e){return e.balanceDue})).reduce((function(e,t){return Number(e)+Number(t)}),0),wa=null===Sa||void 0===Sa?void 0:Sa.map((function(e){return e.balanceDue})).reduce((function(e,t){return Number(e)+Number(t)}),0),Aa=null===Ca||void 0===Ca?void 0:Ca.map((function(e){return e.balanceDue})).reduce((function(e,t){return Number(e)+Number(t)}),0);return console.log(ve),Object(u.jsxs)("div",{className:"Dashboard Invoices",children:[Object(u.jsxs)("div",{className:"treasuryBalances",children:[Object(u.jsx)("div",{className:"companyName gridItem",children:Object(u.jsx)("h2",{children:"XYZ Ltd to the world..."})}),Object(u.jsxs)("div",{className:"itemBalance gridItem",children:[Object(u.jsx)("p",{className:"itemCaption",children:"Cash Balance"}),Object(u.jsx)("p",{className:"itemValue",children:(null===(Q=Number(oa))||void 0===Q?void 0:Q.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"itemBalance gridItem",children:[Object(u.jsx)("p",{className:"itemCaption",children:"Bank Balance"}),Object(u.jsx)("p",{className:"itemValue",children:(null===(G=Number(ja))||void 0===G?void 0:G.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"itemBalance gridItem",children:[Object(u.jsx)("p",{className:"itemCaption",children:"Mobile Money Balance"}),Object(u.jsx)("p",{className:"itemValue",children:(null===(U=Number(Oa))||void 0===U?void 0:U.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]}),Object(u.jsxs)("div",{className:"profitAndLossSection",children:[Object(u.jsx)("div",{className:"profitAndLossGraph",children:Object(u.jsx)(Ve,{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],data1:[cn,an,sn,rn,ln,on,dn,un,jn,bn,mn,On],tooltip1:"Sales",data2:[Zn,$n,ec,tc,nc,cc,ac,sc,ic,rc,lc,oc],tooltip2:"COGS",data3:[dc,uc,jc,bc,mc,Oc,hc,xc,pc,vc,fc,Nc],tooltip3:"Gross Profit"})}),Object(u.jsx)("div",{className:"profitAndLossSummary",children:Object(u.jsxs)("div",{className:"treasuryBalances",children:[Object(u.jsxs)("div",{className:"companyName gridItem",children:[Object(u.jsx)("p",{className:"itemCaption",children:"Net Profit"}),Object(u.jsx)("p",{className:"itemValue",children:(null===(W=Number($c))||void 0===W?void 0:W.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"itemBalance gridItem",children:[Object(u.jsx)("p",{className:"itemCaption",children:"Net Profit Margin"}),Object(u.jsxs)("p",{className:"itemValue",children:[na,"%"]})]}),Object(u.jsxs)("div",{className:"itemBalance gridItem",children:[Object(u.jsx)("p",{className:"itemCaption",children:"Gross Profit"}),Object(u.jsx)("p",{className:"itemValue",children:(null===(J=Number(Zc))||void 0===J?void 0:J.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"itemBalance gridItem",children:[Object(u.jsx)("p",{className:"itemCaption",children:"Gross Profit Margin"}),Object(u.jsxs)("p",{className:"itemValue",children:[ta,"%"]})]})]})})]}),Object(u.jsxs)("div",{className:"reportsSection",children:[Object(u.jsxs)("div",{className:"incomeStatementSection",children:[Object(u.jsx)("h3",{children:"Summarised Income Statement"}),Object(u.jsxs)("table",{className:"summaryReport",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Elements"}),Object(u.jsx)("th",{children:"Calc"}),Object(u.jsx)("th",{children:"Amount"})]})}),Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Sales"}),Object(u.jsx)("td",{}),Object(u.jsx)("td",{children:null===(z=Number(gc))||void 0===z?void 0:z.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Cost of Sales"}),Object(u.jsx)("td",{}),Object(u.jsx)("td",{children:Object(u.jsxs)("u",{children:["(",(null===(K=Number(Tc))||void 0===K?void 0:K.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),")"]})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:"Gross Profit"})}),Object(u.jsx)("td",{}),Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:(null===(X=Number(Zc))||void 0===X?void 0:X.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Other Income"}),Object(u.jsx)("td",{}),Object(u.jsx)("td",{children:(null===(Z=Number(Lc))||void 0===Z?void 0:Z.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:Object(u.jsx)("u",{children:"Expenses"})})}),Object(u.jsx)("td",{}),Object(u.jsx)("td",{})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Admin"}),Object(u.jsx)("td",{children:(null===($=Number(Yc))||void 0===$?void 0:$.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Distribution"}),Object(u.jsx)("td",{children:(null===(ee=Number(Hc))||void 0===ee?void 0:ee.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Other Exp"}),Object(u.jsx)("td",{children:(null===(te=Number(_c))||void 0===te?void 0:te.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Depreciation"}),Object(u.jsx)("td",{children:Object(u.jsx)("u",{children:(null===(ne=Number(Xc))||void 0===ne?void 0:ne.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})}),Object(u.jsx)("td",{children:Object(u.jsxs)("u",{children:["(",(null===(ce=Number(Xc)+Number(Mc))||void 0===ce?void 0:ce.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),")"]})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:Object(u.jsx)("u",{children:"EBIT"})})}),Object(u.jsx)("td",{}),Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:Object(u.jsx)("u",{children:(null===(ae=Number($c))||void 0===ae?void 0:ae.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})})]})]})]})]}),Object(u.jsxs)("div",{className:"invoicesAndExpensesByNatureSection",children:[Object(u.jsx)(Me,{labels:["OverDue","Not Due","Due this Month"],data:[ka,Aa,wa]}),Object(u.jsx)(Ye,{data:[Number(Hc),Number(Yc),Number(_c)],labels:["Distribution","AdminiStrative","Others"],tooltip:"Expenses by type",backgroundColors:["#9AD636","#D63689","#088A07"]})]}),Object(u.jsxs)("div",{className:"balanceSheetSummarySection",children:[Object(u.jsx)("h3",{children:"Summarised Balance Sheet"}),Object(u.jsxs)("table",{className:"summaryReport",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Elements"}),Object(u.jsx)("th",{children:"Calc"}),Object(u.jsx)("th",{children:"Amount"})]})}),Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Net Fixed Assets"}),Object(u.jsx)("td",{}),Object(u.jsx)("td",{children:(null===(se=Number(Kc))||void 0===se?void 0:se.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Total Current Assets"}),Object(u.jsx)("td",{}),Object(u.jsx)("td",{children:Object(u.jsx)("u",{children:(Number(Oa)+Number(oa)+Number(ja)+Number(Ac)+Number(ca)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:"Total Assets"})}),Object(u.jsx)("td",{}),Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:(Number(Oa)+Number(oa)+Number(ja)+Number(Ac)+Number(ca)+Number(Kc)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Total Current Liabilities"}),Object(u.jsx)("td",{children:(Number(sa)+Number(fa)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Total Longterm Liabilities"}),Object(u.jsx)("td",{children:Object(u.jsx)("u",{children:xa.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})}),Object(u.jsx)("td",{children:Object(u.jsxs)("u",{children:["(",(Number(xa)+Number(sa)+Number(fa)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),")"]})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:"Net Assets"})}),Object(u.jsx)("td",{}),Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:Object(u.jsx)("u",{children:(Number(Oa)+Number(oa)+Number(ja)+Number(Ac)+Number(ca)+Number(Kc)-Number(sa)-Number(fa)-Number(xa)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:Object(u.jsx)("u",{children:"Financed By:"})})}),Object(u.jsx)("td",{}),Object(u.jsx)("td",{})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Capital"}),Object(u.jsx)("td",{children:(null===(ie=Number(ha))||void 0===ie?void 0:ie.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(u.jsx)("td",{})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"EBIT"}),Object(u.jsx)("td",{children:Object(u.jsx)("u",{children:(null===(re=Number(ea)-Number(Xc))||void 0===re?void 0:re.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})}),Object(u.jsx)("td",{})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:Object(u.jsx)("u",{children:"Net Capital"})})}),Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:Object(u.jsx)("u",{children:(null===(le=Number(ha)+(Number(ea)-Number(Xc)))||void 0===le?void 0:le.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})}),Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:Object(u.jsx)("u",{children:(null===(oe=Number(ha)+(Number(ea)-Number(Xc)))||void 0===oe?void 0:oe.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})})})]})]})]})]}),Object(u.jsxs)("div",{className:"invoicesDueThisMonth",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Customer Invoices Due this Month"})}),null===Sa||void 0===Sa?void 0:Sa.map((function(e){var t;return Object(u.jsxs)("div",{className:"dueInvoice",onClick:function(){je.push("/invoices/".concat(e._id))},children:[Object(u.jsxs)("p",{children:["Invoice #",e.invoiceInput.invoiceNumber]}),Object(u.jsx)("p",{children:Number(null===(t=e.balanceDue)||void 0===t?void 0:t.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})}))]}),Object(u.jsxs)("div",{className:"supplierInvoicesDueThisMonth",children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:"Supplier Invoices Due this Month"})}),null===Da||void 0===Da?void 0:Da.map((function(e){var t;return Object(u.jsxs)("div",{className:"dueInvoice",onClick:function(){je.push("/purchase-invoices/".concat(e._id))},children:[Object(u.jsx)("p",{children:e.invoiceInput.invoiceNumber}),Object(u.jsx)("p",{children:Number(null===(t=e.balanceDue)||void 0===t?void 0:t.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})}))]}),Object(u.jsx)("div",{className:"netDebtorsAndCreditors",children:Object(u.jsxs)("div",{className:"treasuryBalances",children:[Object(u.jsxs)("div",{className:"companyName gridItem",children:[Object(u.jsx)("p",{className:"itemCaption",children:"Total Debtors"}),Object(u.jsx)("p",{className:"itemValue",children:(null===(de=Number(ca))||void 0===de?void 0:de.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"itemBalance gridItem",children:[Object(u.jsx)("p",{className:"itemCaption",children:"Debtors Collection Period"}),Object(u.jsxs)("p",{className:"itemValue",children:[aa," days"]})]}),Object(u.jsxs)("div",{className:"itemBalance gridItem",children:[Object(u.jsx)("p",{className:"itemCaption",children:"Total Creditors"}),Object(u.jsx)("p",{className:"itemValue",children:(null===(ue=Number(sa))||void 0===ue?void 0:ue.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),Object(u.jsxs)("div",{className:"itemBalance gridItem",children:[Object(u.jsx)("p",{className:"itemCaption",children:"Creditors Payment Period"}),Object(u.jsxs)("p",{className:"itemValue",children:[ia," days"]})]})]})})]}),Oe&&Object(u.jsx)(w,{})]})};var _e=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),i=Object(r.a)(s,2),d=i[0],b=i[1],m=Object(c.useState)(!1),O=Object(r.a)(m,2),h=O[0],x=O[1],p=Object(c.useState)(!1),v=Object(r.a)(p,2),f=v[0],N=v[1],g=Object(c.useState)(!1),y=Object(r.a)(g,2),S=y[0],D=y[1],k=Object(c.useState)(!1),w=Object(r.a)(k,2),L=w[0],W=w[1],J=Object(c.useState)(!1),K=Object(r.a)(J,2),X=K[0],Z=K[1],$=Object(c.useState)(!1),ne=Object(r.a)($,2),ae=ne[0],se=ne[1],ie=Object(c.useState)(!1),me=Object(r.a)(ie,2),he=me[0],pe=me[1],ve=Object(c.useState)(!1),fe=Object(r.a)(ve,2),ye=fe[0],we=fe[1],Be=Object(c.useState)(!1),Ve=Object(r.a)(Be,2),Me=Ve[0],Ye=Ve[1],_e=Object(c.useState)(!1),Qe=Object(r.a)(_e,2),Ge=Qe[0],Ue=Qe[1],We=Object(c.useState)(!1),Je=Object(r.a)(We,2),ze=Je[0],Ke=Je[1],Xe=Object(c.useState)(!1),Ze=Object(r.a)(Xe,2),$e=Ze[0],et=Ze[1],tt=Object(c.useState)(""),nt=Object(r.a)(tt,2),ct=nt[0],at=nt[1];return Object(u.jsx)(l.a,{children:Object(u.jsx)(o.c,{children:Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(j,{click:function(){a(!n)}}),n&&Object(u.jsx)("div",{className:"Home",children:Object(u.jsx)(Oe,{onClick:function(){a(!1)},newQuotation:function(){a(!1),setTimeout((function(){b(!0)}),500)},newInvoice:function(){a(!1),setTimeout((function(){x(!0)}),500)},newCreditNote:function(){a(!1),setTimeout((function(){N(!0)}),500)},newReceipt:function(){a(!1),setTimeout((function(){D(!0)}),500)},newReceivePayment:function(){a(!1),setTimeout((function(){W(!0)}),500)},newPurchaseInvoice:function(){a(!1),setTimeout((function(){pe(!0)}),500)},newMakePayment:function(){a(!1),setTimeout((function(){Ye(!0)}),500)},newDebitNote:function(){a(!1),setTimeout((function(){Ke(!0)}))},newPurchaseReturns:function(){a(!1),setTimeout((function(){Ue(!0)}),500)},newPurchaseOrder:function(){a(!1),setTimeout((function(){se(!0)}))},newExpense:function(){a(!1),setTimeout((function(){Z(!0)}),500)},newCashPurchase:function(){a(!1),setTimeout((function(){we(!0)}),500)}})}),Object(u.jsx)(o.a,{path:"/",exact:!0,children:Object(u.jsx)(He,{})}),Object(u.jsx)(o.a,{path:"/sales",exact:!0,children:Object(u.jsx)(B,{})}),Object(u.jsx)(o.a,{path:"/invoices",exact:!0,children:Object(u.jsx)(xe,{})}),Object(u.jsx)(o.a,{path:"/invoices/:invoiceNumber",exact:!0,children:Object(u.jsx)(Ne,{})}),Object(u.jsx)(o.a,{path:"/receipts",exact:!0,children:Object(u.jsx)(ge,{})}),Object(u.jsx)(o.a,{path:"/receipts/:receiptNumber",exact:!0,children:Object(u.jsx)(Se,{})}),Object(u.jsx)(o.a,{path:"/credit-notes",exact:!0,children:Object(u.jsx)(Ce,{})}),Object(u.jsx)(o.a,{path:"/credit-notes/:noteNumber",exact:!0,children:Object(u.jsx)(De,{})}),Object(u.jsx)(o.a,{path:"/quotes",exact:!0,children:Object(u.jsx)(ke,{})}),Object(u.jsx)(o.a,{path:"/quotes/:quoteNumber",exact:!0,children:Object(u.jsx)(Ae,{})}),Object(u.jsx)(o.a,{path:"/customers",exact:!0,children:Object(u.jsx)(E,{})}),Object(u.jsx)(o.a,{path:"/purchase-receipts",exact:!0,children:Object(u.jsx)(Ie,{})}),Object(u.jsx)(o.a,{path:"/purchase-receipts/:receiptNumber",exact:!0,children:Object(u.jsx)(Fe,{})}),Object(u.jsx)(o.a,{path:"/purchase-invoices",exact:!0,children:Object(u.jsx)(Te,{})}),Object(u.jsx)(o.a,{path:"/purchase-invoices/:invoiceNumber",exact:!0,children:Object(u.jsx)(Pe,{})}),Object(u.jsx)(o.a,{path:"/purchase-orders",exact:!0,children:Object(u.jsx)(Ee,{})}),Object(u.jsx)(o.a,{path:"/purchase-orders/:orderNumber",exact:!0,children:Object(u.jsx)(Re,{})}),Object(u.jsx)(o.a,{path:"/purchase-returns",exact:!0,children:Object(u.jsx)(Le,{})}),Object(u.jsx)(o.a,{path:"/purchase-returns/:returnNumber",exact:!0,children:Object(u.jsx)(qe,{})}),Object(u.jsx)(o.a,{path:"/inventories",exact:!0,children:Object(u.jsx)(te,{})}),Object(u.jsx)(o.a,{path:"/inventories/inventory?id=''&name=''",exact:!0,children:Object(u.jsx)(ee,{})}),Object(u.jsx)(o.a,{path:"/purchases",exact:!0,children:Object(u.jsx)(_,{})}),Object(u.jsx)(o.a,{path:"/suppliers",exact:!0,children:Object(u.jsx)(Q,{})}),Object(u.jsx)(o.a,{path:"/suppliers/:supplierName",exact:!0,children:Object(u.jsx)(G,{})}),Object(u.jsx)(o.a,{path:"/expenses",exact:!0,children:Object(u.jsx)(z,{})}),Object(u.jsx)(o.a,{path:"/treasury",exact:!0,children:Object(u.jsx)(ce,{})}),Object(u.jsx)(o.a,{path:"/capital-and-fixed-assets",exact:!0,children:Object(u.jsx)(re,{})}),Object(u.jsx)(o.a,{path:"/assets/:serialNumber",exact:!0,children:Object(u.jsx)(le,{})}),Object(u.jsx)(o.a,{path:"/shareholders/:serialNumber",exact:!0,children:Object(u.jsx)(oe,{})}),Object(u.jsx)(o.a,{path:"/liabilities/:serialNumber",exact:!0,children:Object(u.jsx)(de,{})}),Object(u.jsx)(o.a,{path:"/reports",exact:!0,children:Object(u.jsx)(ue,{})}),Object(u.jsx)(o.a,{path:"/customers/:customerName",exact:!0,children:Object(u.jsx)(R,{})}),Object(u.jsx)(o.a,{path:"/reviews",exact:!0,children:Object(u.jsx)(je,{})}),d&&Object(u.jsx)(I,{onClick:function(){b(!1)},refetch:function(){et(!0),at("Quotation Added Successfully"),setTimeout((function(){et(!1),at("")}),2e3)}}),h&&Object(u.jsx)(A,{onClick:function(){x(!1)},refetch:function(){et(!0),at("Invoice Added Successfully"),setTimeout((function(){et(!1),at("")}),2e3)}}),f&&Object(u.jsx)(F,{onClick:function(){N(!1)},refetch:function(){et(!0),at("Credit Note Added Successfully"),setTimeout((function(){et(!1),at("")}),2e3)}}),S&&Object(u.jsx)(T,{onClick:function(){D(!1)},refetch:function(){et(!0),at("Receipt Added Successfully"),setTimeout((function(){et(!1),at("")}),2e3)}}),L&&Object(u.jsx)(P,{onClick:function(){W(!1)},refetch:function(){et(!0),at("Customer Payment Added Successfully"),setTimeout((function(){et(!1),at("")}),2e3)}}),he&&Object(u.jsx)(q,{onClick:function(){pe(!1)},refetch:function(){et(!0),at("Purchase Invoice Added Successfully"),setTimeout((function(){et(!1),at("")}),2e3)}}),Me&&Object(u.jsx)(M,{onClick:function(){Ye(!1)},refetch:function(){et(!0),at("Supplier Payment Added Successfully"),setTimeout((function(){et(!1),at("")}),2e3)}}),ze&&Object(u.jsx)(be,{onClick:function(){Ke(!1)},refetch:function(){et(!0),at("Debit Note Added Successfully"),setTimeout((function(){et(!1),at("")}),2e3)}}),Ge&&Object(u.jsx)(H,{onClick:function(){Ue(!1)},refetch:function(){et(!0),at("Purchase Returns Added Successfully"),setTimeout((function(){et(!1),at("")}),2e3)}}),ae&&Object(u.jsx)(Y,{onClick:function(){se(!1)},refetch:function(){et(!0),at("Purchase Order Added Successfully"),setTimeout((function(){et(!1),at("")}),2e3)}}),X&&Object(u.jsx)(U,{onClick:function(){Z(!1)},refetch:function(){et(!0),at("Expense Added Successfully"),setTimeout((function(){et(!1),at("")}),2e3)}}),ye&&Object(u.jsx)(V,{onClick:function(){we(!1)},refetch:function(){et(!0),at("Purhase Receipt Added Successfully"),setTimeout((function(){et(!1),at("")}),2e3)}}),$e&&Object(u.jsx)(C,{alert:$e,message:ct})]})})})};i.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(_e,{})}),document.getElementById("root"))},45:function(e,t,n){},60:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){}},[[276,1,2]]]);
//# sourceMappingURL=main.3d4308a5.chunk.js.map